<process name="Nexus - Borgere og forløb" version="1.0" bpversion="7.3.0.9110" narrative="" byrefcollection="true" processrunningmessage="" disableversioning="false" type="object" runmode="Exclusive" preferredid="99094ce4-16e3-4ec4-8470-8c1fba48a1f7">
  <appdef>
    <element name="Application Root">
      <id>1e24150d-ea7b-40b9-baee-6c1d07669361</id>
      <type>Application</type>
      <basetype>Application</basetype>
      <datatype>unknown</datatype>
      <diagnose>False</diagnose>
    </element>
  </appdef>
  <view>
    <camerax>199</camerax>
    <cameray>21</cameray>
    <zoom version="2">1.25</zoom>
  </view>
  <preconditions />
  <endpoint narrative="" />
  <subsheet subsheetid="827b03de-475a-49b6-b641-58a2549524c7" type="CleanUp" published="True">
    <name>Clean Up</name>
    <view>
      <camerax>0</camerax>
      <cameray>0</cameray>
      <zoom version="2">1.25</zoom>
    </view>
  </subsheet>
  <subsheet subsheetid="d5cc0f3c-1d67-4f5b-a83a-08a4b9574114" type="Normal" published="True">
    <name>Hent borger</name>
    <view>
      <camerax>14</camerax>
      <cameray>105</cameray>
      <zoom version="2">1.25</zoom>
    </view>
  </subsheet>
  <subsheet subsheetid="2706c9a6-c69e-4fa7-99fa-1a040ee40f50" type="Normal" published="True">
    <name>Søg borger</name>
    <view>
      <camerax>14</camerax>
      <cameray>42</cameray>
      <zoom version="2">1.25</zoom>
    </view>
  </subsheet>
  <subsheet subsheetid="3aa258ae-4835-4769-aa0c-b27fdd411986" type="Normal" published="True">
    <name>Hent borgers forløb</name>
    <view>
      <camerax>0</camerax>
      <cameray>-21</cameray>
      <zoom version="2">1.25</zoom>
    </view>
  </subsheet>
  <subsheet subsheetid="2a8b0dd5-5e35-4152-b454-911f5f5b80b3" type="Normal" published="True">
    <name>Hent borgers referencer</name>
    <view>
      <camerax>0</camerax>
      <cameray>390</cameray>
      <zoom version="2">1.25</zoom>
    </view>
  </subsheet>
  <subsheet subsheetid="ae754b0e-b354-4d82-8234-dc7628f46c97" type="Normal" published="True">
    <name>Hent borgers præferencer</name>
    <view>
      <camerax>0</camerax>
      <cameray>-21</cameray>
      <zoom version="2">1.25</zoom>
    </view>
  </subsheet>
  <subsheet subsheetid="603b3371-7a7d-4ba7-a03c-abc5e4cb0e03" type="Normal" published="True">
    <name>Hent aktuelle udlån</name>
    <view>
      <camerax>0</camerax>
      <cameray>21</cameray>
      <zoom version="2">1.25</zoom>
    </view>
  </subsheet>
  <subsheet subsheetid="69cd9e36-55ca-4ee4-beee-cd5dbdebe531" type="Normal" published="True">
    <name>Opret forløb på borger</name>
    <view>
      <camerax>55</camerax>
      <cameray>351</cameray>
      <zoom version="2">1.25</zoom>
    </view>
  </subsheet>
  <subsheet subsheetid="3183f218-9f38-4ce1-b2a2-56516a37c620" type="Normal" published="True">
    <name>Tilknyt mail til borger</name>
    <view>
      <camerax>55</camerax>
      <cameray>453</cameray>
      <zoom version="2">1.25</zoom>
    </view>
  </subsheet>
  <subsheet subsheetid="250f85d6-ad56-4a54-b1a2-bb70b39329a3" type="Normal" published="True">
    <name>Afslut forløb</name>
    <view>
      <camerax>0</camerax>
      <cameray>33</cameray>
      <zoom version="2">1.25</zoom>
    </view>
  </subsheet>
  <subsheet subsheetid="9a14cc87-1eb9-4345-bf39-4e8fdbe6b633" type="Normal" published="True">
    <name>Opret borger</name>
    <view>
      <camerax>0</camerax>
      <cameray>63</cameray>
      <zoom version="2">1.25</zoom>
    </view>
  </subsheet>
  <subsheet subsheetid="e28959da-df95-4cbb-9a74-c06d173fe283" type="Normal" published="True">
    <name>Opdater borger</name>
    <view>
      <camerax>0</camerax>
      <cameray>147</cameray>
      <zoom version="2">1.25</zoom>
    </view>
  </subsheet>
  <subsheet subsheetid="c6d555d6-ca2d-4c46-9722-f33f8e92664d" type="Normal" published="True">
    <name>Hent Pårørende</name>
    <view>
      <camerax>0</camerax>
      <cameray>-21</cameray>
      <zoom version="2">1.25</zoom>
    </view>
  </subsheet>
  <subsheet subsheetid="d720b969-ebb8-4277-8f01-55a64200e7f5" type="Normal" published="True">
    <name>Hent SOR kontakter</name>
    <view>
      <camerax>-7</camerax>
      <cameray>32</cameray>
      <zoom version="2">1.25</zoom>
    </view>
  </subsheet>
  <subsheet subsheetid="e6e52703-e8f7-4ad7-9d6d-fefeb93f2dea" type="Normal" published="True">
    <name>Søg efter SOR kontakt</name>
    <view>
      <camerax>-7</camerax>
      <cameray>11</cameray>
      <zoom version="2">1.25</zoom>
    </view>
  </subsheet>
  <subsheet subsheetid="4be1d5ff-8fff-4e7c-a6f1-a1ba1376ac6e" type="Normal" published="True">
    <name>Tilknyt SOR kontakt</name>
    <view>
      <camerax>0</camerax>
      <cameray>-78</cameray>
      <zoom version="2">1.25</zoom>
    </view>
  </subsheet>
  <subsheet subsheetid="ee9739d7-5eaa-493a-9ce1-f18ffd4b92fa" type="Normal" published="True">
    <name>Hent pathway</name>
    <view>
      <camerax>311</camerax>
      <cameray>134</cameray>
      <zoom version="2">1.25</zoom>
    </view>
  </subsheet>
  <subsheet subsheetid="1d658246-3945-476b-836d-924fa5946298" type="Normal" published="True">
    <name>Filtrer referencer</name>
    <view>
      <camerax>47</camerax>
      <cameray>12</cameray>
      <zoom version="2">1.25</zoom>
    </view>
  </subsheet>
  <subsheet subsheetid="ed9423f9-dab8-4634-afa0-b7f117e8da58" type="Normal" published="True">
    <name>Hent medicinkort</name>
    <view>
      <camerax>47</camerax>
      <cameray>75</cameray>
      <zoom version="2">1.25</zoom>
    </view>
  </subsheet>
  <subsheet subsheetid="ceea0079-36a7-4682-904d-7c5f6e2058f8" type="Normal" published="False">
    <name>Opdater medicin</name>
    <view>
      <camerax>47</camerax>
      <cameray>159</cameray>
      <zoom version="2">1.25</zoom>
    </view>
  </subsheet>
  <subsheet subsheetid="2603825d-13ba-4624-8fe1-c2da14ae1e7e" type="Normal" published="True">
    <name>Opret dokument</name>
    <view>
      <camerax>311</camerax>
      <cameray>-86</cameray>
      <zoom version="2">1.25</zoom>
    </view>
  </subsheet>
  <stage stageid="e9610f40-b50b-4393-89dd-8ff313002cfd" name="Start" type="Start">
    <loginhibit />
    <display x="0" y="-135" />
    <onsuccess>b9327044-cf8e-433f-b263-08938dc6e5e4</onsuccess>
  </stage>
  <stage stageid="b9327044-cf8e-433f-b263-08938dc6e5e4" name="End" type="End">
    <loginhibit />
    <display x="0" y="60" />
  </stage>
  <stage stageid="39901a12-7925-4356-aae9-3751b7ef08b0" name="Stage1" type="ProcessInfo">
    <display x="-195" y="-105" w="150" h="90" />
    <references>
      <reference>System.dll</reference>
      <reference>System.Data.dll</reference>
      <reference>System.Xml.dll</reference>
      <reference>System.Drawing.dll</reference>
      <reference>Newtonsoft.Json.dll</reference>
      <reference>System.Core.dll</reference>
    </references>
    <imports>
      <import>System</import>
      <import>System.Drawing</import>
      <import>System.Data</import>
      <import>System.Text</import>
      <import>Newtonsoft.Json.Linq</import>
      <import>System.Text.RegularExpressions</import>
      <import>System.Collections.Generic</import>
      <import>Newtonsoft.Json</import>
      <import>System.Linq</import>
    </imports>
    <language>csharp</language>
    <globalcode><![CDATA[]]></globalcode>
    <code><![CDATA[        public JArray FilterReferences(string json, string path, bool activePathwaysOnly)
        {
            MatchCollection matches = Regex.Matches(path, @"/([^\/]+)+");

            if (matches.Count == 0)
                throw new Exception("Can't match empty path");

            List<string> filterPath = new List<string>();

            foreach (Match match in matches)
                filterPath.Add(match.Groups[1].Value);


            var rootElements = JArray.Parse(json);

            List<JToken> elements = new List<JToken>();

            foreach (var item in rootElements)
                elements.AddRange(FilterTree(item, new List<JToken>(), filterPath, activePathwaysOnly));

            return new JArray(elements.ToArray());
        }

        public List<JToken> FilterTree(JToken root, List<JToken> path, List<string> filter, bool activePathwaysOnly)
        {

            List<JToken> result = new List<JToken>();

            //Check here
            if (activePathwaysOnly && root["type"].Value<string>() == "patientPathwayReference" && root["pathwayStatus"].Value<string>() != "ACTIVE")
                return result;

            path.Add(root);

            if (CompareFilterAndPath(path, filter))
            {
                result.Add(root);
            }
            else
            {
                if (root["children"] != null && filter.Count > path.Count)
                {

                    foreach (var token in root["children"] as JArray)
                        result.AddRange(FilterTree(token, path, filter, activePathwaysOnly));
                }
            }

            path.RemoveAt(path.Count - 1);

            return result;
        }

        private bool CompareFilterAndPath(List<JToken> path, List<string> filter)
        {
            if (path.Count != filter.Count) return false;

            for (int i = 0; i < path.Count; i++)
            {
                var nameMatch = path[i]["name"].ToString() == filter[i] || path[i]["type"].ToString() == filter[i] || filter[i] == "*";

                if (!nameMatch) return false;
            }

            return true;
        }
		
		public IEnumerable<JToken> All(JToken token, Func<JToken, bool> condition, string nodeName = "children")
        {

            List<JToken> result = new List<JToken>();

            Traverse(token, (element) =>
             {
                 if (condition(element))
                     result.Add(element);
             },nodeName);

            return result;
        }

		
        public delegate void TraverseCallback(JToken token);

        public void Traverse(JToken root, TraverseCallback callback, string nodeName = "children")
        {

            callback(root);

            if (root[nodeName] != null)
            {
                foreach (var token in root[nodeName] as JArray)
                    Traverse(token, callback,nodeName);
            }

        }

]]></code>
  </stage>
  <stage stageid="dd283de4-e237-4436-9462-6378b69c37f6" name="Clean Up" type="SubSheetInfo">
    <subsheetid>827b03de-475a-49b6-b641-58a2549524c7</subsheetid>
    <display x="-195" y="-105" w="150" h="90" />
  </stage>
  <stage stageid="8c03d1a7-fb39-4bba-a468-3d49c678033d" name="Start" type="Start">
    <subsheetid>827b03de-475a-49b6-b641-58a2549524c7</subsheetid>
    <loginhibit />
    <display x="15" y="-105" />
    <onsuccess>1f727cf5-634d-4c58-b1fa-304596220508</onsuccess>
  </stage>
  <stage stageid="1f727cf5-634d-4c58-b1fa-304596220508" name="End" type="End">
    <subsheetid>827b03de-475a-49b6-b641-58a2549524c7</subsheetid>
    <loginhibit />
    <display x="15" y="90" />
  </stage>
  <stage stageid="e4ab675b-a891-441e-8b47-aa9480df19c2" name="Hent borger" type="SubSheetInfo">
    <subsheetid>d5cc0f3c-1d67-4f5b-a83a-08a4b9574114</subsheetid>
    <display x="-195" y="-105" w="150" h="90" />
  </stage>
  <stage stageid="2849c232-410a-4e44-b0b2-7202d5f64aab" name="Start" type="Start">
    <subsheetid>d5cc0f3c-1d67-4f5b-a83a-08a4b9574114</subsheetid>
    <loginhibit />
    <display x="15" y="-120" />
    <inputs>
      <input type="text" name="Cpr" stage="Cpr" />
    </inputs>
    <onsuccess>758de73c-4111-44b2-a8ee-a35c8f04dc99</onsuccess>
  </stage>
  <stage stageid="1ad23fc0-c28a-43dd-af0c-4f62b270fdbf" name="End" type="End">
    <subsheetid>d5cc0f3c-1d67-4f5b-a83a-08a4b9574114</subsheetid>
    <loginhibit />
    <display x="15" y="270" />
    <outputs>
      <output type="collection" name="Borger" stage="Borger" />
    </outputs>
  </stage>
  <stage stageid="e6ac5c7b-a348-42f3-92b2-c7d58960e200" name="" type="Note">
    <subsheetid>827b03de-475a-49b6-b641-58a2549524c7</subsheetid>
    <narrative>Clean Up Page

This is an optional page where you might choose to perform some finalisation (or "cleanup") tasks as your business object is closed down.

The cleanup action will be called automatically immediately after closing your business object at the end of a business process.

You will not be able to call this action from a business process, nor will it be called at any other time than before the disposal of the business object.</narrative>
    <display x="-180" y="60" w="180" h="230" />
  </stage>
  <stage stageid="24ea09ba-bf09-4f54-96cf-1cb6dc4285d2" name="Input" type="Block">
    <display x="-270" y="-45" w="150" h="45" />
    <font family="Segoe UI" size="10" style="Regular" color="339966" />
  </stage>
  <stage stageid="49b62bf5-d2b2-49b2-96df-8efcd0413170" name="Variabler" type="Block">
    <display x="-270" y="75" w="150" h="45" />
    <font family="Segoe UI" size="10" style="Regular" color="666699" />
  </stage>
  <stage stageid="0e53b721-0b8a-415b-b064-566fc976ce76" name="Konstanter" type="Block">
    <display x="-270" y="15" w="150" h="45" />
    <font family="Segoe UI" size="10" style="Regular" color="008080" />
  </stage>
  <stage stageid="ae6c4bbc-68d1-4729-9227-e078d35cbd2e" name="Output" type="Block">
    <display x="-270" y="135" w="150" h="45" />
    <font family="Segoe UI" size="10" style="Regular" color="800080" />
  </stage>
  <stage stageid="3b7954ae-5eef-49ed-a645-e9f157bd18d9" name="Cpr" type="Data">
    <subsheetid>d5cc0f3c-1d67-4f5b-a83a-08a4b9574114</subsheetid>
    <display x="-195" y="-15" w="120" h="30" />
    <datatype>text</datatype>
    <initialvalue />
    <private />
    <alwaysinit />
  </stage>
  <stage stageid="41fb0295-e57f-424c-b816-6319b55eeff3" name="Input" type="Block">
    <subsheetid>d5cc0f3c-1d67-4f5b-a83a-08a4b9574114</subsheetid>
    <display x="-270" y="-45" w="150" h="60" />
    <font family="Segoe UI" size="10" style="Regular" color="339966" />
  </stage>
  <stage stageid="bb01282a-9f2a-4f6c-ac72-e3a55b0d8a48" name="Variabler" type="Block">
    <subsheetid>d5cc0f3c-1d67-4f5b-a83a-08a4b9574114</subsheetid>
    <display x="-270" y="90" w="150" h="150" />
    <font family="Segoe UI" size="10" style="Regular" color="666699" />
  </stage>
  <stage stageid="0f1c2aff-deed-4a06-aba4-4fdeb83c9a5c" name="Konstanter" type="Block">
    <subsheetid>d5cc0f3c-1d67-4f5b-a83a-08a4b9574114</subsheetid>
    <display x="-270" y="30" w="150" h="45" />
    <font family="Segoe UI" size="10" style="Regular" color="008080" />
  </stage>
  <stage stageid="c290fc53-ce3b-40fa-b9d2-35fe41025fc9" name="Output" type="Block">
    <subsheetid>d5cc0f3c-1d67-4f5b-a83a-08a4b9574114</subsheetid>
    <display x="-270" y="255" w="150" h="60" />
    <font family="Segoe UI" size="10" style="Regular" color="800080" />
  </stage>
  <stage stageid="a1274023-b291-4abc-bcfe-2de473f17fd5" name="Hent patientDetailsSearch url" type="Action">
    <subsheetid>d5cc0f3c-1d67-4f5b-a83a-08a4b9574114</subsheetid>
    <loginhibit onsuccess="true" />
    <display x="15" y="75" />
    <inputs>
      <input type="text" name="Navn" friendlyname="Navn" narrative="navn på det globale rod api" expr="&quot;patientDetailsSearch&quot;" />
    </inputs>
    <outputs>
      <output type="text" name="Url" friendlyname="Url" stage="patientDetailsSearch" />
    </outputs>
    <onsuccess>8d8b9062-28a6-42c2-b032-c4ea9f9d404b</onsuccess>
    <resource object="Nexus - Core" action="Api url" />
  </stage>
  <stage stageid="4fc0b63f-4817-4bd5-9d74-ae7fa3ccdaab" name="patientDetailsSearch" type="Data">
    <subsheetid>d5cc0f3c-1d67-4f5b-a83a-08a4b9574114</subsheetid>
    <display x="-195" y="120" w="120" h="30" />
    <datatype>text</datatype>
    <initialvalue />
    <private />
    <alwaysinit />
  </stage>
  <stage stageid="d1748aba-8434-4328-af53-4e5d0a983210" name="Hent cpr" type="Action">
    <subsheetid>d5cc0f3c-1d67-4f5b-a83a-08a4b9574114</subsheetid>
    <loginhibit onsuccess="true" />
    <display x="15" y="-45" />
    <inputs>
      <input type="text" name="Target" friendlyname="Target" narrative="the string to search for a cpr number" expr="[Cpr]" />
    </inputs>
    <outputs>
      <output type="text" name="Cpr" friendlyname="Cpr" narrative="The cpr number found by the search" stage="Cpr" />
    </outputs>
    <onsuccess>46e11a2b-9959-42dc-994a-286f19e9ee3c</onsuccess>
    <resource object="Utility - Odk" action="String: Extract cpr" />
  </stage>
  <stage stageid="46e11a2b-9959-42dc-994a-286f19e9ee3c" name="Har vi cpr?" type="Decision">
    <subsheetid>d5cc0f3c-1d67-4f5b-a83a-08a4b9574114</subsheetid>
    <loginhibit />
    <display x="15" y="0" />
    <decision expression="[Cpr] &lt;&gt; &quot;&quot;" />
    <ontrue>a1274023-b291-4abc-bcfe-2de473f17fd5</ontrue>
    <onfalse>42f9ee14-27ac-4195-a742-83b988037fd0</onfalse>
  </stage>
  <stage stageid="42f9ee14-27ac-4195-a742-83b988037fd0" name="Ugyldigt cpr" type="Exception">
    <subsheetid>d5cc0f3c-1d67-4f5b-a83a-08a4b9574114</subsheetid>
    <display x="120" y="0" />
    <exception localized="yes" type="Invalid Input Parameter" detail="&quot;Cpr er er ikke gyldigt&quot;" />
  </stage>
  <stage stageid="2efb9b58-b982-4638-8731-52f575d29a6b" name="Cpr validering" type="Block">
    <subsheetid>d5cc0f3c-1d67-4f5b-a83a-08a4b9574114</subsheetid>
    <loginhibit />
    <display x="-90" y="-75" w="315" h="105" />
    <font family="Segoe UI" size="10" style="Regular" color="7FB2E5" />
  </stage>
  <stage stageid="6124e1ae-2b9e-45bb-831e-489b3501b438" name="Udsøg borger" type="Block">
    <subsheetid>d5cc0f3c-1d67-4f5b-a83a-08a4b9574114</subsheetid>
    <loginhibit />
    <display x="-90" y="45" w="315" h="195" />
    <font family="Segoe UI" size="10" style="Regular" color="7FB2E5" />
  </stage>
  <stage stageid="8d8b9062-28a6-42c2-b032-c4ea9f9d404b" name="Nexus - Core::Post" type="Action">
    <subsheetid>d5cc0f3c-1d67-4f5b-a83a-08a4b9574114</subsheetid>
    <loginhibit onsuccess="true" />
    <display x="15" y="120" />
    <inputs>
      <input type="text" name="Url" friendlyname="Url" expr="[patientDetailsSearch]" />
      <input type="text" name="Body" friendlyname="Body" expr="&quot;{&#xA;    &quot;&quot;businessKey&quot;&quot;: &quot;&quot;&quot; &amp; [Cpr] &amp; &quot;&quot;&quot;,&#xA;    &quot;&quot;keyType&quot;&quot;: &quot;&quot;CPR&quot;&quot;&#xA;} &quot;&#xA;" />
    </inputs>
    <outputs>
      <output type="collection" name="Data" friendlyname="Data" stage="Borger" />
      <output type="number" name="Antal" friendlyname="Antal" stage="Antal" />
      <output type="text" name="Json" friendlyname="Json" narrative="Det rå json output" stage="" />
      <output type="number" name="Statuskode" friendlyname="Statuskode" narrative="Http statuskoden for kaldet" stage="Statuskode" />
    </outputs>
    <onsuccess>7b43fc4e-3eee-401c-983c-95d6c7574ad9</onsuccess>
    <resource object="Nexus - Core" action="Post" />
  </stage>
  <stage stageid="4e6681ec-10f4-4626-985e-2ea9352ab84c" name="Nexus - Core::Start" type="Action">
    <subsheetid>d5cc0f3c-1d67-4f5b-a83a-08a4b9574114</subsheetid>
    <loginhibit onsuccess="true" />
    <display x="135" y="-180" />
    <inputs>
      <input type="text" name="Credentials" friendlyname="Credentials" expr="&quot;KMD Nexus - produktion&quot;" />
    </inputs>
    <onsuccess>9172f5d5-bc1e-4711-9252-727dc850f981</onsuccess>
    <resource object="Nexus - Core" action="Start" />
  </stage>
  <stage stageid="9172f5d5-bc1e-4711-9252-727dc850f981" name="Debug - nancy" type="Calculation">
    <subsheetid>d5cc0f3c-1d67-4f5b-a83a-08a4b9574114</subsheetid>
    <loginhibit />
    <display x="135" y="-135" />
    <onsuccess>5b2f8ae4-0b32-4213-948c-79e2753fc6c8</onsuccess>
    <calculation expression="&quot;xxxxxxxxxx&quot;" stage="Cpr" />
  </stage>
  <stage stageid="e8a1d317-4b21-4710-9b5e-e0e68bd4f115" name="Statuskode" type="Data">
    <subsheetid>d5cc0f3c-1d67-4f5b-a83a-08a4b9574114</subsheetid>
    <display x="-195" y="210" w="120" h="30" />
    <datatype>number</datatype>
    <initialvalue />
    <private />
    <alwaysinit />
  </stage>
  <stage stageid="d5c0d1db-7681-456b-8e22-a005b598a5be" name="Antal" type="Data">
    <subsheetid>d5cc0f3c-1d67-4f5b-a83a-08a4b9574114</subsheetid>
    <display x="-195" y="165" w="120" h="30" />
    <datatype>number</datatype>
    <initialvalue />
    <private />
    <alwaysinit />
  </stage>
  <stage stageid="62a144ae-1679-4998-a88d-ab372ef94fd4" name="Borger" type="Collection">
    <subsheetid>d5cc0f3c-1d67-4f5b-a83a-08a4b9574114</subsheetid>
    <display x="-195" y="285" w="120" h="30" />
    <datatype>collection</datatype>
    <private />
    <alwaysinit />
  </stage>
  <stage stageid="7b43fc4e-3eee-401c-983c-95d6c7574ad9" name="Alt ok?" type="Decision">
    <subsheetid>d5cc0f3c-1d67-4f5b-a83a-08a4b9574114</subsheetid>
    <loginhibit />
    <display x="15" y="165" />
    <decision expression="[Statuskode] = 200" />
    <ontrue>54e241ee-45e3-488e-831c-e968411de29e</ontrue>
    <onfalse>a644bb90-a5c7-478b-8822-06c4789887d4</onfalse>
  </stage>
  <stage stageid="a644bb90-a5c7-478b-8822-06c4789887d4" name="Http fejl" type="Exception">
    <subsheetid>d5cc0f3c-1d67-4f5b-a83a-08a4b9574114</subsheetid>
    <display x="120" y="165" />
    <exception localized="yes" type="Business Exception" detail="&quot;Kaldet returnerede en status: &quot;  &amp; [Statuskode]" />
  </stage>
  <stage stageid="758de73c-4111-44b2-a8ee-a35c8f04dc99" name="Anchor1" type="Anchor">
    <subsheetid>d5cc0f3c-1d67-4f5b-a83a-08a4b9574114</subsheetid>
    <loginhibit />
    <display x="15" y="-90" w="10" h="10" />
    <onsuccess>d1748aba-8434-4328-af53-4e5d0a983210</onsuccess>
  </stage>
  <stage stageid="5b2f8ae4-0b32-4213-948c-79e2753fc6c8" name="Anchor2" type="Anchor">
    <subsheetid>d5cc0f3c-1d67-4f5b-a83a-08a4b9574114</subsheetid>
    <loginhibit />
    <display x="135" y="-90" w="10" h="10" />
    <onsuccess>758de73c-4111-44b2-a8ee-a35c8f04dc99</onsuccess>
  </stage>
  <stage stageid="72fd29e3-955b-4353-9012-0561ff3ba6fc" name="Debug" type="Block">
    <subsheetid>d5cc0f3c-1d67-4f5b-a83a-08a4b9574114</subsheetid>
    <loginhibit />
    <display x="90" y="-210" w="90" h="105" />
    <font family="Segoe UI" size="10" style="Regular" color="FFFF99" />
  </stage>
  <stage stageid="43bc48b8-a3a0-4b52-96f8-42459fcfb6a8" name="Hent borgers forløb" type="SubSheetInfo">
    <subsheetid>3aa258ae-4835-4769-aa0c-b27fdd411986</subsheetid>
    <display x="-195" y="-105" w="150" h="90" />
  </stage>
  <stage stageid="f47ff64e-ac72-4dde-9a79-90a24d131a24" name="Start" type="Start">
    <subsheetid>3aa258ae-4835-4769-aa0c-b27fdd411986</subsheetid>
    <loginhibit />
    <display x="15" y="-105" />
    <inputs>
      <input type="collection" name="Borger" stage="Borger" />
    </inputs>
    <onsuccess>5a29f901-29ce-4aa3-aa55-702db72514ba</onsuccess>
  </stage>
  <stage stageid="52543daf-1642-4eda-a5a2-67e3941c361f" name="End" type="End">
    <subsheetid>3aa258ae-4835-4769-aa0c-b27fdd411986</subsheetid>
    <loginhibit />
    <display x="15" y="30" />
    <outputs>
      <output type="collection" name="Forløb" stage="Forløb" />
      <output type="number" name="Antal" stage="Antal" />
    </outputs>
  </stage>
  <stage stageid="5fcee075-da38-405f-bceb-ad28703c1518" name="Input" type="Block">
    <subsheetid>3aa258ae-4835-4769-aa0c-b27fdd411986</subsheetid>
    <display x="-270" y="-45" w="150" h="60" />
    <font family="Segoe UI" size="10" style="Regular" color="339966" />
  </stage>
  <stage stageid="bd46ea06-b90a-485a-848d-47c0e0213543" name="Variabler" type="Block">
    <subsheetid>3aa258ae-4835-4769-aa0c-b27fdd411986</subsheetid>
    <display x="-270" y="90" w="150" h="45" />
    <font family="Segoe UI" size="10" style="Regular" color="666699" />
  </stage>
  <stage stageid="23fbd1b2-ea27-4fde-a4fb-3d55b0fe3adf" name="Konstanter" type="Block">
    <subsheetid>3aa258ae-4835-4769-aa0c-b27fdd411986</subsheetid>
    <display x="-270" y="30" w="150" h="45" />
    <font family="Segoe UI" size="10" style="Regular" color="008080" />
  </stage>
  <stage stageid="8b021984-3d9f-497f-8589-b61154bb4baa" name="Output" type="Block">
    <subsheetid>3aa258ae-4835-4769-aa0c-b27fdd411986</subsheetid>
    <display x="-270" y="150" w="150" h="105" />
    <font family="Segoe UI" size="10" style="Regular" color="800080" />
  </stage>
  <stage stageid="b4d60470-dec0-459c-a5ab-ab7f37f9b816" name="Borger" type="Collection">
    <subsheetid>3aa258ae-4835-4769-aa0c-b27fdd411986</subsheetid>
    <display x="-195" y="-15" w="120" h="30" />
    <datatype>collection</datatype>
    <private />
    <alwaysinit />
  </stage>
  <stage stageid="692c5732-ad71-4b0a-a33d-849ca17d674c" name="Nexus - Core::Start" type="Action">
    <subsheetid>3aa258ae-4835-4769-aa0c-b27fdd411986</subsheetid>
    <loginhibit onsuccess="true" />
    <display x="135" y="-180" />
    <inputs>
      <input type="text" name="Credentials" friendlyname="Credentials" expr="&quot;KMD Nexus - odensedev&quot;" />
    </inputs>
    <onsuccess>3c3b2554-19a0-4dd1-b276-9c12f97e05af</onsuccess>
    <resource object="Nexus - Core" action="Start" />
  </stage>
  <stage stageid="e3a1d93e-2f64-4708-ab8d-0214c25a571c" name="Debug" type="Block">
    <subsheetid>3aa258ae-4835-4769-aa0c-b27fdd411986</subsheetid>
    <loginhibit />
    <display x="90" y="-210" w="90" h="105" />
    <font family="Segoe UI" size="10" style="Regular" color="FFFF99" />
  </stage>
  <stage stageid="3c3b2554-19a0-4dd1-b276-9c12f97e05af" name="Hent borger" type="SubSheet">
    <subsheetid>3aa258ae-4835-4769-aa0c-b27fdd411986</subsheetid>
    <loginhibit />
    <display x="135" y="-135" />
    <inputs>
      <input type="text" name="Cpr" friendlyname="Cpr" expr="&quot;xxxxxxxxxx&quot;" />
    </inputs>
    <outputs>
      <output type="collection" name="Borger" friendlyname="Borger" stage="Borger" />
    </outputs>
    <onsuccess>4d71362a-88f9-4111-971b-b9ed656fffe3</onsuccess>
    <processid>d5cc0f3c-1d67-4f5b-a83a-08a4b9574114</processid>
  </stage>
  <stage stageid="5a29f901-29ce-4aa3-aa55-702db72514ba" name="Anchor3" type="Anchor">
    <subsheetid>3aa258ae-4835-4769-aa0c-b27fdd411986</subsheetid>
    <loginhibit />
    <display x="15" y="-75" w="10" h="10" />
    <onsuccess>114c0042-02d1-4a68-9e51-9c18f1ac005c</onsuccess>
  </stage>
  <stage stageid="4d71362a-88f9-4111-971b-b9ed656fffe3" name="Anchor4" type="Anchor">
    <subsheetid>3aa258ae-4835-4769-aa0c-b27fdd411986</subsheetid>
    <loginhibit />
    <display x="135" y="-75" w="10" h="10" />
    <onsuccess>5a29f901-29ce-4aa3-aa55-702db72514ba</onsuccess>
  </stage>
  <stage stageid="c50f5b78-1400-4325-83c4-bfec8828aaae" name="Hent forløb" type="Block">
    <subsheetid>3aa258ae-4835-4769-aa0c-b27fdd411986</subsheetid>
    <loginhibit />
    <display x="-90" y="-60" w="315" h="60" />
    <font family="Segoe UI" size="10" style="Regular" color="7FB2E5" />
  </stage>
  <stage stageid="54e241ee-45e3-488e-831c-e968411de29e" name="Udtræk borgeren" type="Calculation">
    <subsheetid>d5cc0f3c-1d67-4f5b-a83a-08a4b9574114</subsheetid>
    <loginhibit />
    <display x="15" y="210" />
    <onsuccess>1ad23fc0-c28a-43dd-af0c-4f62b270fdbf</onsuccess>
    <calculation expression="[Borger.patient]" stage="Borger" />
  </stage>
  <stage stageid="114c0042-02d1-4a68-9e51-9c18f1ac005c" name="Nexus - Core::Get" type="Action">
    <subsheetid>3aa258ae-4835-4769-aa0c-b27fdd411986</subsheetid>
    <loginhibit onsuccess="true" />
    <display x="15" y="-30" />
    <inputs>
      <input type="text" name="Url" friendlyname="Url" expr="[Borger._links.activePrograms]" />
    </inputs>
    <outputs>
      <output type="collection" name="Data" friendlyname="Data" stage="Forløb" />
      <output type="number" name="Antal" friendlyname="Antal" stage="Antal" />
      <output type="text" name="Json" friendlyname="Json" narrative="Det rå json output" stage="" />
      <output type="number" name="Statuskode" friendlyname="Statuskode" narrative="Http statuskoden for kaldet" stage="" />
    </outputs>
    <onsuccess>52543daf-1642-4eda-a5a2-67e3941c361f</onsuccess>
    <resource object="Nexus - Core" action="Get" />
  </stage>
  <stage stageid="bf9311a3-7ed8-4ed3-ac78-c85ec60c5049" name="Forløb" type="Collection">
    <subsheetid>3aa258ae-4835-4769-aa0c-b27fdd411986</subsheetid>
    <display x="-195" y="180" w="120" h="30" />
    <datatype>collection</datatype>
    <private />
    <alwaysinit />
  </stage>
  <stage stageid="36778ddb-fef2-47e9-9cdc-867441344196" name="Antal" type="Data">
    <subsheetid>3aa258ae-4835-4769-aa0c-b27fdd411986</subsheetid>
    <display x="-195" y="225" w="120" h="30" />
    <datatype>number</datatype>
    <initialvalue />
    <private />
    <alwaysinit />
  </stage>
  <stage stageid="42397fc6-8904-4cfb-9395-089b6662a9e2" name="Opret forløb på borger" type="SubSheetInfo">
    <subsheetid>69cd9e36-55ca-4ee4-beee-cd5dbdebe531</subsheetid>
    <display x="-195" y="-105" w="150" h="90" />
  </stage>
  <stage stageid="4ab41668-d35e-4b6b-9ba5-cc30724038bf" name="Start" type="Start">
    <subsheetid>69cd9e36-55ca-4ee4-beee-cd5dbdebe531</subsheetid>
    <loginhibit />
    <narrative>Hvis forløbet findes i forvejen så returneres det bare</narrative>
    <display x="15" y="-90" />
    <inputs>
      <input type="collection" name="Borger" stage="Borger" />
      <input type="text" name="Grundforløb" narrative="Eks, Sundhedsfagligt grundforløb" stage="Grundforløb (navn)" />
      <input type="text" name="Forløb" stage="Forløb (navn)" />
    </inputs>
    <onsuccess>f7224d76-e93e-449a-a125-bcdc8f0618fd</onsuccess>
  </stage>
  <stage stageid="5ea59758-4936-4de4-9b7f-e5e94fefe413" name="Input" type="Block">
    <subsheetid>69cd9e36-55ca-4ee4-beee-cd5dbdebe531</subsheetid>
    <display x="-270" y="-45" w="150" h="150" />
    <font family="Segoe UI" size="10" style="Regular" color="339966" />
  </stage>
  <stage stageid="24111b37-e534-4870-ad12-847019d82065" name="Variabler" type="Block">
    <subsheetid>69cd9e36-55ca-4ee4-beee-cd5dbdebe531</subsheetid>
    <display x="-270" y="180" w="150" h="150" />
    <font family="Segoe UI" size="10" style="Regular" color="666699" />
  </stage>
  <stage stageid="3b211eaf-2270-4707-ba80-df807b3cf6c7" name="Konstanter" type="Block">
    <subsheetid>69cd9e36-55ca-4ee4-beee-cd5dbdebe531</subsheetid>
    <display x="-270" y="120" w="150" h="45" />
    <font family="Segoe UI" size="10" style="Regular" color="008080" />
  </stage>
  <stage stageid="a3870ed4-c2a9-41b8-8a31-36a2ccdd14f5" name="Output" type="Block">
    <subsheetid>69cd9e36-55ca-4ee4-beee-cd5dbdebe531</subsheetid>
    <display x="-270" y="345" w="150" h="105" />
    <font family="Segoe UI" size="10" style="Regular" color="800080" />
  </stage>
  <stage stageid="937c3be4-0f0e-4643-9eed-1ce3b3e8dabd" name="Borger" type="Collection">
    <subsheetid>69cd9e36-55ca-4ee4-beee-cd5dbdebe531</subsheetid>
    <display x="-195" y="-15" w="120" h="30" />
    <datatype>collection</datatype>
    <private />
    <alwaysinit />
  </stage>
  <stage stageid="a76acaab-a934-4c96-a224-b7ca425cb79a" name="Nexus - Core::Start" type="Action">
    <subsheetid>69cd9e36-55ca-4ee4-beee-cd5dbdebe531</subsheetid>
    <loginhibit onsuccess="true" />
    <display x="135" y="-195" />
    <inputs>
      <input type="text" name="Credentials" friendlyname="Credentials" expr="&quot;KMD Nexus - odensedev&quot;" />
    </inputs>
    <onsuccess>e0faf182-b9ec-41fb-9ae4-6fe570898cb7</onsuccess>
    <resource object="Nexus - Core" action="Start" />
  </stage>
  <stage stageid="9199fa02-037e-443b-8864-aa3b09d2424e" name="Debug" type="Block">
    <subsheetid>69cd9e36-55ca-4ee4-beee-cd5dbdebe531</subsheetid>
    <loginhibit />
    <display x="90" y="-225" w="90" h="150" />
    <font family="Segoe UI" size="10" style="Regular" color="FFFF99" />
  </stage>
  <stage stageid="e0faf182-b9ec-41fb-9ae4-6fe570898cb7" name="Hent borger" type="SubSheet">
    <subsheetid>69cd9e36-55ca-4ee4-beee-cd5dbdebe531</subsheetid>
    <loginhibit />
    <display x="135" y="-150" />
    <inputs>
      <input type="text" name="Cpr" friendlyname="Cpr" expr="&quot;xxxxxxxxxx&quot;" />
    </inputs>
    <outputs>
      <output type="collection" name="Borger" friendlyname="Borger" stage="Borger" />
    </outputs>
    <onsuccess>95a93361-e08d-40d3-9dc4-df647ac81471</onsuccess>
    <processid>d5cc0f3c-1d67-4f5b-a83a-08a4b9574114</processid>
  </stage>
  <stage stageid="f7224d76-e93e-449a-a125-bcdc8f0618fd" name="Anchor3" type="Anchor">
    <subsheetid>69cd9e36-55ca-4ee4-beee-cd5dbdebe531</subsheetid>
    <loginhibit />
    <display x="15" y="-60" w="10" h="10" />
    <onsuccess>2a49a38d-b54b-4f03-a529-18594b725b89</onsuccess>
  </stage>
  <stage stageid="7345f945-cb05-49db-b2e4-c382a7e89616" name="Anchor4" type="Anchor">
    <subsheetid>69cd9e36-55ca-4ee4-beee-cd5dbdebe531</subsheetid>
    <loginhibit />
    <display x="135" y="-60" w="10" h="10" />
    <onsuccess>f7224d76-e93e-449a-a125-bcdc8f0618fd</onsuccess>
  </stage>
  <stage stageid="f51aee95-9412-4a35-9be9-dbc0858ec031" name="Nexus - Core::Get Tilgængelige forløb)" type="Action">
    <subsheetid>69cd9e36-55ca-4ee4-beee-cd5dbdebe531</subsheetid>
    <loginhibit onsuccess="true" />
    <display x="105" y="135" />
    <inputs>
      <input type="text" name="Url" friendlyname="Url" expr="[Borger._links.availableProgramPathways]" />
    </inputs>
    <outputs>
      <output type="collection" name="Data" friendlyname="Data" stage="Tilgængelige forløb" />
      <output type="number" name="Antal" friendlyname="Antal" stage="" />
      <output type="text" name="Json" friendlyname="Json" narrative="Det rå json output" stage="" />
      <output type="number" name="Statuskode" friendlyname="Statuskode" narrative="Http statuskoden for kaldet" stage="" />
    </outputs>
    <onsuccess>dc30c603-d0ac-4883-8930-746403a15a88</onsuccess>
    <resource object="Nexus - Core" action="Get" />
  </stage>
  <stage stageid="f6f83d15-81a2-4fdc-87cc-5943c01d9f60" name="Tilgængelige forløb" type="Collection">
    <subsheetid>69cd9e36-55ca-4ee4-beee-cd5dbdebe531</subsheetid>
    <display x="-195" y="255" w="120" h="30" />
    <datatype>collection</datatype>
    <private />
    <alwaysinit />
  </stage>
  <stage stageid="9a8fffd6-d603-44ce-9d26-a6af10777726" name="Aktive forløb" type="Collection">
    <subsheetid>69cd9e36-55ca-4ee4-beee-cd5dbdebe531</subsheetid>
    <display x="-195" y="210" w="120" h="30" />
    <datatype>collection</datatype>
    <private />
    <alwaysinit />
  </stage>
  <stage stageid="c7ecbaa1-8288-4b2a-a108-3bffc04b0ef4" name="Forløb" type="Collection">
    <subsheetid>69cd9e36-55ca-4ee4-beee-cd5dbdebe531</subsheetid>
    <display x="-195" y="420" w="120" h="30" />
    <datatype>collection</datatype>
    <private />
    <alwaysinit />
  </stage>
  <stage stageid="1a9758f1-7a10-4881-977e-b14226575a65" name="Antal" type="Data">
    <subsheetid>69cd9e36-55ca-4ee4-beee-cd5dbdebe531</subsheetid>
    <display x="-195" y="300" w="120" h="30" />
    <datatype>number</datatype>
    <initialvalue />
    <private />
    <alwaysinit />
  </stage>
  <stage stageid="2a49a38d-b54b-4f03-a529-18594b725b89" name="Nexus - Core::Get (grundforløb)" type="Action">
    <subsheetid>69cd9e36-55ca-4ee4-beee-cd5dbdebe531</subsheetid>
    <loginhibit onsuccess="true" />
    <display x="15" y="45" />
    <inputs>
      <input type="text" name="Url" friendlyname="Url" expr="[Borger._links.availablePathwayAssociation]" />
    </inputs>
    <outputs>
      <output type="collection" name="Data" friendlyname="Data" stage="Grundforløb" />
      <output type="number" name="Antal" friendlyname="Antal" stage="" />
      <output type="text" name="Json" friendlyname="Json" narrative="Det rå json output" stage="" />
      <output type="number" name="Statuskode" friendlyname="Statuskode" narrative="Http statuskoden for kaldet" stage="" />
    </outputs>
    <onsuccess>29206ce5-b0d4-49e7-92b5-03d636f264ad</onsuccess>
    <resource object="Nexus - Core" action="Get" />
  </stage>
  <stage stageid="b398937d-43cb-4629-b5ea-f143004b9c32" name="Grundforløb" type="Block">
    <subsheetid>69cd9e36-55ca-4ee4-beee-cd5dbdebe531</subsheetid>
    <loginhibit />
    <display x="-90" y="15" w="390" h="210" />
    <font family="Segoe UI" size="10" style="Regular" color="7FB2E5" />
  </stage>
  <stage stageid="e3c3ee43-b545-417a-a5be-72faa7b7f0b6" name="Grundforløb" type="Collection">
    <subsheetid>69cd9e36-55ca-4ee4-beee-cd5dbdebe531</subsheetid>
    <display x="-195" y="375" w="120" h="30" />
    <datatype>collection</datatype>
    <private />
    <alwaysinit />
  </stage>
  <stage stageid="29206ce5-b0d4-49e7-92b5-03d636f264ad" name="Filtrer grundforløb" type="Action">
    <subsheetid>69cd9e36-55ca-4ee4-beee-cd5dbdebe531</subsheetid>
    <loginhibit onsuccess="true" />
    <display x="15" y="90" />
    <inputs>
      <input type="collection" name="Collection In" friendlyname="Collection In" narrative="Input collection" expr="[Grundforløb]" />
      <input type="text" name="Filter" friendlyname="Filter" narrative="The filter to apply" expr="&quot;[name]='&quot; &amp; [Grundforløb (navn)] &amp; &quot;'&quot;" />
    </inputs>
    <outputs>
      <output type="number" name="Count" friendlyname="Count" narrative="The amount of rows in the filtered collection" stage="Antal" />
      <output type="collection" name="Collection Out" friendlyname="Collection Out" narrative="The filtered collection" stage="Grundforløb" />
    </outputs>
    <onsuccess>8dd3417d-afd2-4b8c-a6cc-4e23bc7b8858</onsuccess>
    <resource object="Utility - Odk Linq" action="Filter" />
  </stage>
  <stage stageid="8dd3417d-afd2-4b8c-a6cc-4e23bc7b8858" name="Intet grundforløb?" type="Decision">
    <subsheetid>69cd9e36-55ca-4ee4-beee-cd5dbdebe531</subsheetid>
    <loginhibit />
    <display x="15" y="135" />
    <decision expression="[Antal] = 0" />
    <ontrue>f51aee95-9412-4a35-9be9-dbc0858ec031</ontrue>
    <onfalse>498e7ba9-1915-4b8f-a81b-99253649470e</onfalse>
  </stage>
  <stage stageid="e2f93470-2883-4050-a9ea-bbef5406255c" name="Nexus - Core::Put (tilknyt forløb)" type="Action">
    <subsheetid>69cd9e36-55ca-4ee4-beee-cd5dbdebe531</subsheetid>
    <loginhibit onsuccess="true" />
    <display x="255" y="90" />
    <inputs>
      <input type="text" name="Url" friendlyname="Url" expr="[Tilgængelige forløb._links.enroll]" />
      <input type="text" name="Body" friendlyname="Body" expr="&quot;&quot;" />
    </inputs>
    <outputs>
      <output type="collection" name="Data" friendlyname="Data" stage="Grundforløb" />
      <output type="number" name="Antal" friendlyname="Antal" stage="Antal" />
      <output type="text" name="Json" friendlyname="Json" narrative="Det rå json output" stage="" />
      <output type="number" name="Statuskode" friendlyname="Statuskode" narrative="Http statuskoden for kaldet" stage="" />
    </outputs>
    <onsuccess>041fef26-dfd8-4d0c-a4ed-312a5b1fcfdb</onsuccess>
    <resource object="Nexus - Core" action="Put" />
  </stage>
  <stage stageid="dc30c603-d0ac-4883-8930-746403a15a88" name="Vælg det rigtige grundforløb" type="Action">
    <subsheetid>69cd9e36-55ca-4ee4-beee-cd5dbdebe531</subsheetid>
    <loginhibit onsuccess="true" />
    <display x="180" y="135" />
    <inputs>
      <input type="collection" name="Collection In" friendlyname="Collection In" narrative="Input collection" expr="[Tilgængelige forløb]" />
      <input type="text" name="Filter" friendlyname="Filter" narrative="The filter to apply" expr="&quot;[name]='&quot; &amp; [Grundforløb (navn)] &amp; &quot;' AND active=1&quot;" />
    </inputs>
    <outputs>
      <output type="number" name="Count" friendlyname="Count" narrative="The amount of rows in the filtered collection" stage="Antal" />
      <output type="collection" name="Collection Out" friendlyname="Collection Out" narrative="The filtered collection" stage="Tilgængelige forløb" />
    </outputs>
    <onsuccess>10def318-5107-4e85-b143-5b28298a1529</onsuccess>
    <resource object="Utility - Odk Linq" action="Filter" />
  </stage>
  <stage stageid="10def318-5107-4e85-b143-5b28298a1529" name="Vi fandt det rigtige" type="Decision">
    <subsheetid>69cd9e36-55ca-4ee4-beee-cd5dbdebe531</subsheetid>
    <loginhibit />
    <display x="255" y="135" />
    <decision expression="[Antal] = 1" />
    <ontrue>e2f93470-2883-4050-a9ea-bbef5406255c</ontrue>
    <onfalse>154942c7-6051-4033-897f-0426f2c75cae</onfalse>
  </stage>
  <stage stageid="041fef26-dfd8-4d0c-a4ed-312a5b1fcfdb" name="Anchor5" type="Anchor">
    <subsheetid>69cd9e36-55ca-4ee4-beee-cd5dbdebe531</subsheetid>
    <loginhibit />
    <display x="255" y="45" w="10" h="10" />
    <onsuccess>2a49a38d-b54b-4f03-a529-18594b725b89</onsuccess>
  </stage>
  <stage stageid="2b097fb9-f791-4323-948f-f5539941310a" name="End1" type="End">
    <subsheetid>69cd9e36-55ca-4ee4-beee-cd5dbdebe531</subsheetid>
    <loginhibit />
    <display x="15" y="645" />
    <outputs>
      <output type="collection" name="Grundforløb" stage="Grundforløb" />
      <output type="collection" name="Forløb" stage="Forløb" />
    </outputs>
  </stage>
  <stage stageid="154942c7-6051-4033-897f-0426f2c75cae" name="Ingen sti" type="Exception">
    <subsheetid>69cd9e36-55ca-4ee4-beee-cd5dbdebe531</subsheetid>
    <display x="375" y="135" />
    <exception localized="yes" type="Business Exception" detail="[Grundforløb (navn)] &amp; &quot; er ukendt i Nexus&quot;" />
  </stage>
  <stage stageid="498e7ba9-1915-4b8f-a81b-99253649470e" name="Nexus - Core::Get pathway)" type="Action">
    <subsheetid>69cd9e36-55ca-4ee4-beee-cd5dbdebe531</subsheetid>
    <loginhibit onsuccess="true" />
    <display x="15" y="180" />
    <inputs>
      <input type="text" name="Url" friendlyname="Url" expr="[Grundforløb._links.self]" />
    </inputs>
    <outputs>
      <output type="collection" name="Data" friendlyname="Data" stage="Grundforløb" />
      <output type="number" name="Antal" friendlyname="Antal" stage="" />
      <output type="text" name="Json" friendlyname="Json" narrative="Det rå json output" stage="" />
      <output type="number" name="Statuskode" friendlyname="Statuskode" narrative="Http statuskoden for kaldet" stage="" />
    </outputs>
    <onsuccess>7291b2a1-2af9-4148-80cc-1307724a0fb0</onsuccess>
    <resource object="Nexus - Core" action="Get" />
  </stage>
  <stage stageid="e3377afc-7ac9-45ce-95cb-8e982caf7449" name="Nexus - Core::Get (aktive forløb)" type="Action">
    <subsheetid>69cd9e36-55ca-4ee4-beee-cd5dbdebe531</subsheetid>
    <loginhibit onsuccess="true" />
    <display x="15" y="315" />
    <inputs>
      <input type="text" name="Url" friendlyname="Url" expr="[Grundforløb._links.activePrograms]" />
    </inputs>
    <outputs>
      <output type="collection" name="Data" friendlyname="Data" stage="Aktive forløb" />
      <output type="number" name="Antal" friendlyname="Antal" stage="Antal" />
      <output type="text" name="Json" friendlyname="Json" narrative="Det rå json output" stage="" />
      <output type="number" name="Statuskode" friendlyname="Statuskode" narrative="Http statuskoden for kaldet" stage="" />
    </outputs>
    <onsuccess>3801569d-532b-46ef-aa85-4591fbdd2dfd</onsuccess>
    <resource object="Nexus - Core" action="Get" />
  </stage>
  <stage stageid="3801569d-532b-46ef-aa85-4591fbdd2dfd" name="Nexus - Core::Get (tilgængelige forløb)" type="Action">
    <subsheetid>69cd9e36-55ca-4ee4-beee-cd5dbdebe531</subsheetid>
    <loginhibit onsuccess="true" />
    <display x="15" y="360" />
    <inputs>
      <input type="text" name="Url" friendlyname="Url" expr="[Grundforløb._links.availableNestedProgramPathways]" />
    </inputs>
    <outputs>
      <output type="collection" name="Data" friendlyname="Data" stage="Tilgængelige forløb" />
      <output type="number" name="Antal" friendlyname="Antal" stage="Antal" />
      <output type="text" name="Json" friendlyname="Json" narrative="Det rå json output" stage="" />
      <output type="number" name="Statuskode" friendlyname="Statuskode" narrative="Http statuskoden for kaldet" stage="" />
    </outputs>
    <onsuccess>05cd4df1-6083-46cb-9d89-8ad19bc46c28</onsuccess>
    <resource object="Nexus - Core" action="Get" />
  </stage>
  <stage stageid="05cd4df1-6083-46cb-9d89-8ad19bc46c28" name="Filtrer tilgængelige forløb på navn" type="Action">
    <subsheetid>69cd9e36-55ca-4ee4-beee-cd5dbdebe531</subsheetid>
    <loginhibit onsuccess="true" />
    <display x="15" y="405" />
    <inputs>
      <input type="collection" name="Collection In" friendlyname="Collection In" narrative="Input collection" expr="[Tilgængelige forløb]" />
      <input type="text" name="Filter" friendlyname="Filter" narrative="The filter to apply" expr="&quot;[name]='&quot; &amp; [Forløb (navn)] &amp; &quot;'&quot;" />
    </inputs>
    <outputs>
      <output type="number" name="Count" friendlyname="Count" narrative="The amount of rows in the filtered collection" stage="Antal" />
      <output type="collection" name="Collection Out" friendlyname="Collection Out" narrative="The filtered collection" stage="Tilgængelige forløb" />
    </outputs>
    <onsuccess>c3a8205b-e15a-410e-9f19-1d0aee68b9d5</onsuccess>
    <resource object="Utility - Odk Linq" action="Filter" />
  </stage>
  <stage stageid="c3a8205b-e15a-410e-9f19-1d0aee68b9d5" name="Forkert forløb" type="Decision">
    <subsheetid>69cd9e36-55ca-4ee4-beee-cd5dbdebe531</subsheetid>
    <loginhibit />
    <display x="15" y="450" />
    <decision expression="[Antal] &lt;&gt; 1" />
    <ontrue>2afd2292-1505-49da-b194-a5914b295f87</ontrue>
    <onfalse>4432f384-d681-4bd5-86dd-5ad708695e21</onfalse>
  </stage>
  <stage stageid="2afd2292-1505-49da-b194-a5914b295f87" name="Ingen sti" type="Exception">
    <subsheetid>69cd9e36-55ca-4ee4-beee-cd5dbdebe531</subsheetid>
    <display x="375" y="450" />
    <exception localized="yes" type="Business Exception" detail="[Forløb (navn)] &amp; &quot; blev ikke fundet&quot;" />
  </stage>
  <stage stageid="4432f384-d681-4bd5-86dd-5ad708695e21" name="Filtrer aktive på id" type="Action">
    <subsheetid>69cd9e36-55ca-4ee4-beee-cd5dbdebe531</subsheetid>
    <loginhibit onsuccess="true" />
    <display x="15" y="495" />
    <inputs>
      <input type="collection" name="Collection In" friendlyname="Collection In" narrative="Input collection" expr="[Aktive forløb]" />
      <input type="text" name="Filter" friendlyname="Filter" narrative="The filter to apply" expr="&quot;[id] = &quot; &amp; [Tilgængelige forløb.id]" />
    </inputs>
    <outputs>
      <output type="number" name="Count" friendlyname="Count" narrative="The amount of rows in the filtered collection" stage="Antal" />
      <output type="collection" name="Collection Out" friendlyname="Collection Out" narrative="The filtered collection" stage="Aktive forløb" />
    </outputs>
    <onsuccess>9b0d2e51-88a5-4783-85b8-713b12afa4a9</onsuccess>
    <resource object="Utility - Odk Linq" action="Filter" />
  </stage>
  <stage stageid="9b0d2e51-88a5-4783-85b8-713b12afa4a9" name="Findes det aktive forløb?" type="Decision">
    <subsheetid>69cd9e36-55ca-4ee4-beee-cd5dbdebe531</subsheetid>
    <loginhibit />
    <display x="15" y="540" />
    <decision expression="[Antal] = 1" />
    <ontrue>f3616596-9b8d-44eb-98ed-69222fc98f01</ontrue>
    <onfalse>6d546446-4807-492e-9b58-451584b4b0b1</onfalse>
  </stage>
  <stage stageid="6d546446-4807-492e-9b58-451584b4b0b1" name="Nexus - Core::Put (enroll)" type="Action">
    <subsheetid>69cd9e36-55ca-4ee4-beee-cd5dbdebe531</subsheetid>
    <loginhibit onsuccess="true" />
    <display x="135" y="540" />
    <inputs>
      <input type="text" name="Url" friendlyname="Url" expr="[Tilgængelige forløb._links.enroll]" />
      <input type="text" name="Body" friendlyname="Body" expr="&quot;&quot;" />
    </inputs>
    <outputs>
      <output type="collection" name="Data" friendlyname="Data" stage="Forløb" />
      <output type="number" name="Antal" friendlyname="Antal" stage="Antal" />
      <output type="text" name="Json" friendlyname="Json" narrative="Det rå json output" stage="" />
      <output type="number" name="Statuskode" friendlyname="Statuskode" narrative="Http statuskoden for kaldet" stage="" />
    </outputs>
    <onsuccess>e520084f-5044-45c6-9ff0-167e30a39185</onsuccess>
    <resource object="Nexus - Core" action="Put" />
  </stage>
  <stage stageid="e520084f-5044-45c6-9ff0-167e30a39185" name="Oprettet?" type="Decision">
    <subsheetid>69cd9e36-55ca-4ee4-beee-cd5dbdebe531</subsheetid>
    <loginhibit />
    <display x="210" y="540" />
    <decision expression="[Antal] = 1" />
    <ontrue>be86b446-f761-4e2b-aaed-be2a18a66472</ontrue>
    <onfalse>2e90d1cc-a7f3-44d5-925c-1406a24b3b67</onfalse>
  </stage>
  <stage stageid="2e90d1cc-a7f3-44d5-925c-1406a24b3b67" name="Ingen sti" type="Exception">
    <subsheetid>69cd9e36-55ca-4ee4-beee-cd5dbdebe531</subsheetid>
    <display x="375" y="540" />
    <exception localized="yes" type="Business Exception" detail="[Forløb (navn)] &amp; &quot; kunne ikke oprettes&quot;" />
  </stage>
  <stage stageid="1e894b4f-ca4d-48dc-bf4a-9ef584dc3983" name="Tilføj forløb" type="Block">
    <subsheetid>69cd9e36-55ca-4ee4-beee-cd5dbdebe531</subsheetid>
    <loginhibit />
    <display x="-90" y="240" w="390" h="375" />
    <font family="Segoe UI" size="10" style="Regular" color="7FB2E5" />
  </stage>
  <stage stageid="75ea39a1-c6e1-4480-80e3-9b15ac68f8c7" name="Forløb (navn)" type="Data">
    <subsheetid>69cd9e36-55ca-4ee4-beee-cd5dbdebe531</subsheetid>
    <display x="-195" y="75" w="120" h="30" />
    <datatype>text</datatype>
    <initialvalue />
    <private />
    <alwaysinit />
  </stage>
  <stage stageid="3b4aae6b-8f0c-4a7d-b1de-a58a52adc05b" name="Grundforløb (navn)" type="Data">
    <subsheetid>69cd9e36-55ca-4ee4-beee-cd5dbdebe531</subsheetid>
    <display x="-195" y="30" w="120" h="30" />
    <datatype>text</datatype>
    <initialvalue />
    <private />
    <alwaysinit />
  </stage>
  <stage stageid="95a93361-e08d-40d3-9dc4-df647ac81471" name="Sæt debug" type="MultipleCalculation">
    <subsheetid>69cd9e36-55ca-4ee4-beee-cd5dbdebe531</subsheetid>
    <loginhibit />
    <display x="135" y="-105" />
    <onsuccess>7345f945-cb05-49db-b2e4-c382a7e89616</onsuccess>
    <steps>
      <calculation expression="&quot;Sundhedsfagligt grundforløb&quot;" stage="Grundforløb (navn)" />
      <calculation expression="&quot;Demensforløb&quot;" stage="Forløb (navn)" />
    </steps>
  </stage>
  <stage stageid="7291b2a1-2af9-4148-80cc-1307724a0fb0" name="Intet forløb?" type="Decision">
    <subsheetid>69cd9e36-55ca-4ee4-beee-cd5dbdebe531</subsheetid>
    <loginhibit />
    <display x="15" y="270" />
    <decision expression="[Forløb (navn)] = &quot;&quot;" />
    <ontrue>4b2d0b42-5aa6-415d-a5e6-460f11a49dfc</ontrue>
    <onfalse>e3377afc-7ac9-45ce-95cb-8e982caf7449</onfalse>
  </stage>
  <stage stageid="4b2d0b42-5aa6-415d-a5e6-460f11a49dfc" name="End2" type="End">
    <subsheetid>69cd9e36-55ca-4ee4-beee-cd5dbdebe531</subsheetid>
    <loginhibit />
    <display x="375" y="270" />
    <outputs>
      <output type="collection" name="Grundforløb" stage="Grundforløb" />
      <output type="collection" name="Forløb" stage="Forløb" />
    </outputs>
  </stage>
  <stage stageid="be86b446-f761-4e2b-aaed-be2a18a66472" name="Anchor9" type="Anchor">
    <subsheetid>69cd9e36-55ca-4ee4-beee-cd5dbdebe531</subsheetid>
    <loginhibit />
    <display x="210" y="645" w="10" h="10" />
    <onsuccess>2b097fb9-f791-4323-948f-f5539941310a</onsuccess>
  </stage>
  <stage stageid="f3616596-9b8d-44eb-98ed-69222fc98f01" name="Sæt forløb" type="Calculation">
    <subsheetid>69cd9e36-55ca-4ee4-beee-cd5dbdebe531</subsheetid>
    <loginhibit />
    <display x="15" y="585" />
    <onsuccess>2b097fb9-f791-4323-948f-f5539941310a</onsuccess>
    <calculation expression="[Aktive forløb]" stage="Forløb" />
  </stage>
  <stage stageid="cd5ccc1f-98d3-4018-839f-4fe321e40147" name="Hent pathway" type="SubSheetInfo">
    <subsheetid>ee9739d7-5eaa-493a-9ce1-f18ffd4b92fa</subsheetid>
    <display x="-195" y="-105" w="150" h="90" />
  </stage>
  <stage stageid="d91c63ce-7518-469b-b930-4da3bbbf14e7" name="Start" type="Start">
    <subsheetid>ee9739d7-5eaa-493a-9ce1-f18ffd4b92fa</subsheetid>
    <loginhibit />
    <display x="15" y="-105" />
    <inputs>
      <input type="collection" name="Borger" stage="Borger" />
      <input type="text" name="Pathway" narrative="Default &quot;-Alt&quot;" stage="Pathway navn" />
    </inputs>
    <onsuccess>f08edb49-c8d3-4909-839b-a7b0a87303f1</onsuccess>
  </stage>
  <stage stageid="f3829399-66ca-4727-98e2-274e17fb958b" name="End" type="End">
    <subsheetid>ee9739d7-5eaa-493a-9ce1-f18ffd4b92fa</subsheetid>
    <loginhibit />
    <display x="15" y="525" />
    <outputs>
      <output type="collection" name="Pathway" stage="Pathway" />
      <output type="collection" name="Referencer" stage="Referencer" />
      <output type="text" name="Referencer (json)" narrative="Referencer som rå json" stage="Referencer (json)" />
      <output type="number" name="Antal referencer" stage="Antal referencer" />
      <output type="collection" name="Aktiviteter" stage="Aktiviteter" />
      <output type="number" name="Antal aktiviteter" stage="Antal aktiviteter" />
    </outputs>
  </stage>
  <stage stageid="6fa4c48b-6972-4d1a-8c19-19707637ba11" name="Input" type="Block">
    <subsheetid>ee9739d7-5eaa-493a-9ce1-f18ffd4b92fa</subsheetid>
    <display x="-270" y="-45" w="150" h="105" />
    <font family="Segoe UI" size="10" style="Regular" color="339966" />
  </stage>
  <stage stageid="34ad3567-a9f9-4b06-a8e7-d6dc1b3b5767" name="Variabler" type="Block">
    <subsheetid>ee9739d7-5eaa-493a-9ce1-f18ffd4b92fa</subsheetid>
    <display x="-270" y="135" w="150" h="150" />
    <font family="Segoe UI" size="10" style="Regular" color="666699" />
  </stage>
  <stage stageid="3125bae6-d691-4696-8494-3e4a9d3d02d2" name="Konstanter" type="Block">
    <subsheetid>ee9739d7-5eaa-493a-9ce1-f18ffd4b92fa</subsheetid>
    <display x="-270" y="75" w="150" h="45" />
    <font family="Segoe UI" size="10" style="Regular" color="008080" />
  </stage>
  <stage stageid="da9d0199-a6fa-4b92-8dee-7e2b7909f53c" name="Output" type="Block">
    <subsheetid>ee9739d7-5eaa-493a-9ce1-f18ffd4b92fa</subsheetid>
    <display x="-270" y="300" w="150" h="285" />
    <font family="Segoe UI" size="10" style="Regular" color="800080" />
  </stage>
  <stage stageid="f23ab80e-5183-472f-b21d-6a91fb494ceb" name="Borger" type="Collection">
    <subsheetid>ee9739d7-5eaa-493a-9ce1-f18ffd4b92fa</subsheetid>
    <display x="-195" y="-15" w="120" h="30" />
    <datatype>collection</datatype>
    <private />
    <alwaysinit />
  </stage>
  <stage stageid="538af480-d234-4b5d-bce5-9164517d845f" name="Nexus - Core::Start" type="Action">
    <subsheetid>ee9739d7-5eaa-493a-9ce1-f18ffd4b92fa</subsheetid>
    <loginhibit onsuccess="true" />
    <display x="135" y="-180" />
    <inputs>
      <input type="text" name="Credentials" friendlyname="Credentials" expr="&quot;KMD Nexus - odensedev&quot;" />
    </inputs>
    <onsuccess>bc1ea09d-96d6-46d7-832a-a0378d9dcf4c</onsuccess>
    <resource object="Nexus - Core" action="Start" />
  </stage>
  <stage stageid="24d2025b-ad54-4a19-b336-5141e6bcac83" name="Debug" type="Block">
    <subsheetid>ee9739d7-5eaa-493a-9ce1-f18ffd4b92fa</subsheetid>
    <loginhibit />
    <display x="90" y="-210" w="90" h="105" />
    <font family="Segoe UI" size="10" style="Regular" color="FFFF99" />
  </stage>
  <stage stageid="bc1ea09d-96d6-46d7-832a-a0378d9dcf4c" name="Hent borger" type="SubSheet">
    <subsheetid>ee9739d7-5eaa-493a-9ce1-f18ffd4b92fa</subsheetid>
    <loginhibit />
    <display x="135" y="-135" />
    <inputs>
      <input type="text" name="Cpr" friendlyname="Cpr" expr="&quot;xxxxxxxxxx&quot;" />
    </inputs>
    <outputs>
      <output type="collection" name="Borger" friendlyname="Borger" stage="Borger" />
    </outputs>
    <onsuccess>bd13d017-5691-4b25-a190-2f9bfdf76f89</onsuccess>
    <processid>d5cc0f3c-1d67-4f5b-a83a-08a4b9574114</processid>
  </stage>
  <stage stageid="f08edb49-c8d3-4909-839b-a7b0a87303f1" name="Anchor3" type="Anchor">
    <subsheetid>ee9739d7-5eaa-493a-9ce1-f18ffd4b92fa</subsheetid>
    <loginhibit />
    <display x="15" y="-75" w="10" h="10" />
    <onsuccess>67c0ac7c-c1a3-44e8-8bcf-96714378c520</onsuccess>
  </stage>
  <stage stageid="bd13d017-5691-4b25-a190-2f9bfdf76f89" name="Anchor4" type="Anchor">
    <subsheetid>ee9739d7-5eaa-493a-9ce1-f18ffd4b92fa</subsheetid>
    <loginhibit />
    <display x="135" y="-75" w="10" h="10" />
    <onsuccess>f08edb49-c8d3-4909-839b-a7b0a87303f1</onsuccess>
  </stage>
  <stage stageid="a97b6e0b-acd6-4b8b-a57e-d9dcec9025e5" name="Hent præferencer" type="Block">
    <subsheetid>ee9739d7-5eaa-493a-9ce1-f18ffd4b92fa</subsheetid>
    <loginhibit />
    <display x="-90" y="-60" w="315" h="195" />
    <font family="Segoe UI" size="10" style="Regular" color="7FB2E5" />
  </stage>
  <stage stageid="67c0ac7c-c1a3-44e8-8bcf-96714378c520" name="Nexus - Core::Get" type="Action">
    <subsheetid>ee9739d7-5eaa-493a-9ce1-f18ffd4b92fa</subsheetid>
    <loginhibit onsuccess="true" />
    <display x="15" y="-30" />
    <inputs>
      <input type="text" name="Url" friendlyname="Url" expr="[Borger._links.patientPreferences]" />
    </inputs>
    <outputs>
      <output type="collection" name="Data" friendlyname="Data" stage="Preferences" />
      <output type="number" name="Antal" friendlyname="Antal" stage="" />
      <output type="text" name="Json" friendlyname="Json" narrative="Det rå json output" stage="" />
      <output type="number" name="Statuskode" friendlyname="Statuskode" narrative="Http statuskoden for kaldet" stage="" />
    </outputs>
    <onsuccess>5b339582-2799-41db-a7fc-2af17d1132e6</onsuccess>
    <resource object="Nexus - Core" action="Get" />
  </stage>
  <stage stageid="05ad4be0-6fc7-4036-886b-7daef2edefff" name="Pathway" type="Collection">
    <subsheetid>ee9739d7-5eaa-493a-9ce1-f18ffd4b92fa</subsheetid>
    <display x="-195" y="330" w="120" h="30" />
    <datatype>collection</datatype>
    <private />
    <alwaysinit />
  </stage>
  <stage stageid="7fe7e8b4-61f0-4cb2-95a6-1a445e1dc3b0" name="Antal referencer" type="Data">
    <subsheetid>ee9739d7-5eaa-493a-9ce1-f18ffd4b92fa</subsheetid>
    <display x="-195" y="465" w="120" h="30" />
    <datatype>number</datatype>
    <initialvalue />
    <private />
    <alwaysinit />
  </stage>
  <stage stageid="76fe92a1-5efc-4078-bd78-d442828f6aeb" name="Preferences" type="Collection">
    <subsheetid>ee9739d7-5eaa-493a-9ce1-f18ffd4b92fa</subsheetid>
    <display x="-195" y="165" w="120" h="30" />
    <datatype>collection</datatype>
    <private />
    <alwaysinit />
  </stage>
  <stage stageid="38bd64fc-e71e-4743-9c92-fd8a7f31cf26" name="Pathway navn" type="Data">
    <subsheetid>ee9739d7-5eaa-493a-9ce1-f18ffd4b92fa</subsheetid>
    <display x="-195" y="30" w="120" h="30" />
    <datatype>text</datatype>
    <initialvalue xml:space="preserve">-Alt</initialvalue>
    <private />
    <alwaysinit />
  </stage>
  <stage stageid="5b339582-2799-41db-a7fc-2af17d1132e6" name="Filter pathway" type="Action">
    <subsheetid>ee9739d7-5eaa-493a-9ce1-f18ffd4b92fa</subsheetid>
    <loginhibit onsuccess="true" />
    <display x="15" y="15" />
    <inputs>
      <input type="collection" name="Collection In" friendlyname="Collection In" narrative="Input collection" expr="[Preferences.CITIZEN_PATHWAY]" />
      <input type="text" name="Filter" friendlyname="Filter" narrative="The filter to apply" expr="&quot;[name]='&quot; &amp; [Pathway navn] &amp; &quot;'&quot;" />
    </inputs>
    <outputs>
      <output type="number" name="Count" friendlyname="Count" narrative="The amount of rows in the filtered collection" stage="Antal" />
      <output type="collection" name="Collection Out" friendlyname="Collection Out" narrative="The filtered collection" stage="Pathway" />
    </outputs>
    <onsuccess>a5fe9ba6-73b7-4ce4-8bcd-d578606433e9</onsuccess>
    <resource object="Utility - Odk Linq" action="Filter" />
  </stage>
  <stage stageid="a5fe9ba6-73b7-4ce4-8bcd-d578606433e9" name="Fik vi vores pathway?" type="Decision">
    <subsheetid>ee9739d7-5eaa-493a-9ce1-f18ffd4b92fa</subsheetid>
    <loginhibit />
    <display x="15" y="60" />
    <decision expression="[Antal] = 1" />
    <ontrue>99c0771a-281d-4170-9494-8401e07e4d81</ontrue>
    <onfalse>f224bd9e-7e6e-4503-88a2-0e0e0a006932</onfalse>
  </stage>
  <stage stageid="99c0771a-281d-4170-9494-8401e07e4d81" name="Nexus - Core::Get (self)" type="Action">
    <subsheetid>ee9739d7-5eaa-493a-9ce1-f18ffd4b92fa</subsheetid>
    <loginhibit onsuccess="true" />
    <display x="15" y="105" />
    <inputs>
      <input type="text" name="Url" friendlyname="Url" expr="[Pathway._links.self]" />
    </inputs>
    <outputs>
      <output type="collection" name="Data" friendlyname="Data" stage="Pathway" />
      <output type="number" name="Antal" friendlyname="Antal" stage="" />
      <output type="text" name="Json" friendlyname="Json" narrative="Det rå json output" stage="" />
      <output type="number" name="Statuskode" friendlyname="Statuskode" narrative="Http statuskoden for kaldet" stage="" />
    </outputs>
    <onsuccess>c0513489-7ecd-4e1b-b3e7-4fdcd507a7a4</onsuccess>
    <resource object="Nexus - Core" action="Get" />
  </stage>
  <stage stageid="f224bd9e-7e6e-4503-88a2-0e0e0a006932" name="Ingen pathway" type="Exception">
    <subsheetid>ee9739d7-5eaa-493a-9ce1-f18ffd4b92fa</subsheetid>
    <display x="270" y="60" />
    <exception localized="yes" type="Business Exception" detail="[Pathway navn] &amp; &quot; blev ikke fundet på borgeren&quot;" />
  </stage>
  <stage stageid="63e23e4e-7122-48af-906f-531212582906" name="Hent referencer" type="Block">
    <subsheetid>ee9739d7-5eaa-493a-9ce1-f18ffd4b92fa</subsheetid>
    <loginhibit />
    <display x="-90" y="150" w="315" h="165" />
    <font family="Segoe UI" size="10" style="Regular" color="7FB2E5" />
  </stage>
  <stage stageid="d3b1bf28-4670-49cb-a7a4-756b8695fdde" name="Nexus - Core::Get (references)" type="Action">
    <subsheetid>ee9739d7-5eaa-493a-9ce1-f18ffd4b92fa</subsheetid>
    <loginhibit onsuccess="true" />
    <display x="15" y="270" />
    <inputs>
      <input type="text" name="Url" friendlyname="Url" expr="[Pathway._links.pathwayReferences]" />
    </inputs>
    <outputs>
      <output type="collection" name="Data" friendlyname="Data" stage="Referencer" />
      <output type="number" name="Antal" friendlyname="Antal" stage="Antal referencer" />
      <output type="text" name="Json" friendlyname="Json" narrative="Det rå json output" stage="Referencer (json)" />
      <output type="number" name="Statuskode" friendlyname="Statuskode" narrative="Http statuskoden for kaldet" stage="" />
    </outputs>
    <onsuccess>13f96962-0776-4f91-87c8-6fc563958b9d</onsuccess>
    <resource object="Nexus - Core" action="Get" />
  </stage>
  <stage stageid="3bc8f094-beb2-4f8d-a917-74ec78027bc6" name="Referencer" type="Collection">
    <subsheetid>ee9739d7-5eaa-493a-9ce1-f18ffd4b92fa</subsheetid>
    <display x="-195" y="375" w="120" h="30" />
    <datatype>collection</datatype>
    <private />
    <alwaysinit />
  </stage>
  <stage stageid="14266a80-ca4e-443b-a5d9-02b310986ce8" name="Referencer (json)" type="Data">
    <subsheetid>ee9739d7-5eaa-493a-9ce1-f18ffd4b92fa</subsheetid>
    <display x="-195" y="420" w="120" h="30" />
    <datatype>text</datatype>
    <initialvalue />
    <private />
    <alwaysinit />
  </stage>
  <stage stageid="c0513489-7ecd-4e1b-b3e7-4fdcd507a7a4" name="Har denne pathway referencer?" type="Action">
    <subsheetid>ee9739d7-5eaa-493a-9ce1-f18ffd4b92fa</subsheetid>
    <loginhibit onsuccess="true" />
    <display x="15" y="180" />
    <inputs>
      <input type="collection" name="Input Collection" friendlyname="Input Collection" narrative="The collection to check." expr="[Pathway._links]" />
      <input type="text" name="Field" friendlyname="Field" narrative="The field to check for." expr="&quot;pathwayReferences&quot;" />
    </inputs>
    <outputs>
      <output type="flag" name="Exists" friendlyname="Exists" narrative="True if the collection contains the field." stage="Felt?" />
    </outputs>
    <onsuccess>ac1a6593-af84-4717-b392-94140409168b</onsuccess>
    <resource object="Utility - Collection Manipulation" action="Field Exists" />
  </stage>
  <stage stageid="04c6e75c-068e-4229-9c01-1f4a9ea252dd" name="Felt?" type="Data">
    <subsheetid>ee9739d7-5eaa-493a-9ce1-f18ffd4b92fa</subsheetid>
    <display x="-195" y="210" w="120" h="30" />
    <datatype>flag</datatype>
    <initialvalue />
    <private />
    <alwaysinit />
  </stage>
  <stage stageid="ac1a6593-af84-4717-b392-94140409168b" name="Referencer?" type="Decision">
    <subsheetid>ee9739d7-5eaa-493a-9ce1-f18ffd4b92fa</subsheetid>
    <loginhibit />
    <display x="15" y="225" />
    <decision expression="[Felt?]" />
    <ontrue>d3b1bf28-4670-49cb-a7a4-756b8695fdde</ontrue>
    <onfalse>6a5e61cb-8691-4583-8078-ec6db361f834</onfalse>
  </stage>
  <stage stageid="13f96962-0776-4f91-87c8-6fc563958b9d" name="Anchor6" type="Anchor">
    <subsheetid>ee9739d7-5eaa-493a-9ce1-f18ffd4b92fa</subsheetid>
    <loginhibit />
    <display x="15" y="300" w="10" h="10" />
    <onsuccess>20faa708-b90b-4915-8e40-f98ee20c7aed</onsuccess>
  </stage>
  <stage stageid="6b45199c-1208-42d4-b631-48306c71f1c0" name="Anchor8" type="Anchor">
    <subsheetid>ee9739d7-5eaa-493a-9ce1-f18ffd4b92fa</subsheetid>
    <loginhibit />
    <display x="105" y="300" w="10" h="10" />
    <onsuccess>13f96962-0776-4f91-87c8-6fc563958b9d</onsuccess>
  </stage>
  <stage stageid="6a5e61cb-8691-4583-8078-ec6db361f834" name="Antal = 0" type="Calculation">
    <subsheetid>ee9739d7-5eaa-493a-9ce1-f18ffd4b92fa</subsheetid>
    <loginhibit />
    <display x="105" y="225" />
    <onsuccess>6b45199c-1208-42d4-b631-48306c71f1c0</onsuccess>
    <calculation expression="0" stage="Antal" />
  </stage>
  <stage stageid="c5a5a447-9bec-40f7-b31a-eea6b6e47180" name="Hent SOR kontakter" type="SubSheetInfo">
    <subsheetid>d720b969-ebb8-4277-8f01-55a64200e7f5</subsheetid>
    <display x="-195" y="-105" w="150" h="90" />
  </stage>
  <stage stageid="6f524d6c-25ce-470d-a45c-f67478495b7f" name="End" type="End">
    <subsheetid>d720b969-ebb8-4277-8f01-55a64200e7f5</subsheetid>
    <loginhibit />
    <display x="-30" y="90" />
    <outputs>
      <output type="collection" name="SOR Kontakter" stage="SOR Kontakter" />
      <output type="number" name="Antal" stage="Antal" />
    </outputs>
  </stage>
  <stage stageid="a2a93a5f-5098-4d12-ab1e-d49b902767ec" name="Start" type="Start">
    <subsheetid>d720b969-ebb8-4277-8f01-55a64200e7f5</subsheetid>
    <loginhibit />
    <display x="-30" y="-105" />
    <inputs>
      <input type="collection" name="Borger" stage="Borger" />
    </inputs>
    <onsuccess>96cb7d4a-44d0-4008-b828-316622957c18</onsuccess>
  </stage>
  <stage stageid="8cfc7a51-4edf-4446-aeb0-06deaaa3f7d7" name="Nexus - Core::Start" type="Action">
    <subsheetid>d720b969-ebb8-4277-8f01-55a64200e7f5</subsheetid>
    <loginhibit onsuccess="true" />
    <display x="150" y="-210" />
    <inputs>
      <input type="text" name="Credentials" friendlyname="Credentials" expr="&quot;KMD Nexus - produktion&quot;" />
    </inputs>
    <onsuccess>90e64ae1-7844-4b44-853f-36ef6152a681</onsuccess>
    <resource object="Nexus - Core" action="Start" />
  </stage>
  <stage stageid="4b7a79f4-7e42-46ad-a06d-b65b46609a43" name="Debug" type="Block">
    <subsheetid>d720b969-ebb8-4277-8f01-55a64200e7f5</subsheetid>
    <loginhibit />
    <display x="90" y="-240" w="120" h="150" />
    <font family="Segoe UI" size="10" style="Regular" color="FFFF99" />
  </stage>
  <stage stageid="90e64ae1-7844-4b44-853f-36ef6152a681" name="Hent borger" type="Action">
    <subsheetid>d720b969-ebb8-4277-8f01-55a64200e7f5</subsheetid>
    <loginhibit onsuccess="true" />
    <display x="150" y="-165" />
    <inputs>
      <input type="text" name="Cpr" friendlyname="Cpr" expr="&quot;xxxxxxxxxx&quot;" />
    </inputs>
    <outputs>
      <output type="collection" name="Borger" friendlyname="Borger" stage="Borger" />
    </outputs>
    <onsuccess>11688210-83d6-4f97-bcb6-675752eb3d74</onsuccess>
    <resource object="Nexus - Borgere og forløb" action="Hent borger" />
  </stage>
  <stage stageid="11688210-83d6-4f97-bcb6-675752eb3d74" name="Anchor4" type="Anchor">
    <subsheetid>d720b969-ebb8-4277-8f01-55a64200e7f5</subsheetid>
    <loginhibit />
    <display x="150" y="-75" w="10" h="10" />
    <onsuccess>96cb7d4a-44d0-4008-b828-316622957c18</onsuccess>
  </stage>
  <stage stageid="96cb7d4a-44d0-4008-b828-316622957c18" name="Anchor5" type="Anchor">
    <subsheetid>d720b969-ebb8-4277-8f01-55a64200e7f5</subsheetid>
    <loginhibit />
    <display x="-30" y="-75" w="10" h="10" />
    <onsuccess>3f017266-b284-466d-8a0e-85c21f2658c2</onsuccess>
  </stage>
  <stage stageid="99058597-fe02-41cd-9d35-52f4b3d3c1ad" name="Input" type="Block">
    <subsheetid>d720b969-ebb8-4277-8f01-55a64200e7f5</subsheetid>
    <display x="-270" y="-45" w="150" h="60" />
    <font family="Segoe UI" size="10" style="Regular" color="339966" />
  </stage>
  <stage stageid="75474ef9-a877-4451-963c-4a2f3c3c4bbb" name="Variabler" type="Block">
    <subsheetid>d720b969-ebb8-4277-8f01-55a64200e7f5</subsheetid>
    <display x="-270" y="90" w="150" h="60" />
    <font family="Segoe UI" size="10" style="Regular" color="666699" />
  </stage>
  <stage stageid="a49b0bc3-e11d-4429-9a8a-73f87890624c" name="Konstanter" type="Block">
    <subsheetid>d720b969-ebb8-4277-8f01-55a64200e7f5</subsheetid>
    <display x="-270" y="30" w="150" h="45" />
    <font family="Segoe UI" size="10" style="Regular" color="008080" />
  </stage>
  <stage stageid="692e016e-40c2-4cd1-aa3e-f205dd949821" name="Output" type="Block">
    <subsheetid>d720b969-ebb8-4277-8f01-55a64200e7f5</subsheetid>
    <display x="-270" y="165" w="150" h="105" />
    <font family="Segoe UI" size="10" style="Regular" color="800080" />
  </stage>
  <stage stageid="762be2ca-1c65-4747-b285-c756be4f9676" name="Borger" type="Collection">
    <subsheetid>d720b969-ebb8-4277-8f01-55a64200e7f5</subsheetid>
    <display x="-195" y="-15" w="120" h="30" />
    <datatype>collection</datatype>
    <private />
    <alwaysinit />
  </stage>
  <stage stageid="3f017266-b284-466d-8a0e-85c21f2658c2" name="Hent pathway" type="Action">
    <subsheetid>d720b969-ebb8-4277-8f01-55a64200e7f5</subsheetid>
    <loginhibit onsuccess="true" />
    <display x="-30" y="-15" />
    <inputs>
      <input type="collection" name="Borger" friendlyname="Borger" expr="[Borger]" />
      <input type="text" name="Pathway" friendlyname="Pathway" narrative="Default &quot;-Alt&quot;" expr="&quot;SOR Kontakter&quot;" />
    </inputs>
    <outputs>
      <output type="collection" name="Pathway" friendlyname="Pathway" stage="Pathway" />
      <output type="collection" name="Referencer" friendlyname="Referencer" stage="" />
      <output type="text" name="Referencer (json)" friendlyname="Referencer (json)" narrative="Referencer som rå json" stage="" />
      <output type="number" name="Antal" friendlyname="Antal" stage="Antal" />
    </outputs>
    <onsuccess>c09fe45f-da2b-4ad7-9d60-9f0a2ae5e3e8</onsuccess>
    <resource object="Nexus - Borgere og forløb" action="Hent pathway" />
  </stage>
  <stage stageid="6550dceb-1e60-4577-bbb8-1ce03dfcf217" name="Antal" type="Data">
    <subsheetid>d720b969-ebb8-4277-8f01-55a64200e7f5</subsheetid>
    <display x="-195" y="240" w="120" h="30" />
    <datatype>number</datatype>
    <initialvalue />
    <private />
    <alwaysinit />
  </stage>
  <stage stageid="f86ecd82-87fc-4a55-847f-7d4261fb3f42" name="Pathway" type="Collection">
    <subsheetid>d720b969-ebb8-4277-8f01-55a64200e7f5</subsheetid>
    <display x="-195" y="120" w="120" h="30" />
    <datatype>collection</datatype>
    <private />
    <alwaysinit />
  </stage>
  <stage stageid="c09fe45f-da2b-4ad7-9d60-9f0a2ae5e3e8" name="Hent SOR kontakter" type="Action">
    <subsheetid>d720b969-ebb8-4277-8f01-55a64200e7f5</subsheetid>
    <loginhibit onsuccess="true" />
    <display x="-30" y="30" />
    <inputs>
      <input type="text" name="Url" friendlyname="Url" expr="[Pathway._links.patientActivities]" />
    </inputs>
    <outputs>
      <output type="collection" name="Data" friendlyname="Data" stage="SOR Kontakter" />
      <output type="number" name="Antal" friendlyname="Antal" stage="Antal" />
      <output type="text" name="Json" friendlyname="Json" narrative="Det rå json output" stage="" />
      <output type="number" name="Statuskode" friendlyname="Statuskode" narrative="Http statuskoden for kaldet" stage="" />
    </outputs>
    <onsuccess>6f524d6c-25ce-470d-a45c-f67478495b7f</onsuccess>
    <resource object="Nexus - Core" action="Get" />
  </stage>
  <stage stageid="fc9182a6-11e4-425f-91df-71e9708c91ad" name="SOR Kontakter" type="Collection">
    <subsheetid>d720b969-ebb8-4277-8f01-55a64200e7f5</subsheetid>
    <display x="-195" y="195" w="120" h="30" />
    <datatype>collection</datatype>
    <private />
    <alwaysinit />
  </stage>
  <stage stageid="fd4f6925-9cf4-4d95-abea-f6558bdd64a1" name="Hent SOR via pathway filter" type="Block">
    <subsheetid>d720b969-ebb8-4277-8f01-55a64200e7f5</subsheetid>
    <loginhibit />
    <display x="-90" y="-60" w="165" h="120" />
    <font family="Segoe UI" size="10" style="Regular" color="7FB2E5" />
  </stage>
  <stage stageid="e833aea9-7266-4689-bcda-e367f9868b47" name="Tilknyt SOR kontakt" type="SubSheetInfo">
    <subsheetid>4be1d5ff-8fff-4e7c-a6f1-a1ba1376ac6e</subsheetid>
    <display x="-195" y="-105" w="150" h="90" />
  </stage>
  <stage stageid="c9222be7-bc69-47df-9df6-4142a6073a75" name="Start" type="Start">
    <subsheetid>4be1d5ff-8fff-4e7c-a6f1-a1ba1376ac6e</subsheetid>
    <loginhibit />
    <display x="15" y="-135" />
    <inputs>
      <input type="collection" name="SOR kontakt" stage="SOR kontakt" />
    </inputs>
    <onsuccess>58ea5d3c-cfd9-43a4-9dce-276f92237526</onsuccess>
  </stage>
  <stage stageid="ac59c7a6-98b3-4273-88f0-9bd8e9187adf" name="End" type="End">
    <subsheetid>4be1d5ff-8fff-4e7c-a6f1-a1ba1376ac6e</subsheetid>
    <loginhibit />
    <display x="15" y="45" />
    <outputs>
      <output type="collection" name="Kontakt" stage="Kontakt" />
    </outputs>
  </stage>
  <stage stageid="2fe77ad0-4b3b-44ab-9551-3505824c5da7" name="Input" type="Block">
    <subsheetid>4be1d5ff-8fff-4e7c-a6f1-a1ba1376ac6e</subsheetid>
    <display x="-270" y="-45" w="150" h="60" />
    <font family="Segoe UI" size="10" style="Regular" color="339966" />
  </stage>
  <stage stageid="55500fa1-1ce5-447f-84d7-f6e2ad7b1a7f" name="Variabler" type="Block">
    <subsheetid>4be1d5ff-8fff-4e7c-a6f1-a1ba1376ac6e</subsheetid>
    <display x="-270" y="90" w="150" h="60" />
    <font family="Segoe UI" size="10" style="Regular" color="666699" />
  </stage>
  <stage stageid="4274b961-d408-4624-a817-dfea31b17cec" name="Konstanter" type="Block">
    <subsheetid>4be1d5ff-8fff-4e7c-a6f1-a1ba1376ac6e</subsheetid>
    <display x="-270" y="30" w="150" h="45" />
    <font family="Segoe UI" size="10" style="Regular" color="008080" />
  </stage>
  <stage stageid="253aa0e3-0175-44e9-aa5e-4163ed941ed5" name="Output" type="Block">
    <subsheetid>4be1d5ff-8fff-4e7c-a6f1-a1ba1376ac6e</subsheetid>
    <display x="-270" y="165" w="150" h="60" />
    <font family="Segoe UI" size="10" style="Regular" color="800080" />
  </stage>
  <stage stageid="e742d461-6a3d-4367-9356-98b07db9f875" name="Nexus - Core::Start" type="Action">
    <subsheetid>4be1d5ff-8fff-4e7c-a6f1-a1ba1376ac6e</subsheetid>
    <loginhibit onsuccess="true" />
    <display x="150" y="-240" />
    <inputs>
      <input type="text" name="Credentials" friendlyname="Credentials" expr="&quot;KMD Nexus - odensedev&quot;" />
    </inputs>
    <onsuccess>4fe18446-1210-471a-a5a9-3f46f7addf18</onsuccess>
    <resource object="Nexus - Core" action="Start" />
  </stage>
  <stage stageid="c26ffad5-f7c9-4fe4-830c-ea017b619622" name="Debug" type="Block">
    <subsheetid>4be1d5ff-8fff-4e7c-a6f1-a1ba1376ac6e</subsheetid>
    <loginhibit />
    <display x="90" y="-270" w="180" h="150" />
    <font family="Segoe UI" size="10" style="Regular" color="FFFF99" />
  </stage>
  <stage stageid="4fe18446-1210-471a-a5a9-3f46f7addf18" name="Hent borger" type="Action">
    <subsheetid>4be1d5ff-8fff-4e7c-a6f1-a1ba1376ac6e</subsheetid>
    <loginhibit onsuccess="true" />
    <display x="150" y="-195" />
    <inputs>
      <input type="text" name="Cpr" friendlyname="Cpr" expr="&quot;xxxxxxxxxx&quot;" />
    </inputs>
    <outputs>
      <output type="collection" name="Borger" friendlyname="Borger" stage="Borger" />
    </outputs>
    <onsuccess>d27416d0-ab8a-46fb-911f-b1932b6a1c4e</onsuccess>
    <resource object="Nexus - Borgere og forløb" action="Hent borger" />
  </stage>
  <stage stageid="4f16a4e9-4c91-433b-8a3f-26c94c47f250" name="Anchor4" type="Anchor">
    <subsheetid>4be1d5ff-8fff-4e7c-a6f1-a1ba1376ac6e</subsheetid>
    <loginhibit />
    <display x="150" y="-105" w="10" h="10" />
    <onsuccess>58ea5d3c-cfd9-43a4-9dce-276f92237526</onsuccess>
  </stage>
  <stage stageid="58ea5d3c-cfd9-43a4-9dce-276f92237526" name="Anchor9" type="Anchor">
    <subsheetid>4be1d5ff-8fff-4e7c-a6f1-a1ba1376ac6e</subsheetid>
    <loginhibit />
    <display x="15" y="-105" w="10" h="10" />
    <onsuccess>71e784cf-8e5a-4b38-b3c4-f1ce4673f05f</onsuccess>
  </stage>
  <stage stageid="826d3125-8984-40b8-a361-fc2a6189e31a" name="Hent Pårørende" type="SubSheetInfo">
    <subsheetid>c6d555d6-ca2d-4c46-9722-f33f8e92664d</subsheetid>
    <display x="-195" y="-105" w="150" h="90" />
  </stage>
  <stage stageid="5944b01f-aa89-462d-b1a5-fabaad926397" name="Start" type="Start">
    <subsheetid>c6d555d6-ca2d-4c46-9722-f33f8e92664d</subsheetid>
    <loginhibit />
    <display x="15" y="-135" />
    <onsuccess>55e18251-a6de-429e-a19c-de23f963dc3e</onsuccess>
  </stage>
  <stage stageid="e0771915-f134-4023-b2b1-710a2496c916" name="End" type="End">
    <subsheetid>c6d555d6-ca2d-4c46-9722-f33f8e92664d</subsheetid>
    <loginhibit />
    <display x="15" y="45" />
  </stage>
  <stage stageid="53d4f9e9-a46a-4a82-bbdc-e2ba74127c96" name="Nexus - Core::Start" type="Action">
    <subsheetid>c6d555d6-ca2d-4c46-9722-f33f8e92664d</subsheetid>
    <loginhibit onsuccess="true" />
    <display x="180" y="-240" />
    <inputs>
      <input type="text" name="Credentials" friendlyname="Credentials" expr="&quot;KMD Nexus - produktion&quot;" />
    </inputs>
    <onsuccess>94bfb309-a4fe-4b39-9a2d-28742bd90d0a</onsuccess>
    <resource object="Nexus - Core" action="Start" />
  </stage>
  <stage stageid="c137b7cb-ee35-4349-bcf2-4af43977ab1b" name="Debug" type="Block">
    <subsheetid>c6d555d6-ca2d-4c46-9722-f33f8e92664d</subsheetid>
    <loginhibit />
    <display x="120" y="-270" w="120" h="105" />
    <font family="Segoe UI" size="10" style="Regular" color="FFFF99" />
  </stage>
  <stage stageid="94bfb309-a4fe-4b39-9a2d-28742bd90d0a" name="Hent borger" type="Action">
    <subsheetid>c6d555d6-ca2d-4c46-9722-f33f8e92664d</subsheetid>
    <loginhibit onsuccess="true" />
    <display x="180" y="-195" />
    <inputs>
      <input type="text" name="Cpr" friendlyname="Cpr" expr="&quot;xxxxxxxxxx&quot;" />
    </inputs>
    <outputs>
      <output type="collection" name="Borger" friendlyname="Borger" stage="Borger" />
    </outputs>
    <onsuccess>555a7799-834c-4cc0-a3aa-72e56f9eeb90</onsuccess>
    <resource object="Nexus - Borgere og forløb" action="Hent borger" />
  </stage>
  <stage stageid="555a7799-834c-4cc0-a3aa-72e56f9eeb90" name="Anchor4" type="Anchor">
    <subsheetid>c6d555d6-ca2d-4c46-9722-f33f8e92664d</subsheetid>
    <loginhibit />
    <display x="180" y="-90" w="10" h="10" />
    <onsuccess>55e18251-a6de-429e-a19c-de23f963dc3e</onsuccess>
  </stage>
  <stage stageid="1ec07b2a-5911-4559-b731-bc16f5d32de7" name="Input" type="Block">
    <subsheetid>c6d555d6-ca2d-4c46-9722-f33f8e92664d</subsheetid>
    <display x="-270" y="-45" w="150" h="60" />
    <font family="Segoe UI" size="10" style="Regular" color="339966" />
  </stage>
  <stage stageid="3efd9c18-f64c-4b10-b4fe-ca63b99439a9" name="Variabler" type="Block">
    <subsheetid>c6d555d6-ca2d-4c46-9722-f33f8e92664d</subsheetid>
    <display x="-270" y="90" w="150" h="60" />
    <font family="Segoe UI" size="10" style="Regular" color="666699" />
  </stage>
  <stage stageid="84f2a0f9-775b-481e-8604-954dac1c7436" name="Konstanter" type="Block">
    <subsheetid>c6d555d6-ca2d-4c46-9722-f33f8e92664d</subsheetid>
    <display x="-270" y="30" w="150" h="45" />
    <font family="Segoe UI" size="10" style="Regular" color="008080" />
  </stage>
  <stage stageid="0a2f4316-d183-4100-b19b-9cde539b6f95" name="Output" type="Block">
    <subsheetid>c6d555d6-ca2d-4c46-9722-f33f8e92664d</subsheetid>
    <display x="-270" y="165" w="150" h="105" />
    <font family="Segoe UI" size="10" style="Regular" color="800080" />
  </stage>
  <stage stageid="d804d862-29b5-4686-a8ff-1405d7322653" name="Borger" type="Collection">
    <subsheetid>c6d555d6-ca2d-4c46-9722-f33f8e92664d</subsheetid>
    <display x="-195" y="-15" w="120" h="30" />
    <datatype>collection</datatype>
    <private />
    <alwaysinit />
  </stage>
  <stage stageid="55e18251-a6de-429e-a19c-de23f963dc3e" name="Anchor8" type="Anchor">
    <subsheetid>c6d555d6-ca2d-4c46-9722-f33f8e92664d</subsheetid>
    <loginhibit />
    <display x="15" y="-90" w="10" h="10" />
    <onsuccess>ee5afa24-3da8-44b9-9ebc-c5a2e3175efb</onsuccess>
  </stage>
  <stage stageid="ee5afa24-3da8-44b9-9ebc-c5a2e3175efb" name="Hent pathway" type="Action">
    <subsheetid>c6d555d6-ca2d-4c46-9722-f33f8e92664d</subsheetid>
    <loginhibit onsuccess="true" />
    <display x="15" y="-60" />
    <inputs>
      <input type="collection" name="Borger" friendlyname="Borger" expr="[Borger]" />
      <input type="text" name="Pathway" friendlyname="Pathway" narrative="Default &quot;-Alt&quot;" expr="&quot;Pårørende&quot;" />
    </inputs>
    <outputs>
      <output type="collection" name="Pathway" friendlyname="Pathway" stage="Pathway" />
      <output type="collection" name="Referencer" friendlyname="Referencer" stage="" />
      <output type="text" name="Referencer (json)" friendlyname="Referencer (json)" narrative="Referencer som rå json" stage="" />
      <output type="number" name="Antal" friendlyname="Antal" stage="" />
    </outputs>
    <onsuccess>520c756c-07a3-47af-a44b-1414dc427b80</onsuccess>
    <resource object="Nexus - Borgere og forløb" action="Hent pathway" />
  </stage>
  <stage stageid="322bb5b8-2658-4a8f-8f19-89074d9fed38" name="Pathway" type="Collection">
    <subsheetid>c6d555d6-ca2d-4c46-9722-f33f8e92664d</subsheetid>
    <display x="-195" y="120" w="120" h="30" />
    <datatype>collection</datatype>
    <private />
    <alwaysinit />
  </stage>
  <stage stageid="520c756c-07a3-47af-a44b-1414dc427b80" name="Hent Pårørende" type="Action">
    <subsheetid>c6d555d6-ca2d-4c46-9722-f33f8e92664d</subsheetid>
    <loginhibit onsuccess="true" />
    <display x="15" y="-15" />
    <inputs>
      <input type="text" name="Url" friendlyname="Url" expr="[Pathway._links.patientActivities]" />
    </inputs>
    <outputs>
      <output type="collection" name="Data" friendlyname="Data" stage="Pårørende" />
      <output type="number" name="Antal" friendlyname="Antal" stage="Antal" />
      <output type="text" name="Json" friendlyname="Json" narrative="Det rå json output" stage="" />
      <output type="number" name="Statuskode" friendlyname="Statuskode" narrative="Http statuskoden for kaldet" stage="" />
    </outputs>
    <onsuccess>e0771915-f134-4023-b2b1-710a2496c916</onsuccess>
    <resource object="Nexus - Core" action="Get" />
  </stage>
  <stage stageid="0d67bc9e-8acb-47be-9987-a8981d4616ef" name="Hent Pårørende via pathway filter" type="Block">
    <subsheetid>c6d555d6-ca2d-4c46-9722-f33f8e92664d</subsheetid>
    <loginhibit />
    <display x="-45" y="-105" w="180" h="120" />
    <font family="Segoe UI" size="10" style="Regular" color="7FB2E5" />
  </stage>
  <stage stageid="ab09563f-672c-4e27-b32b-de17d8657d69" name="Pårørende" type="Collection">
    <subsheetid>c6d555d6-ca2d-4c46-9722-f33f8e92664d</subsheetid>
    <display x="-195" y="195" w="120" h="30" />
    <datatype>collection</datatype>
    <private />
    <alwaysinit />
  </stage>
  <stage stageid="2aa8cc35-01cd-4529-830d-26a25e3edc63" name="Antal" type="Data">
    <subsheetid>c6d555d6-ca2d-4c46-9722-f33f8e92664d</subsheetid>
    <display x="-195" y="240" w="120" h="30" />
    <datatype>number</datatype>
    <initialvalue />
    <private />
    <alwaysinit />
  </stage>
  <stage stageid="d449a661-9275-47a0-8104-e174acbdb822" name="Søg efter SOR kontakt" type="SubSheetInfo">
    <subsheetid>e6e52703-e8f7-4ad7-9d6d-fefeb93f2dea</subsheetid>
    <display x="-195" y="-105" w="150" h="90" />
  </stage>
  <stage stageid="87dc359c-107f-4ce9-a16f-f5befc2072f8" name="End" type="End">
    <subsheetid>e6e52703-e8f7-4ad7-9d6d-fefeb93f2dea</subsheetid>
    <loginhibit />
    <display x="-30" y="90" />
    <outputs>
      <output type="collection" name="SOR Kontakter" stage="SOR Kontakter" />
      <output type="number" name="Antal" stage="Antal" />
    </outputs>
  </stage>
  <stage stageid="2882b738-c395-4656-adb2-72a4bb91025c" name="Start" type="Start">
    <subsheetid>e6e52703-e8f7-4ad7-9d6d-fefeb93f2dea</subsheetid>
    <loginhibit />
    <display x="-30" y="-105" />
    <inputs>
      <input type="collection" name="Borger" stage="Borger" />
      <input type="text" name="Søgning" stage="Søgning" />
    </inputs>
    <onsuccess>f4345646-0df9-4d56-9d4b-8b9c9f2a1be0</onsuccess>
  </stage>
  <stage stageid="e3ebcb89-3d7a-4ee4-af26-5b0b3522e3b8" name="Nexus - Core::Start" type="Action">
    <subsheetid>e6e52703-e8f7-4ad7-9d6d-fefeb93f2dea</subsheetid>
    <loginhibit onsuccess="true" />
    <display x="150" y="-210" />
    <inputs>
      <input type="text" name="Credentials" friendlyname="Credentials" expr="&quot;KMD Nexus - produktion&quot;" />
    </inputs>
    <onsuccess>37f0c447-ee7b-45e6-b7ae-a687f279050e</onsuccess>
    <resource object="Nexus - Core" action="Start" />
  </stage>
  <stage stageid="0fbe8294-fb2f-41d8-b34c-07c8fef1fde7" name="Debug" type="Block">
    <subsheetid>e6e52703-e8f7-4ad7-9d6d-fefeb93f2dea</subsheetid>
    <loginhibit />
    <display x="90" y="-240" w="120" h="150" />
    <font family="Segoe UI" size="10" style="Regular" color="FFFF99" />
  </stage>
  <stage stageid="37f0c447-ee7b-45e6-b7ae-a687f279050e" name="Hent borger" type="Action">
    <subsheetid>e6e52703-e8f7-4ad7-9d6d-fefeb93f2dea</subsheetid>
    <loginhibit onsuccess="true" />
    <display x="150" y="-165" />
    <inputs>
      <input type="text" name="Cpr" friendlyname="Cpr" expr="&quot;xxxxxxxxxx&quot;" />
    </inputs>
    <outputs>
      <output type="collection" name="Borger" friendlyname="Borger" stage="Borger" />
    </outputs>
    <onsuccess>1eb0fef0-3003-4163-9342-6beb97dd5acc</onsuccess>
    <resource object="Nexus - Borgere og forløb" action="Hent borger" />
  </stage>
  <stage stageid="9e8f178a-56e5-45d9-87bb-203981347ba9" name="Anchor4" type="Anchor">
    <subsheetid>e6e52703-e8f7-4ad7-9d6d-fefeb93f2dea</subsheetid>
    <loginhibit />
    <display x="150" y="-75" w="10" h="10" />
    <onsuccess>f4345646-0df9-4d56-9d4b-8b9c9f2a1be0</onsuccess>
  </stage>
  <stage stageid="f4345646-0df9-4d56-9d4b-8b9c9f2a1be0" name="Anchor5" type="Anchor">
    <subsheetid>e6e52703-e8f7-4ad7-9d6d-fefeb93f2dea</subsheetid>
    <loginhibit />
    <display x="-30" y="-75" w="10" h="10" />
    <onsuccess>35466059-51ea-4288-b12f-5a1b2baaa256</onsuccess>
  </stage>
  <stage stageid="b0a33260-49df-40e9-9cbe-a4898598c7bb" name="Input" type="Block">
    <subsheetid>e6e52703-e8f7-4ad7-9d6d-fefeb93f2dea</subsheetid>
    <display x="-270" y="-45" w="150" h="105" />
    <font family="Segoe UI" size="10" style="Regular" color="339966" />
  </stage>
  <stage stageid="a2e588b1-0073-498a-8458-91a28a24dac5" name="Variabler" type="Block">
    <subsheetid>e6e52703-e8f7-4ad7-9d6d-fefeb93f2dea</subsheetid>
    <display x="-270" y="150" w="150" h="60" />
    <font family="Segoe UI" size="10" style="Regular" color="666699" />
  </stage>
  <stage stageid="731f6f4b-b706-4032-9927-28180e23c882" name="Konstanter" type="Block">
    <subsheetid>e6e52703-e8f7-4ad7-9d6d-fefeb93f2dea</subsheetid>
    <display x="-270" y="90" w="150" h="45" />
    <font family="Segoe UI" size="10" style="Regular" color="008080" />
  </stage>
  <stage stageid="b9d61bdd-f460-4253-87e8-1bed9725bdda" name="Output" type="Block">
    <subsheetid>e6e52703-e8f7-4ad7-9d6d-fefeb93f2dea</subsheetid>
    <display x="-270" y="225" w="150" h="105" />
    <font family="Segoe UI" size="10" style="Regular" color="800080" />
  </stage>
  <stage stageid="8aa837f3-dc24-4836-ad30-45865c45115a" name="Borger" type="Collection">
    <subsheetid>e6e52703-e8f7-4ad7-9d6d-fefeb93f2dea</subsheetid>
    <display x="-195" y="-15" w="120" h="30" />
    <datatype>collection</datatype>
    <private />
    <alwaysinit />
  </stage>
  <stage stageid="105c07ec-bbbe-428d-b9fe-ecc6ffa0ccc1" name="Antal" type="Data">
    <subsheetid>e6e52703-e8f7-4ad7-9d6d-fefeb93f2dea</subsheetid>
    <display x="-195" y="300" w="120" h="30" />
    <datatype>number</datatype>
    <initialvalue />
    <private />
    <alwaysinit />
  </stage>
  <stage stageid="b7da47bf-42c5-4316-b1c7-04982413a2f5" name="Pathway" type="Collection">
    <subsheetid>e6e52703-e8f7-4ad7-9d6d-fefeb93f2dea</subsheetid>
    <display x="-195" y="180" w="120" h="30" />
    <datatype>collection</datatype>
    <private />
    <alwaysinit />
  </stage>
  <stage stageid="a7f2fd73-86da-4d10-835c-55a9cc1527a6" name="Hent SOR kontakter" type="Action">
    <subsheetid>e6e52703-e8f7-4ad7-9d6d-fefeb93f2dea</subsheetid>
    <loginhibit onsuccess="true" />
    <display x="-30" y="15" />
    <inputs>
      <input type="text" name="Url" friendlyname="Url" expr="[Borger._links.availableContacts] &amp; &quot;?query=&quot; &amp; [Søgning]" />
    </inputs>
    <outputs>
      <output type="collection" name="Data" friendlyname="Data" stage="SOR Kontakter" />
      <output type="number" name="Antal" friendlyname="Antal" stage="Antal" />
      <output type="text" name="Json" friendlyname="Json" narrative="Det rå json output" stage="" />
      <output type="number" name="Statuskode" friendlyname="Statuskode" narrative="Http statuskoden for kaldet" stage="" />
    </outputs>
    <onsuccess>87dc359c-107f-4ce9-a16f-f5befc2072f8</onsuccess>
    <resource object="Nexus - Core" action="Get" />
  </stage>
  <stage stageid="9b78ca90-b102-4beb-9863-8df2b8b5c4ed" name="SOR Kontakter" type="Collection">
    <subsheetid>e6e52703-e8f7-4ad7-9d6d-fefeb93f2dea</subsheetid>
    <display x="-195" y="255" w="120" h="30" />
    <datatype>collection</datatype>
    <private />
    <alwaysinit />
  </stage>
  <stage stageid="5ec46579-c1a1-45b5-914b-443da0c4e5c8" name="Søg efter SOR kontakter" type="Block">
    <subsheetid>e6e52703-e8f7-4ad7-9d6d-fefeb93f2dea</subsheetid>
    <loginhibit />
    <display x="-90" y="-60" w="165" h="105" />
    <font family="Segoe UI" size="10" style="Regular" color="7FB2E5" />
  </stage>
  <stage stageid="420980ca-88b4-4c53-b14b-08f2d836b782" name="Søgning" type="Data">
    <subsheetid>e6e52703-e8f7-4ad7-9d6d-fefeb93f2dea</subsheetid>
    <display x="-195" y="30" w="120" h="30" />
    <datatype>text</datatype>
    <initialvalue />
    <private />
    <alwaysinit />
  </stage>
  <stage stageid="35466059-51ea-4288-b12f-5a1b2baaa256" name="URL Encode" type="Action">
    <subsheetid>e6e52703-e8f7-4ad7-9d6d-fefeb93f2dea</subsheetid>
    <loginhibit onsuccess="true" />
    <display x="-30" y="-30" />
    <inputs>
      <input type="text" name="URL" friendlyname="URL" narrative="The URL to encode" expr="[Søgning]" />
    </inputs>
    <outputs>
      <output type="text" name="URL" friendlyname="URL" narrative="The encoded URL" stage="Søgning" />
    </outputs>
    <onsuccess>a7f2fd73-86da-4d10-835c-55a9cc1527a6</onsuccess>
    <resource object="Utility - HTTP" action="URL Encode" />
  </stage>
  <stage stageid="1eb0fef0-3003-4163-9342-6beb97dd5acc" name="Sæt søgning" type="Calculation">
    <subsheetid>e6e52703-e8f7-4ad7-9d6d-fefeb93f2dea</subsheetid>
    <loginhibit />
    <display x="150" y="-120" />
    <onsuccess>9e8f178a-56e5-45d9-87bb-203981347ba9</onsuccess>
    <calculation expression="&quot;Læge Claus&quot;" stage="Søgning" />
  </stage>
  <stage stageid="f21bef0f-3224-4d8d-a598-e565832bf0d2" name="SOR kontakt" type="Collection">
    <subsheetid>4be1d5ff-8fff-4e7c-a6f1-a1ba1376ac6e</subsheetid>
    <display x="-195" y="-15" w="120" h="30" />
    <datatype>collection</datatype>
    <private />
    <alwaysinit />
  </stage>
  <stage stageid="bb88a64f-48a4-40e4-af6e-f2d885952ef5" name="Tilføj kontakt" type="Block">
    <subsheetid>4be1d5ff-8fff-4e7c-a6f1-a1ba1376ac6e</subsheetid>
    <loginhibit />
    <display x="-75" y="-90" w="195" h="105" />
    <font family="Segoe UI" size="10" style="Regular" color="7FB2E5" />
  </stage>
  <stage stageid="71e784cf-8e5a-4b38-b3c4-f1ce4673f05f" name="Tilføj kontakt" type="Action">
    <subsheetid>4be1d5ff-8fff-4e7c-a6f1-a1ba1376ac6e</subsheetid>
    <loginhibit onsuccess="true" />
    <display x="15" y="-60" />
    <inputs>
      <input type="text" name="Url" friendlyname="Url" expr="[SOR kontakt._links.addContact]" />
      <input type="text" name="Body" friendlyname="Body" expr="&quot;{&quot;&quot;_links&quot;&quot;:{&quot;&quot;self&quot;&quot;:{}}}&quot;" />
    </inputs>
    <outputs>
      <output type="collection" name="Data" friendlyname="Data" stage="Kontakt" />
      <output type="number" name="Antal" friendlyname="Antal" stage="" />
      <output type="text" name="Json" friendlyname="Json" narrative="Det rå json output" stage="" />
      <output type="number" name="Statuskode" friendlyname="Statuskode" narrative="Http statuskoden for kaldet" stage="Statuskode" />
    </outputs>
    <onsuccess>2d06cebe-702c-4caf-9135-86fd41e304e9</onsuccess>
    <resource object="Nexus - Core" action="Put" />
  </stage>
  <stage stageid="793b471a-4145-4612-9da8-365b21a6b77f" name="Statuskode" type="Data">
    <subsheetid>4be1d5ff-8fff-4e7c-a6f1-a1ba1376ac6e</subsheetid>
    <display x="-195" y="120" w="120" h="30" />
    <datatype>number</datatype>
    <initialvalue />
    <private />
    <alwaysinit />
  </stage>
  <stage stageid="1dcfb926-0b0b-47f3-9bb0-da69a794f624" name="Kontakt" type="Collection">
    <subsheetid>4be1d5ff-8fff-4e7c-a6f1-a1ba1376ac6e</subsheetid>
    <display x="-195" y="195" w="120" h="30" />
    <datatype>collection</datatype>
    <private />
    <alwaysinit />
  </stage>
  <stage stageid="2d06cebe-702c-4caf-9135-86fd41e304e9" name="Alt er godt?" type="Decision">
    <subsheetid>4be1d5ff-8fff-4e7c-a6f1-a1ba1376ac6e</subsheetid>
    <loginhibit />
    <display x="15" y="-15" />
    <decision expression="[Statuskode] = 200" />
    <ontrue>ac59c7a6-98b3-4273-88f0-9bd8e9187adf</ontrue>
    <onfalse>1eaa862d-a38e-4e86-a532-7147aae388a2</onfalse>
  </stage>
  <stage stageid="1eaa862d-a38e-4e86-a532-7147aae388a2" name="Exception1" type="Exception">
    <subsheetid>4be1d5ff-8fff-4e7c-a6f1-a1ba1376ac6e</subsheetid>
    <display x="165" y="-15" />
    <exception localized="yes" type="Business Exception" detail="&quot;Fejl: &quot; &amp; [Statuskode]" />
  </stage>
  <stage stageid="d27416d0-ab8a-46fb-911f-b1932b6a1c4e" name="Søg efter SOR kontakt" type="SubSheet">
    <subsheetid>4be1d5ff-8fff-4e7c-a6f1-a1ba1376ac6e</subsheetid>
    <loginhibit />
    <display x="150" y="-150" />
    <inputs>
      <input type="collection" name="Borger" friendlyname="Borger" expr="[Borger]" />
      <input type="text" name="Søgning" friendlyname="Søgning" expr="&quot;dalum od&quot;" />
    </inputs>
    <outputs>
      <output type="collection" name="SOR Kontakter" friendlyname="SOR Kontakter" stage="SOR kontakt" />
      <output type="number" name="Antal" friendlyname="Antal" stage="" />
    </outputs>
    <onsuccess>4f16a4e9-4c91-433b-8a3f-26c94c47f250</onsuccess>
    <processid>e6e52703-e8f7-4ad7-9d6d-fefeb93f2dea</processid>
  </stage>
  <stage stageid="16332fbf-1778-4c29-8190-5a309a5d4962" name="Borger" type="Collection">
    <subsheetid>4be1d5ff-8fff-4e7c-a6f1-a1ba1376ac6e</subsheetid>
    <display x="225" y="-240" />
    <datatype>collection</datatype>
    <private />
    <alwaysinit />
  </stage>
  <stage stageid="9c3e3c29-5b10-45c0-a6e8-5dc8b641b72f" name="Hent borgers præferencer" type="SubSheetInfo">
    <subsheetid>ae754b0e-b354-4d82-8234-dc7628f46c97</subsheetid>
    <display x="-195" y="-105" w="150" h="90" />
  </stage>
  <stage stageid="f057a2d1-1926-4c00-8ea4-48a2fbd709d6" name="Start" type="Start">
    <subsheetid>ae754b0e-b354-4d82-8234-dc7628f46c97</subsheetid>
    <loginhibit />
    <display x="15" y="-105" />
    <inputs>
      <input type="collection" name="Borger" stage="Borger" />
    </inputs>
    <onsuccess>34ab8820-2621-42ec-93de-8280fb048568</onsuccess>
  </stage>
  <stage stageid="4503a878-2a08-4221-8377-3791ed0d9f41" name="End" type="End">
    <subsheetid>ae754b0e-b354-4d82-8234-dc7628f46c97</subsheetid>
    <loginhibit />
    <display x="15" y="30" />
    <outputs>
      <output type="collection" name="Præferencer" stage="Præferencer" />
      <output type="number" name="Antal" stage="Antal" />
    </outputs>
  </stage>
  <stage stageid="129ab286-7f14-472b-820e-9ce95cd795fb" name="Input" type="Block">
    <subsheetid>ae754b0e-b354-4d82-8234-dc7628f46c97</subsheetid>
    <display x="-270" y="-45" w="150" h="60" />
    <font family="Segoe UI" size="10" style="Regular" color="339966" />
  </stage>
  <stage stageid="7337cf13-289e-484f-9cca-81b6310b98b1" name="Variabler" type="Block">
    <subsheetid>ae754b0e-b354-4d82-8234-dc7628f46c97</subsheetid>
    <display x="-270" y="90" w="150" h="45" />
    <font family="Segoe UI" size="10" style="Regular" color="666699" />
  </stage>
  <stage stageid="9265190e-d6e8-446f-a7b3-3bda8a4c5ff7" name="Konstanter" type="Block">
    <subsheetid>ae754b0e-b354-4d82-8234-dc7628f46c97</subsheetid>
    <display x="-270" y="30" w="150" h="45" />
    <font family="Segoe UI" size="10" style="Regular" color="008080" />
  </stage>
  <stage stageid="10a1e2fd-d1ef-4cfc-874c-a4e5857a8010" name="Output" type="Block">
    <subsheetid>ae754b0e-b354-4d82-8234-dc7628f46c97</subsheetid>
    <display x="-270" y="150" w="150" h="105" />
    <font family="Segoe UI" size="10" style="Regular" color="800080" />
  </stage>
  <stage stageid="a022648f-962a-4aa7-9cb4-53b30136902f" name="Borger" type="Collection">
    <subsheetid>ae754b0e-b354-4d82-8234-dc7628f46c97</subsheetid>
    <display x="-195" y="-15" w="120" h="30" />
    <datatype>collection</datatype>
    <private />
    <alwaysinit />
  </stage>
  <stage stageid="e3e12397-c546-4b1e-973b-083c741f7d26" name="Nexus - Core::Start" type="Action">
    <subsheetid>ae754b0e-b354-4d82-8234-dc7628f46c97</subsheetid>
    <loginhibit onsuccess="true" />
    <display x="135" y="-180" />
    <inputs>
      <input type="text" name="Credentials" friendlyname="Credentials" expr="&quot;KMD Nexus - odensedev&quot;" />
    </inputs>
    <onsuccess>c34ce911-3f3d-48c0-bb00-94c1a095da8e</onsuccess>
    <resource object="Nexus - Core" action="Start" />
  </stage>
  <stage stageid="7bf067ad-56ab-417e-bef8-c867adc125a6" name="Debug" type="Block">
    <subsheetid>ae754b0e-b354-4d82-8234-dc7628f46c97</subsheetid>
    <loginhibit />
    <display x="90" y="-210" w="90" h="105" />
    <font family="Segoe UI" size="10" style="Regular" color="FFFF99" />
  </stage>
  <stage stageid="c34ce911-3f3d-48c0-bb00-94c1a095da8e" name="Hent borger" type="SubSheet">
    <subsheetid>ae754b0e-b354-4d82-8234-dc7628f46c97</subsheetid>
    <loginhibit />
    <display x="135" y="-135" />
    <inputs>
      <input type="text" name="Cpr" friendlyname="Cpr" expr="&quot;xxxxxxxxxx&quot;" />
    </inputs>
    <outputs>
      <output type="collection" name="Borger" friendlyname="Borger" stage="Borger" />
    </outputs>
    <onsuccess>9db11d16-c116-40d2-88eb-256804650fea</onsuccess>
    <processid>d5cc0f3c-1d67-4f5b-a83a-08a4b9574114</processid>
  </stage>
  <stage stageid="34ab8820-2621-42ec-93de-8280fb048568" name="Anchor3" type="Anchor">
    <subsheetid>ae754b0e-b354-4d82-8234-dc7628f46c97</subsheetid>
    <loginhibit />
    <display x="15" y="-75" w="10" h="10" />
    <onsuccess>fcb33c27-12e1-4be5-88fa-2602ec03bd72</onsuccess>
  </stage>
  <stage stageid="9db11d16-c116-40d2-88eb-256804650fea" name="Anchor4" type="Anchor">
    <subsheetid>ae754b0e-b354-4d82-8234-dc7628f46c97</subsheetid>
    <loginhibit />
    <display x="135" y="-75" w="10" h="10" />
    <onsuccess>34ab8820-2621-42ec-93de-8280fb048568</onsuccess>
  </stage>
  <stage stageid="54c8fc0c-e7d1-44ac-927f-bb995cddfa8f" name="Hent forløb" type="Block">
    <subsheetid>ae754b0e-b354-4d82-8234-dc7628f46c97</subsheetid>
    <loginhibit />
    <display x="-90" y="-60" w="315" h="60" />
    <font family="Segoe UI" size="10" style="Regular" color="7FB2E5" />
  </stage>
  <stage stageid="fcb33c27-12e1-4be5-88fa-2602ec03bd72" name="Nexus - Core::Get" type="Action">
    <subsheetid>ae754b0e-b354-4d82-8234-dc7628f46c97</subsheetid>
    <loginhibit onsuccess="true" />
    <display x="15" y="-30" />
    <inputs>
      <input type="text" name="Url" friendlyname="Url" expr="[Borger._links.patientPreferences]" />
    </inputs>
    <outputs>
      <output type="collection" name="Data" friendlyname="Data" stage="Præferencer" />
      <output type="number" name="Antal" friendlyname="Antal" stage="Antal" />
      <output type="text" name="Json" friendlyname="Json" narrative="Det rå json output" stage="" />
      <output type="number" name="Statuskode" friendlyname="Statuskode" narrative="Http statuskoden for kaldet" stage="" />
    </outputs>
    <onsuccess>4503a878-2a08-4221-8377-3791ed0d9f41</onsuccess>
    <resource object="Nexus - Core" action="Get" />
  </stage>
  <stage stageid="0831ec39-75d4-44b9-92cb-741390d4e31a" name="Antal" type="Data">
    <subsheetid>ae754b0e-b354-4d82-8234-dc7628f46c97</subsheetid>
    <display x="-195" y="225" w="120" h="30" />
    <datatype>number</datatype>
    <initialvalue />
    <private />
    <alwaysinit />
  </stage>
  <stage stageid="c9cde50c-908d-44c8-9c86-3c0a4c160dab" name="Præferencer" type="Collection">
    <subsheetid>ae754b0e-b354-4d82-8234-dc7628f46c97</subsheetid>
    <display x="-195" y="180" w="120" h="30" />
    <datatype>collection</datatype>
    <private />
    <alwaysinit />
  </stage>
  <stage stageid="d244d404-b88f-4a1e-8b3b-fddc94c218ea" name="Søg borger" type="SubSheetInfo">
    <subsheetid>2706c9a6-c69e-4fa7-99fa-1a040ee40f50</subsheetid>
    <display x="-195" y="-105" w="150" h="90" />
  </stage>
  <stage stageid="d70f45cb-e10b-461d-848e-a8fbf2b924d4" name="Start" type="Start">
    <subsheetid>2706c9a6-c69e-4fa7-99fa-1a040ee40f50</subsheetid>
    <loginhibit />
    <display x="15" y="-120" />
    <inputs>
      <input type="text" name="Søgestreng" stage="Søgestreng" />
    </inputs>
    <onsuccess>2bc5ae3f-0150-4c65-80fd-3a043a223d45</onsuccess>
  </stage>
  <stage stageid="5624ac7f-642f-4a1d-98dd-2d4c55a74369" name="End" type="End">
    <subsheetid>2706c9a6-c69e-4fa7-99fa-1a040ee40f50</subsheetid>
    <loginhibit />
    <display x="15" y="300" />
    <outputs>
      <output type="collection" name="Borgere" stage="Borgere" />
      <output type="number" name="Antal" stage="Antal" />
    </outputs>
  </stage>
  <stage stageid="40dae5c3-dfcf-4767-9f07-87df255fc30f" name="Søgestreng" type="Data">
    <subsheetid>2706c9a6-c69e-4fa7-99fa-1a040ee40f50</subsheetid>
    <display x="-195" y="-15" w="120" h="30" />
    <datatype>text</datatype>
    <initialvalue />
    <private />
    <alwaysinit />
  </stage>
  <stage stageid="fcbff9ac-8e9c-4651-9059-fb6195312a07" name="Input" type="Block">
    <subsheetid>2706c9a6-c69e-4fa7-99fa-1a040ee40f50</subsheetid>
    <display x="-270" y="-45" w="150" h="60" />
    <font family="Segoe UI" size="10" style="Regular" color="339966" />
  </stage>
  <stage stageid="c74bb2f8-29c8-4fcd-9096-c00a42409bf9" name="Variabler" type="Block">
    <subsheetid>2706c9a6-c69e-4fa7-99fa-1a040ee40f50</subsheetid>
    <display x="-270" y="90" w="150" h="150" />
    <font family="Segoe UI" size="10" style="Regular" color="666699" />
  </stage>
  <stage stageid="427a9f88-3d4d-4c6a-aa35-e48ce0cae451" name="Konstanter" type="Block">
    <subsheetid>2706c9a6-c69e-4fa7-99fa-1a040ee40f50</subsheetid>
    <display x="-270" y="30" w="150" h="45" />
    <font family="Segoe UI" size="10" style="Regular" color="008080" />
  </stage>
  <stage stageid="09c21f13-2bbb-47dc-b834-acee75077843" name="Output" type="Block">
    <subsheetid>2706c9a6-c69e-4fa7-99fa-1a040ee40f50</subsheetid>
    <display x="-270" y="255" w="150" h="105" />
    <font family="Segoe UI" size="10" style="Regular" color="800080" />
  </stage>
  <stage stageid="de594a65-8b4c-4ada-89b3-71a60f891dd8" name="Hent patients url" type="Action">
    <subsheetid>2706c9a6-c69e-4fa7-99fa-1a040ee40f50</subsheetid>
    <loginhibit onsuccess="true" />
    <display x="15" y="30" />
    <inputs>
      <input type="text" name="Navn" friendlyname="Navn" narrative="navn på det globale rod api" expr="&quot;patients&quot;" />
    </inputs>
    <outputs>
      <output type="text" name="Url" friendlyname="Url" stage="patients" />
    </outputs>
    <onsuccess>e7d806ae-c925-40ce-ace1-5ce4d2d28482</onsuccess>
    <resource object="Nexus - Core" action="Api url" />
  </stage>
  <stage stageid="701978ae-da65-4d98-bbda-3baa40d92a75" name="patients" type="Data">
    <subsheetid>2706c9a6-c69e-4fa7-99fa-1a040ee40f50</subsheetid>
    <display x="-195" y="120" w="120" h="30" />
    <datatype>text</datatype>
    <initialvalue />
    <private />
    <alwaysinit />
  </stage>
  <stage stageid="5f59f45d-b2f6-4892-9672-93975ffe628a" name="Har vi søgning" type="Decision">
    <subsheetid>2706c9a6-c69e-4fa7-99fa-1a040ee40f50</subsheetid>
    <loginhibit />
    <display x="15" y="-45" />
    <decision expression="[Søgestreng] &lt;&gt; &quot;&quot;" />
    <ontrue>de594a65-8b4c-4ada-89b3-71a60f891dd8</ontrue>
    <onfalse>b3017d29-e731-4071-95e5-4411175eaf50</onfalse>
  </stage>
  <stage stageid="b3017d29-e731-4071-95e5-4411175eaf50" name="Ugyldigt cpr" type="Exception">
    <subsheetid>2706c9a6-c69e-4fa7-99fa-1a040ee40f50</subsheetid>
    <display x="120" y="-45" />
    <exception localized="yes" type="Invalid Input Parameter" detail="&quot;Cpr er er ikke gyldigt&quot;" />
  </stage>
  <stage stageid="486dc6f7-d12c-4bce-9484-c321e512abbe" name="Validering" type="Block">
    <subsheetid>2706c9a6-c69e-4fa7-99fa-1a040ee40f50</subsheetid>
    <loginhibit />
    <display x="-90" y="-75" w="315" h="60" />
    <font family="Segoe UI" size="10" style="Regular" color="7FB2E5" />
  </stage>
  <stage stageid="26e3ed2e-069c-4603-b9b7-e94982b54b66" name="Udsøg borger" type="Block">
    <subsheetid>2706c9a6-c69e-4fa7-99fa-1a040ee40f50</subsheetid>
    <loginhibit />
    <display x="-90" y="0" w="315" h="195" />
    <font family="Segoe UI" size="10" style="Regular" color="7FB2E5" />
  </stage>
  <stage stageid="ee2ad233-683e-4e83-b977-d0c36338b460" name="Nexus - Core::Get" type="Action">
    <subsheetid>2706c9a6-c69e-4fa7-99fa-1a040ee40f50</subsheetid>
    <loginhibit onsuccess="true" />
    <display x="15" y="120" />
    <inputs>
      <input type="text" name="Url" friendlyname="Url" expr="[patients] &amp; &quot;?pageSize=50&amp;query=&quot; &amp; [Søgestreng]" />
    </inputs>
    <outputs>
      <output type="collection" name="Data" friendlyname="Data" stage="Sider" />
      <output type="number" name="Antal" friendlyname="Antal" stage="Antal" />
      <output type="text" name="Json" friendlyname="Json" narrative="Det rå json output" stage="" />
      <output type="number" name="Statuskode" friendlyname="Statuskode" narrative="Http statuskoden for kaldet" stage="Statuskode" />
    </outputs>
    <onsuccess>b88d909f-ed28-43fb-9137-edf726646eaf</onsuccess>
    <resource object="Nexus - Core" action="Get" />
  </stage>
  <stage stageid="76be65f9-6800-44c2-96c5-9ca57b3df400" name="Nexus - Core::Start" type="Action">
    <subsheetid>2706c9a6-c69e-4fa7-99fa-1a040ee40f50</subsheetid>
    <loginhibit onsuccess="true" />
    <display x="135" y="-180" />
    <inputs>
      <input type="text" name="Credentials" friendlyname="Credentials" expr="&quot;KMD Nexus - produktion&quot;" />
    </inputs>
    <onsuccess>97857891-e488-4301-a3db-87fcaef9c504</onsuccess>
    <resource object="Nexus - Core" action="Start" />
  </stage>
  <stage stageid="97857891-e488-4301-a3db-87fcaef9c504" name="Debug - nancy" type="Calculation">
    <subsheetid>2706c9a6-c69e-4fa7-99fa-1a040ee40f50</subsheetid>
    <loginhibit />
    <display x="135" y="-135" />
    <onsuccess>45c21279-075d-4672-8d0a-ce91a39c044e</onsuccess>
    <calculation expression="&quot;nancy&quot;" stage="Søgestreng" />
  </stage>
  <stage stageid="5d9bb173-9433-4474-8ec2-4971a80441ae" name="Statuskode" type="Data">
    <subsheetid>2706c9a6-c69e-4fa7-99fa-1a040ee40f50</subsheetid>
    <display x="-195" y="210" w="120" h="30" />
    <datatype>number</datatype>
    <initialvalue />
    <private />
    <alwaysinit />
  </stage>
  <stage stageid="e1247804-4db3-4e44-9adc-e76095de290b" name="Antal" type="Data">
    <subsheetid>2706c9a6-c69e-4fa7-99fa-1a040ee40f50</subsheetid>
    <display x="-195" y="330" w="120" h="30" />
    <datatype>number</datatype>
    <initialvalue />
    <private />
    <alwaysinit />
  </stage>
  <stage stageid="b88d909f-ed28-43fb-9137-edf726646eaf" name="Alt ok?" type="Decision">
    <subsheetid>2706c9a6-c69e-4fa7-99fa-1a040ee40f50</subsheetid>
    <loginhibit />
    <display x="15" y="165" />
    <decision expression="[Statuskode] = 200" />
    <ontrue>b811ccdc-8717-4890-b439-2c212ee6648b</ontrue>
    <onfalse>5a20b397-a7d4-4584-855b-8abd2b7ea88f</onfalse>
  </stage>
  <stage stageid="5a20b397-a7d4-4584-855b-8abd2b7ea88f" name="Http fejl" type="Exception">
    <subsheetid>2706c9a6-c69e-4fa7-99fa-1a040ee40f50</subsheetid>
    <display x="120" y="165" />
    <exception localized="yes" type="Business Exception" detail="&quot;Kaldet returnerede en status: &quot;  &amp; [Statuskode]" />
  </stage>
  <stage stageid="2bc5ae3f-0150-4c65-80fd-3a043a223d45" name="Anchor1" type="Anchor">
    <subsheetid>2706c9a6-c69e-4fa7-99fa-1a040ee40f50</subsheetid>
    <loginhibit />
    <display x="15" y="-90" w="10" h="10" />
    <onsuccess>5f59f45d-b2f6-4892-9672-93975ffe628a</onsuccess>
  </stage>
  <stage stageid="45c21279-075d-4672-8d0a-ce91a39c044e" name="Anchor2" type="Anchor">
    <subsheetid>2706c9a6-c69e-4fa7-99fa-1a040ee40f50</subsheetid>
    <loginhibit />
    <display x="135" y="-90" w="10" h="10" />
    <onsuccess>2bc5ae3f-0150-4c65-80fd-3a043a223d45</onsuccess>
  </stage>
  <stage stageid="5b8d40fc-fb7b-4abb-a0ae-0009630f6697" name="Debug" type="Block">
    <subsheetid>2706c9a6-c69e-4fa7-99fa-1a040ee40f50</subsheetid>
    <loginhibit />
    <display x="90" y="-210" w="90" h="105" />
    <font family="Segoe UI" size="10" style="Regular" color="FFFF99" />
  </stage>
  <stage stageid="e7d806ae-c925-40ce-ace1-5ce4d2d28482" name="Url Encode" type="Action">
    <subsheetid>2706c9a6-c69e-4fa7-99fa-1a040ee40f50</subsheetid>
    <loginhibit onsuccess="true" />
    <display x="15" y="75" />
    <inputs>
      <input type="text" name="URL" friendlyname="URL" narrative="The URL to encode" expr="[Søgestreng]" />
    </inputs>
    <outputs>
      <output type="text" name="URL" friendlyname="URL" narrative="The encoded URL" stage="Søgestreng" />
    </outputs>
    <onsuccess>ee2ad233-683e-4e83-b977-d0c36338b460</onsuccess>
    <resource object="Utility - HTTP" action="URL Encode" />
  </stage>
  <stage stageid="1337c72c-e387-45f9-97b7-9253f473e126" name="Sider" type="Collection">
    <subsheetid>2706c9a6-c69e-4fa7-99fa-1a040ee40f50</subsheetid>
    <display x="-195" y="165" w="120" h="30" />
    <datatype>collection</datatype>
    <private />
    <alwaysinit />
  </stage>
  <stage stageid="b811ccdc-8717-4890-b439-2c212ee6648b" name="Hent sider" type="Action">
    <subsheetid>2706c9a6-c69e-4fa7-99fa-1a040ee40f50</subsheetid>
    <loginhibit onsuccess="true" />
    <display x="15" y="240" />
    <inputs>
      <input type="collection" name="Sider" friendlyname="Sider" narrative="Sideobjektet" expr="[Sider]" />
      <input type="number" name="Antal sider" friendlyname="Antal sider" narrative="Maksimale antal sider der skal hentes, -1 = hent alle (default)" expr="-1" />
      <input type="text" name="Sidelink" friendlyname="Sidelink" narrative="Hvad er navnet på kolonnen der indeholder sidelinket" expr="&quot;patientData&quot;" />
    </inputs>
    <outputs>
      <output type="collection" name="Objekter" friendlyname="Objekter" stage="Borgere" />
      <output type="number" name="Antal" friendlyname="Antal" stage="Antal" />
    </outputs>
    <onsuccess>5624ac7f-642f-4a1d-98dd-2d4c55a74369</onsuccess>
    <resource object="Nexus - Core" action="Hent sider" />
  </stage>
  <stage stageid="6e2edde6-bfb6-48c3-8bc8-9668e45477b4" name="Block1" type="Block">
    <subsheetid>2706c9a6-c69e-4fa7-99fa-1a040ee40f50</subsheetid>
    <loginhibit />
    <display x="-90" y="210" w="315" h="60" />
    <font family="Segoe UI" size="10" style="Regular" color="7FB2E5" />
  </stage>
  <stage stageid="40e537a2-6252-41d5-b8b7-97ba4bf217f0" name="Borgere" type="Collection">
    <subsheetid>2706c9a6-c69e-4fa7-99fa-1a040ee40f50</subsheetid>
    <display x="-195" y="285" w="120" h="30" />
    <datatype>collection</datatype>
    <private />
    <alwaysinit />
  </stage>
  <stage stageid="30a00809-240d-47f3-b047-21d5441d6bf7" name="Hent borgers referencer" type="SubSheetInfo">
    <subsheetid>2a8b0dd5-5e35-4152-b454-911f5f5b80b3</subsheetid>
    <display x="-195" y="-105" w="150" h="90" />
  </stage>
  <stage stageid="25371692-9e47-40bb-99ea-8d9831eeef98" name="Start" type="Start">
    <subsheetid>2a8b0dd5-5e35-4152-b454-911f5f5b80b3</subsheetid>
    <loginhibit />
    <display x="15" y="-105" />
    <inputs>
      <input type="collection" name="Borger" stage="Borger" />
      <input type="text" name="Grundforløb" stage="Grundforløb" />
      <input type="text" name="Forløb" stage="Forløb" />
    </inputs>
    <onsuccess>d26c3cb4-21a8-4505-9a79-03707a8715c9</onsuccess>
  </stage>
  <stage stageid="6b694578-c923-4a0b-8d20-4bb44bcecb0b" name="End" type="End">
    <subsheetid>2a8b0dd5-5e35-4152-b454-911f5f5b80b3</subsheetid>
    <loginhibit />
    <display x="15" y="660" />
    <outputs>
      <output type="collection" name="Indsatsreferencer" stage="Indsatser" />
      <output type="collection" name="Brugerreferencer" stage="Brugere" />
      <output type="collection" name="Skemareferencer" stage="Skemaer" />
    </outputs>
  </stage>
  <stage stageid="181a57d3-1db7-46cc-978c-64b54b512af3" name="Input" type="Block">
    <subsheetid>2a8b0dd5-5e35-4152-b454-911f5f5b80b3</subsheetid>
    <display x="-270" y="-45" w="150" h="150" />
    <font family="Segoe UI" size="10" style="Regular" color="339966" />
  </stage>
  <stage stageid="ba126c9f-03a0-457f-a943-e85884fe0a71" name="Variabler" type="Block">
    <subsheetid>2a8b0dd5-5e35-4152-b454-911f5f5b80b3</subsheetid>
    <display x="-270" y="180" w="150" h="105" />
    <font family="Segoe UI" size="10" style="Regular" color="666699" />
  </stage>
  <stage stageid="8721b6ad-b016-45b4-a316-b1478922d5fb" name="Konstanter" type="Block">
    <subsheetid>2a8b0dd5-5e35-4152-b454-911f5f5b80b3</subsheetid>
    <display x="-270" y="120" w="150" h="45" />
    <font family="Segoe UI" size="10" style="Regular" color="008080" />
  </stage>
  <stage stageid="c4fd1f53-8f5b-4501-845f-300760aff593" name="Output" type="Block">
    <subsheetid>2a8b0dd5-5e35-4152-b454-911f5f5b80b3</subsheetid>
    <display x="-270" y="300" w="150" h="150" />
    <font family="Segoe UI" size="10" style="Regular" color="800080" />
  </stage>
  <stage stageid="047a710f-ba66-4dfe-b698-755d4542781d" name="Borger" type="Collection">
    <subsheetid>2a8b0dd5-5e35-4152-b454-911f5f5b80b3</subsheetid>
    <display x="-195" y="-15" w="120" h="30" />
    <datatype>collection</datatype>
    <private />
    <alwaysinit />
  </stage>
  <stage stageid="f91dd399-ead3-4e32-97ce-d99eb14ef201" name="Nexus - Core::Start" type="Action">
    <subsheetid>2a8b0dd5-5e35-4152-b454-911f5f5b80b3</subsheetid>
    <loginhibit onsuccess="true" />
    <display x="135" y="-210" />
    <inputs>
      <input type="text" name="Credentials" friendlyname="Credentials" expr="&quot;KMD Nexus - odensedev&quot;" />
    </inputs>
    <onsuccess>1cfd9780-cbb2-4015-a681-34c531b93427</onsuccess>
    <resource object="Nexus - Core" action="Start" />
  </stage>
  <stage stageid="4f8afc6f-23e4-4069-ba45-14b1d3114778" name="Debug" type="Block">
    <subsheetid>2a8b0dd5-5e35-4152-b454-911f5f5b80b3</subsheetid>
    <loginhibit />
    <display x="90" y="-240" w="90" h="150" />
    <font family="Segoe UI" size="10" style="Regular" color="FFFF99" />
  </stage>
  <stage stageid="1cfd9780-cbb2-4015-a681-34c531b93427" name="Hent borger" type="SubSheet">
    <subsheetid>2a8b0dd5-5e35-4152-b454-911f5f5b80b3</subsheetid>
    <loginhibit />
    <display x="135" y="-165" />
    <inputs>
      <input type="text" name="Cpr" friendlyname="Cpr" expr="&quot;xxxxxxxxxx&quot;" />
    </inputs>
    <outputs>
      <output type="collection" name="Borger" friendlyname="Borger" stage="Borger" />
    </outputs>
    <onsuccess>d0f6a83b-c90c-4a62-bd62-8454fde4ae36</onsuccess>
    <processid>d5cc0f3c-1d67-4f5b-a83a-08a4b9574114</processid>
  </stage>
  <stage stageid="d26c3cb4-21a8-4505-9a79-03707a8715c9" name="Anchor3" type="Anchor">
    <subsheetid>2a8b0dd5-5e35-4152-b454-911f5f5b80b3</subsheetid>
    <loginhibit />
    <display x="15" y="-75" w="10" h="10" />
    <onsuccess>66bd1a61-2267-4c78-86f7-ecf64486719d</onsuccess>
  </stage>
  <stage stageid="36546228-b886-4f90-a17e-0063bb68b0fb" name="Anchor4" type="Anchor">
    <subsheetid>2a8b0dd5-5e35-4152-b454-911f5f5b80b3</subsheetid>
    <loginhibit />
    <display x="135" y="-75" w="10" h="10" />
    <onsuccess>d26c3cb4-21a8-4505-9a79-03707a8715c9</onsuccess>
  </stage>
  <stage stageid="785860de-edc8-4d0d-800a-dd0bb0c26ed6" name="Hent forløb" type="Block">
    <subsheetid>2a8b0dd5-5e35-4152-b454-911f5f5b80b3</subsheetid>
    <loginhibit />
    <display x="-90" y="-60" w="225" h="60" />
    <font family="Segoe UI" size="10" style="Regular" color="7FB2E5" />
  </stage>
  <stage stageid="66bd1a61-2267-4c78-86f7-ecf64486719d" name="Hent pathway" type="SubSheet">
    <subsheetid>2a8b0dd5-5e35-4152-b454-911f5f5b80b3</subsheetid>
    <loginhibit />
    <display x="15" y="-30" />
    <inputs>
      <input type="collection" name="Borger" friendlyname="Borger" expr="[Borger]" />
      <input type="text" name="Pathway" friendlyname="Pathway" narrative="Default &quot;-Alt&quot;" expr="&quot;-Alt&quot;" />
    </inputs>
    <outputs>
      <output type="collection" name="Pathway" friendlyname="Pathway" stage="" />
      <output type="collection" name="Referencer" friendlyname="Referencer" stage="Referencer" />
      <output type="text" name="Referencer (json)" friendlyname="Referencer (json)" narrative="Referencer som rå json" stage="" />
      <output type="number" name="Antal referencer" friendlyname="Antal referencer" stage="" />
      <output type="collection" name="Aktiviteter" friendlyname="Aktiviteter" stage="" />
      <output type="number" name="Antal aktiviteter" friendlyname="Antal aktiviteter" stage="" />
    </outputs>
    <onsuccess>8c975ceb-0995-4888-8bce-be511d4eed11</onsuccess>
    <processid>ee9739d7-5eaa-493a-9ce1-f18ffd4b92fa</processid>
  </stage>
  <stage stageid="04d409d4-c961-4190-87cd-b0f8cebfbc68" name="Grundforløb" type="Data">
    <subsheetid>2a8b0dd5-5e35-4152-b454-911f5f5b80b3</subsheetid>
    <display x="-195" y="30" w="120" h="30" />
    <datatype>text</datatype>
    <initialvalue />
    <private />
    <alwaysinit />
  </stage>
  <stage stageid="53f9f49b-17da-4e17-ba21-38144caf3caa" name="Forløb" type="Data">
    <subsheetid>2a8b0dd5-5e35-4152-b454-911f5f5b80b3</subsheetid>
    <display x="-195" y="75" w="120" h="30" />
    <datatype>text</datatype>
    <initialvalue />
    <private />
    <alwaysinit />
  </stage>
  <stage stageid="241eacfd-e893-49e8-b273-b4a9d18a81d9" name="Indsatser" type="Collection">
    <subsheetid>2a8b0dd5-5e35-4152-b454-911f5f5b80b3</subsheetid>
    <loginhibit />
    <display x="-195" y="330" w="120" h="30" />
    <datatype>collection</datatype>
    <private />
    <alwaysinit />
  </stage>
  <stage stageid="84af7f34-8562-4d05-8eb2-09f5d9912035" name="Brugere" type="Collection">
    <subsheetid>2a8b0dd5-5e35-4152-b454-911f5f5b80b3</subsheetid>
    <loginhibit />
    <display x="-195" y="375" w="120" h="30" />
    <datatype>collection</datatype>
    <private />
    <alwaysinit />
  </stage>
  <stage stageid="a6caa08b-2fb0-4357-8dbd-995e48c4ffed" name="Skemaer" type="Collection">
    <subsheetid>2a8b0dd5-5e35-4152-b454-911f5f5b80b3</subsheetid>
    <loginhibit />
    <display x="-195" y="420" w="120" h="30" />
    <datatype>collection</datatype>
    <private />
    <alwaysinit />
  </stage>
  <stage stageid="54c0c643-d1a1-45ae-9107-fa1c641f038b" name="Referencer" type="Collection">
    <subsheetid>2a8b0dd5-5e35-4152-b454-911f5f5b80b3</subsheetid>
    <display x="-195" y="210" w="120" h="30" />
    <datatype>collection</datatype>
    <private />
    <alwaysinit />
  </stage>
  <stage stageid="dec8240e-14cc-4a29-a53d-5f72ca9d71a4" name="Vælg forløb" type="Block">
    <subsheetid>2a8b0dd5-5e35-4152-b454-911f5f5b80b3</subsheetid>
    <loginhibit />
    <display x="-90" y="15" w="225" h="345" />
    <font family="Segoe UI" size="10" style="Regular" color="7FB2E5" />
  </stage>
  <stage stageid="8c975ceb-0995-4888-8bce-be511d4eed11" name="Vælg grundforløb" type="Action">
    <subsheetid>2a8b0dd5-5e35-4152-b454-911f5f5b80b3</subsheetid>
    <loginhibit onsuccess="true" />
    <display x="15" y="45" />
    <inputs>
      <input type="collection" name="Collection In" friendlyname="Collection In" narrative="Input collection" expr="[Referencer]" />
      <input type="text" name="Filter" friendlyname="Filter" narrative="The filter to apply" expr="&quot;[name]='&quot; &amp; [Grundforløb] &amp; &quot;' AND [type]='patientPathwayReference'&quot;" />
    </inputs>
    <outputs>
      <output type="number" name="Count" friendlyname="Count" narrative="The amount of rows in the filtered collection" stage="Antal" />
      <output type="collection" name="Collection Out" friendlyname="Collection Out" narrative="The filtered collection" stage="Referencer" />
    </outputs>
    <onsuccess>84de8978-298a-4567-ad84-28bcddb3ab7a</onsuccess>
    <resource object="Utility - Odk Linq" action="Filter" />
  </stage>
  <stage stageid="84de8978-298a-4567-ad84-28bcddb3ab7a" name="Har vi grundforløb?" type="Decision">
    <subsheetid>2a8b0dd5-5e35-4152-b454-911f5f5b80b3</subsheetid>
    <loginhibit />
    <display x="15" y="90" />
    <decision expression="[Antal] = 1" />
    <ontrue>3c0c0e57-0927-4d04-bab9-3bd5f87a9076</ontrue>
    <onfalse>7a4888ea-9f01-4dde-9a4e-b896914a4bae</onfalse>
  </stage>
  <stage stageid="7a4888ea-9f01-4dde-9a4e-b896914a4bae" name="Intet forløb" type="Exception">
    <subsheetid>2a8b0dd5-5e35-4152-b454-911f5f5b80b3</subsheetid>
    <display x="210" y="90" />
    <exception localized="yes" type="Business Exception" detail="&quot;Grundforløbet kunne ikke findes&quot;" />
  </stage>
  <stage stageid="3c0c0e57-0927-4d04-bab9-3bd5f87a9076" name="Hent children" type="Calculation">
    <subsheetid>2a8b0dd5-5e35-4152-b454-911f5f5b80b3</subsheetid>
    <loginhibit />
    <display x="15" y="135" />
    <onsuccess>c3196ee5-490c-438f-9866-0ba1ec842b5e</onsuccess>
    <calculation expression="[Referencer.children]" stage="Referencer" />
  </stage>
  <stage stageid="77ff9807-0645-476b-a068-bd94656814c0" name="Vælg forløb" type="Action">
    <subsheetid>2a8b0dd5-5e35-4152-b454-911f5f5b80b3</subsheetid>
    <loginhibit onsuccess="true" />
    <display x="15" y="225" />
    <inputs>
      <input type="collection" name="Collection In" friendlyname="Collection In" narrative="Input collection" expr="[Referencer]" />
      <input type="text" name="Filter" friendlyname="Filter" narrative="The filter to apply" expr="&quot;[name]='&quot; &amp; [Forløb] &amp; &quot;' AND [type]='patientPathwayReference'&quot;" />
    </inputs>
    <outputs>
      <output type="number" name="Count" friendlyname="Count" narrative="The amount of rows in the filtered collection" stage="Antal" />
      <output type="collection" name="Collection Out" friendlyname="Collection Out" narrative="The filtered collection" stage="Referencer" />
    </outputs>
    <onsuccess>d6b30e49-474a-4362-8548-fb582f5a67e3</onsuccess>
    <resource object="Utility - Odk Linq" action="Filter" />
  </stage>
  <stage stageid="d6b30e49-474a-4362-8548-fb582f5a67e3" name="Har vi forløb" type="Decision">
    <subsheetid>2a8b0dd5-5e35-4152-b454-911f5f5b80b3</subsheetid>
    <loginhibit />
    <display x="15" y="270" />
    <decision expression="[Antal] = 1" />
    <ontrue>92695a6d-7ed5-4e1f-b693-6057432d29b9</ontrue>
    <onfalse>b15003f7-e188-4436-9d0a-cc410afa8f4a</onfalse>
  </stage>
  <stage stageid="b15003f7-e188-4436-9d0a-cc410afa8f4a" name="Intet forløb" type="Exception">
    <subsheetid>2a8b0dd5-5e35-4152-b454-911f5f5b80b3</subsheetid>
    <display x="210" y="270" />
    <exception localized="yes" type="Business Exception" detail="&quot;Forløbet kunne ikke findes&quot;" />
  </stage>
  <stage stageid="92695a6d-7ed5-4e1f-b693-6057432d29b9" name="Hent children" type="Calculation">
    <subsheetid>2a8b0dd5-5e35-4152-b454-911f5f5b80b3</subsheetid>
    <loginhibit />
    <display x="15" y="315" />
    <onsuccess>7b67852e-4a12-4488-b67d-32cac9665d6b</onsuccess>
    <calculation expression="[Referencer.children]" stage="Referencer" />
  </stage>
  <stage stageid="c3196ee5-490c-438f-9866-0ba1ec842b5e" name="Har vi forløb?" type="Decision">
    <subsheetid>2a8b0dd5-5e35-4152-b454-911f5f5b80b3</subsheetid>
    <loginhibit />
    <display x="15" y="180" />
    <decision expression="[Forløb] &lt;&gt; &quot;&quot;" />
    <ontrue>77ff9807-0645-476b-a068-bd94656814c0</ontrue>
    <onfalse>a8465424-2b63-41a3-a646-993bef134d35</onfalse>
  </stage>
  <stage stageid="7b67852e-4a12-4488-b67d-32cac9665d6b" name="Anchor11" type="Anchor">
    <subsheetid>2a8b0dd5-5e35-4152-b454-911f5f5b80b3</subsheetid>
    <loginhibit />
    <display x="15" y="345" w="10" h="10" />
    <onsuccess>3f521c31-ad60-4df7-a9ce-e0d658f6cd1a</onsuccess>
  </stage>
  <stage stageid="3222b179-adab-4486-a0ce-013d93daa8f9" name="Anchor12" type="Anchor">
    <subsheetid>2a8b0dd5-5e35-4152-b454-911f5f5b80b3</subsheetid>
    <loginhibit />
    <display x="-45" y="345" w="10" h="10" />
    <onsuccess>7b67852e-4a12-4488-b67d-32cac9665d6b</onsuccess>
  </stage>
  <stage stageid="a8465424-2b63-41a3-a646-993bef134d35" name="Anchor13" type="Anchor">
    <subsheetid>2a8b0dd5-5e35-4152-b454-911f5f5b80b3</subsheetid>
    <loginhibit />
    <display x="-45" y="180" w="10" h="10" />
    <onsuccess>3222b179-adab-4486-a0ce-013d93daa8f9</onsuccess>
  </stage>
  <stage stageid="70d6e58a-7e89-4f4b-a243-304c67b4aafc" name="Sorter referencer" type="Block">
    <subsheetid>2a8b0dd5-5e35-4152-b454-911f5f5b80b3</subsheetid>
    <loginhibit />
    <display x="-90" y="375" w="225" h="255" />
    <font family="Segoe UI" size="10" style="Regular" color="7FB2E5" />
  </stage>
  <stage stageid="3f521c31-ad60-4df7-a9ce-e0d658f6cd1a" name="FIltrer brugere" type="Action">
    <subsheetid>2a8b0dd5-5e35-4152-b454-911f5f5b80b3</subsheetid>
    <loginhibit onsuccess="true" />
    <display x="15" y="405" />
    <inputs>
      <input type="collection" name="Collection In" friendlyname="Collection In" narrative="Input collection" expr="[Referencer]" />
      <input type="text" name="Filter" friendlyname="Filter" narrative="The filter to apply" expr="&quot;[type]='professionalReference'&quot;" />
    </inputs>
    <outputs>
      <output type="number" name="Count" friendlyname="Count" narrative="The amount of rows in the filtered collection" stage="" />
      <output type="collection" name="Collection Out" friendlyname="Collection Out" narrative="The filtered collection" stage="Brugere" />
    </outputs>
    <onsuccess>7cff74c8-2200-450e-a5ea-c2670418ab5c</onsuccess>
    <resource object="Utility - Odk Linq" action="Filter" />
  </stage>
  <stage stageid="d0f6a83b-c90c-4a62-bd62-8454fde4ae36" name="Multi1" type="MultipleCalculation">
    <subsheetid>2a8b0dd5-5e35-4152-b454-911f5f5b80b3</subsheetid>
    <loginhibit />
    <display x="135" y="-120" />
    <onsuccess>36546228-b886-4f90-a17e-0063bb68b0fb</onsuccess>
    <steps>
      <calculation expression="&quot;Sundhedsfagligt grundforløb&quot;" stage="Grundforløb" />
      <calculation expression="&quot;FSIII&quot;" stage="Forløb" />
    </steps>
  </stage>
  <stage stageid="22e212d1-8809-4565-bd40-7bf1c0bca46a" name="Antal" type="Data">
    <subsheetid>2a8b0dd5-5e35-4152-b454-911f5f5b80b3</subsheetid>
    <display x="-195" y="255" w="120" h="30" />
    <datatype>number</datatype>
    <initialvalue />
    <private />
    <alwaysinit />
  </stage>
  <stage stageid="7cff74c8-2200-450e-a5ea-c2670418ab5c" name="Filtrer skemaer" type="Action">
    <subsheetid>2a8b0dd5-5e35-4152-b454-911f5f5b80b3</subsheetid>
    <loginhibit onsuccess="true" />
    <display x="15" y="450" />
    <inputs>
      <input type="collection" name="Collection In" friendlyname="Collection In" narrative="Input collection" expr="[Referencer]" />
      <input type="text" name="Filter" friendlyname="Filter" narrative="The filter to apply" expr="&quot;[type]='formDataV2Reference'&quot;" />
    </inputs>
    <outputs>
      <output type="number" name="Count" friendlyname="Count" narrative="The amount of rows in the filtered collection" stage="" />
      <output type="collection" name="Collection Out" friendlyname="Collection Out" narrative="The filtered collection" stage="Skemaer" />
    </outputs>
    <onsuccess>ffb5968a-5cca-4ea1-a85e-5bc7b88f8627</onsuccess>
    <resource object="Utility - Odk Linq" action="Filter" />
  </stage>
  <stage stageid="ffb5968a-5cca-4ea1-a85e-5bc7b88f8627" name="Find basketReference" type="Action">
    <subsheetid>2a8b0dd5-5e35-4152-b454-911f5f5b80b3</subsheetid>
    <loginhibit onsuccess="true" />
    <display x="15" y="495" />
    <inputs>
      <input type="collection" name="Collection In" friendlyname="Collection In" narrative="Input collection" expr="[Referencer]" />
      <input type="text" name="Filter" friendlyname="Filter" narrative="The filter to apply" expr="&quot;[type]='basketReference'&quot;" />
    </inputs>
    <outputs>
      <output type="number" name="Count" friendlyname="Count" narrative="The amount of rows in the filtered collection" stage="Antal" />
      <output type="collection" name="Collection Out" friendlyname="Collection Out" narrative="The filtered collection" stage="Indsatser" />
    </outputs>
    <onsuccess>20888759-0b64-4894-aa14-5f08bf8989d0</onsuccess>
    <resource object="Utility - Odk Linq" action="Filter" />
  </stage>
  <stage stageid="20888759-0b64-4894-aa14-5f08bf8989d0" name="Er der indsatser?" type="Decision">
    <subsheetid>2a8b0dd5-5e35-4152-b454-911f5f5b80b3</subsheetid>
    <loginhibit />
    <display x="15" y="540" />
    <decision expression="[Antal] = 1" />
    <ontrue>5ac3998c-57a2-47fd-89f1-f6e09cbe73f2</ontrue>
    <onfalse>ff887f78-ae16-4348-a316-70f9f84a7ceb</onfalse>
  </stage>
  <stage stageid="5ac3998c-57a2-47fd-89f1-f6e09cbe73f2" name="Sæt indsatser" type="MultipleCalculation">
    <subsheetid>2a8b0dd5-5e35-4152-b454-911f5f5b80b3</subsheetid>
    <loginhibit />
    <display x="15" y="585" />
    <onsuccess>d0975ae5-acec-465f-90b3-73e4f9e089ad</onsuccess>
    <steps>
      <calculation expression="[Indsatser.children]" stage="Indsatser" />
    </steps>
  </stage>
  <stage stageid="d0975ae5-acec-465f-90b3-73e4f9e089ad" name="Anchor7" type="Anchor">
    <subsheetid>2a8b0dd5-5e35-4152-b454-911f5f5b80b3</subsheetid>
    <loginhibit />
    <display x="15" y="615" w="10" h="10" />
    <onsuccess>6b694578-c923-4a0b-8d20-4bb44bcecb0b</onsuccess>
  </stage>
  <stage stageid="ff887f78-ae16-4348-a316-70f9f84a7ceb" name="Anchor10" type="Anchor">
    <subsheetid>2a8b0dd5-5e35-4152-b454-911f5f5b80b3</subsheetid>
    <loginhibit />
    <display x="75" y="540" w="10" h="10" />
    <onsuccess>a68b0cb8-46fa-4e76-9eef-89fedb374804</onsuccess>
  </stage>
  <stage stageid="a68b0cb8-46fa-4e76-9eef-89fedb374804" name="Anchor14" type="Anchor">
    <subsheetid>2a8b0dd5-5e35-4152-b454-911f5f5b80b3</subsheetid>
    <loginhibit />
    <display x="75" y="615" w="10" h="10" />
    <onsuccess>d0975ae5-acec-465f-90b3-73e4f9e089ad</onsuccess>
  </stage>
  <stage stageid="3f7295fd-f118-4e5a-9a4f-92a89940c07d" name="Aktiviteter" type="Collection">
    <subsheetid>ee9739d7-5eaa-493a-9ce1-f18ffd4b92fa</subsheetid>
    <loginhibit />
    <display x="-195" y="510" w="120" h="30" />
    <datatype>collection</datatype>
    <private />
    <alwaysinit />
  </stage>
  <stage stageid="41d3d1f2-c7ac-4609-a98a-6a82b9b9862e" name="Antal aktiviteter" type="Data">
    <subsheetid>ee9739d7-5eaa-493a-9ce1-f18ffd4b92fa</subsheetid>
    <display x="-195" y="555" w="120" h="30" />
    <datatype>number</datatype>
    <initialvalue>0</initialvalue>
    <private />
    <alwaysinit />
  </stage>
  <stage stageid="b24b60a3-a3a1-4355-a904-0a3692a378a9" name="Aktiviteter" type="Block">
    <subsheetid>ee9739d7-5eaa-493a-9ce1-f18ffd4b92fa</subsheetid>
    <loginhibit />
    <display x="-90" y="330" w="315" h="165" />
    <font family="Segoe UI" size="10" style="Regular" color="7FB2E5" />
  </stage>
  <stage stageid="21f7965d-ed0d-4a4c-a237-ed8c0298e26c" name="Nexus - Core::Get (activities)" type="Action">
    <subsheetid>ee9739d7-5eaa-493a-9ce1-f18ffd4b92fa</subsheetid>
    <loginhibit onsuccess="true" />
    <display x="15" y="450" />
    <inputs>
      <input type="text" name="Url" friendlyname="Url" expr="[Pathway._links.patientActivities]" />
    </inputs>
    <outputs>
      <output type="collection" name="Data" friendlyname="Data" stage="Aktiviteter" />
      <output type="number" name="Antal" friendlyname="Antal" stage="Antal aktiviteter" />
      <output type="text" name="Json" friendlyname="Json" narrative="Det rå json output" stage="" />
      <output type="number" name="Statuskode" friendlyname="Statuskode" narrative="Http statuskoden for kaldet" stage="" />
    </outputs>
    <onsuccess>c6614c22-9278-41e1-acb4-f63d64dea439</onsuccess>
    <resource object="Nexus - Core" action="Get" />
  </stage>
  <stage stageid="20faa708-b90b-4915-8e40-f98ee20c7aed" name="Har denne pathway aktiviteter?" type="Action">
    <subsheetid>ee9739d7-5eaa-493a-9ce1-f18ffd4b92fa</subsheetid>
    <loginhibit onsuccess="true" />
    <display x="15" y="360" />
    <inputs>
      <input type="collection" name="Input Collection" friendlyname="Input Collection" narrative="The collection to check." expr="[Pathway._links]" />
      <input type="text" name="Field" friendlyname="Field" narrative="The field to check for." expr="&quot;patientActivities&quot;" />
    </inputs>
    <outputs>
      <output type="flag" name="Exists" friendlyname="Exists" narrative="True if the collection contains the field." stage="Felt?" />
    </outputs>
    <onsuccess>90471220-66fc-4663-bf79-7af9a8a43af7</onsuccess>
    <resource object="Utility - Collection Manipulation" action="Field Exists" />
  </stage>
  <stage stageid="90471220-66fc-4663-bf79-7af9a8a43af7" name="Aktiviteter?" type="Decision">
    <subsheetid>ee9739d7-5eaa-493a-9ce1-f18ffd4b92fa</subsheetid>
    <loginhibit />
    <display x="15" y="405" />
    <decision expression="[Felt?]" />
    <ontrue>21f7965d-ed0d-4a4c-a237-ed8c0298e26c</ontrue>
    <onfalse>dda95c39-e76a-4506-bb84-0805b906d036</onfalse>
  </stage>
  <stage stageid="c6614c22-9278-41e1-acb4-f63d64dea439" name="Anchor6" type="Anchor">
    <subsheetid>ee9739d7-5eaa-493a-9ce1-f18ffd4b92fa</subsheetid>
    <loginhibit />
    <display x="15" y="480" w="10" h="10" />
    <onsuccess>f3829399-66ca-4727-98e2-274e17fb958b</onsuccess>
  </stage>
  <stage stageid="550d84f3-4b92-4970-87c7-83ecfef2353c" name="Anchor8" type="Anchor">
    <subsheetid>ee9739d7-5eaa-493a-9ce1-f18ffd4b92fa</subsheetid>
    <loginhibit />
    <display x="105" y="480" w="10" h="10" />
    <onsuccess>c6614c22-9278-41e1-acb4-f63d64dea439</onsuccess>
  </stage>
  <stage stageid="dda95c39-e76a-4506-bb84-0805b906d036" name="Antal = 0" type="Calculation">
    <subsheetid>ee9739d7-5eaa-493a-9ce1-f18ffd4b92fa</subsheetid>
    <loginhibit />
    <display x="105" y="405" />
    <onsuccess>550d84f3-4b92-4970-87c7-83ecfef2353c</onsuccess>
    <calculation expression="0" stage="Antal" />
  </stage>
  <stage stageid="59e7ea3b-0497-477d-a694-213f105e3821" name="Antal" type="Data">
    <subsheetid>ee9739d7-5eaa-493a-9ce1-f18ffd4b92fa</subsheetid>
    <display x="-195" y="255" w="120" h="30" />
    <datatype>number</datatype>
    <initialvalue />
    <private />
    <alwaysinit />
  </stage>
  <stage stageid="11a8357e-1cf0-4b4b-bf2e-7719f17f7217" name="Opret borger" type="SubSheetInfo">
    <subsheetid>9a14cc87-1eb9-4345-bf39-4e8fdbe6b633</subsheetid>
    <display x="-195" y="-105" w="150" h="90" />
  </stage>
  <stage stageid="b1fc6db6-7ecb-422d-bc65-eec70dfcb4ab" name="End" type="End">
    <subsheetid>9a14cc87-1eb9-4345-bf39-4e8fdbe6b633</subsheetid>
    <loginhibit />
    <display x="15" y="330" />
    <outputs>
      <output type="flag" name="Succes" stage="Succes" />
      <output type="collection" name="Borger" stage="Borger" />
    </outputs>
  </stage>
  <stage stageid="a256fc46-895a-4b3a-9871-a63c19e2bd25" name="Input" type="Block">
    <subsheetid>9a14cc87-1eb9-4345-bf39-4e8fdbe6b633</subsheetid>
    <display x="-270" y="-45" w="150" h="60" />
    <font family="Segoe UI" size="10" style="Regular" color="339966" />
  </stage>
  <stage stageid="3f8798f1-21a2-4a22-8c48-5acb6df79cee" name="Variabler" type="Block">
    <subsheetid>9a14cc87-1eb9-4345-bf39-4e8fdbe6b633</subsheetid>
    <display x="-270" y="90" w="150" h="150" />
    <font family="Segoe UI" size="10" style="Regular" color="666699" />
  </stage>
  <stage stageid="5c453bb5-5dae-45fd-a6c4-6bdc23938a16" name="Konstanter" type="Block">
    <subsheetid>9a14cc87-1eb9-4345-bf39-4e8fdbe6b633</subsheetid>
    <display x="-270" y="30" w="150" h="45" />
    <font family="Segoe UI" size="10" style="Regular" color="008080" />
  </stage>
  <stage stageid="6f3ddb69-2be9-4524-8622-3f2d5ced8085" name="Output" type="Block">
    <subsheetid>9a14cc87-1eb9-4345-bf39-4e8fdbe6b633</subsheetid>
    <display x="-270" y="255" w="150" h="105" />
    <font family="Segoe UI" size="10" style="Regular" color="800080" />
  </stage>
  <stage stageid="43ab6359-f21d-4945-9ea0-e7b19c4db261" name="Cpr" type="Data">
    <subsheetid>9a14cc87-1eb9-4345-bf39-4e8fdbe6b633</subsheetid>
    <display x="-195" y="-15" w="120" h="30" />
    <datatype>text</datatype>
    <initialvalue />
    <private />
    <alwaysinit />
  </stage>
  <stage stageid="bd129d75-0bf4-4daa-8521-95ae72ca0577" name="Succes" type="Data">
    <subsheetid>9a14cc87-1eb9-4345-bf39-4e8fdbe6b633</subsheetid>
    <display x="-195" y="285" w="120" h="30" />
    <datatype>flag</datatype>
    <initialvalue>False</initialvalue>
    <private />
    <alwaysinit />
  </stage>
  <stage stageid="98007951-80db-4006-9189-52fff8a757e4" name="Borger" type="Collection">
    <subsheetid>9a14cc87-1eb9-4345-bf39-4e8fdbe6b633</subsheetid>
    <display x="-195" y="330" w="120" h="30" />
    <datatype>collection</datatype>
    <private />
    <alwaysinit />
  </stage>
  <stage stageid="c3c985d6-8cac-4772-96ed-63a1e0cc4d49" name="Start" type="Start">
    <subsheetid>9a14cc87-1eb9-4345-bf39-4e8fdbe6b633</subsheetid>
    <loginhibit />
    <display x="15" y="-135" />
    <inputs>
      <input type="text" name="Cpr" stage="Cpr" />
    </inputs>
    <onsuccess>bd1e19ea-4cc7-4b26-adcb-4c7999663430</onsuccess>
  </stage>
  <stage stageid="25dfaf4c-75f0-4ea9-a7e5-04b12972cf98" name="Hent cpr" type="Action">
    <subsheetid>9a14cc87-1eb9-4345-bf39-4e8fdbe6b633</subsheetid>
    <loginhibit onsuccess="true" />
    <display x="15" y="-60" />
    <inputs>
      <input type="text" name="Target" friendlyname="Target" narrative="the string to search for a cpr number" expr="[Cpr]" />
    </inputs>
    <outputs>
      <output type="text" name="Cpr" friendlyname="Cpr" narrative="The cpr number found by the search" stage="Cpr" />
    </outputs>
    <onsuccess>e8c828e5-7a85-495a-9090-eecc562e3063</onsuccess>
    <resource object="Utility - Odk" action="String: Extract cpr" />
  </stage>
  <stage stageid="e8c828e5-7a85-495a-9090-eecc562e3063" name="Har vi cpr?" type="Decision">
    <subsheetid>9a14cc87-1eb9-4345-bf39-4e8fdbe6b633</subsheetid>
    <loginhibit />
    <display x="15" y="-15" />
    <decision expression="[Cpr] &lt;&gt; &quot;&quot;" />
    <ontrue>08df75f5-0174-4ac0-8f7f-bd8489cfba14</ontrue>
    <onfalse>0fb8cfe9-7038-4fad-95f0-36abd6addea7</onfalse>
  </stage>
  <stage stageid="0fb8cfe9-7038-4fad-95f0-36abd6addea7" name="Ugyldigt cpr" type="Exception">
    <subsheetid>9a14cc87-1eb9-4345-bf39-4e8fdbe6b633</subsheetid>
    <display x="180" y="-15" />
    <exception localized="yes" type="Invalid Input Parameter" detail="&quot;Cpr er er ikke gyldigt&quot;" />
  </stage>
  <stage stageid="5c011ec1-51fb-41e9-9a93-878da4fadeed" name="Cpr validering" type="Block">
    <subsheetid>9a14cc87-1eb9-4345-bf39-4e8fdbe6b633</subsheetid>
    <loginhibit />
    <display x="-90" y="-90" w="225" h="105" />
    <font family="Segoe UI" size="10" style="Regular" color="7FB2E5" />
  </stage>
  <stage stageid="9fefb749-2428-4395-a974-a0557087fd24" name="Get - borger prototype" type="Action">
    <subsheetid>9a14cc87-1eb9-4345-bf39-4e8fdbe6b633</subsheetid>
    <loginhibit onsuccess="true" />
    <display x="15" y="105" />
    <inputs>
      <input type="text" name="Url" friendlyname="Url" expr="[Url] &amp; &quot;/prototypeBasedOnCprSystem?cpr=&quot; &amp; [Cpr]" />
    </inputs>
    <outputs>
      <output type="collection" name="Data" friendlyname="Data" stage="" />
      <output type="number" name="Antal" friendlyname="Antal" stage="" />
      <output type="text" name="Json" friendlyname="Json" narrative="Det rå json output" stage="Prototype (json)" />
      <output type="number" name="Statuskode" friendlyname="Statuskode" narrative="Http statuskoden for kaldet" stage="Statuskode" />
    </outputs>
    <onsuccess>83e181c3-50df-4ae5-a744-095031f258bd</onsuccess>
    <resource object="Nexus - Core" action="Get" />
  </stage>
  <stage stageid="dda10d13-e974-4895-bc79-6f38441aec22" name="Nexus - Core::Start" type="Action">
    <subsheetid>9a14cc87-1eb9-4345-bf39-4e8fdbe6b633</subsheetid>
    <loginhibit onsuccess="true" />
    <display x="120" y="-210" />
    <inputs>
      <input type="text" name="Credentials" friendlyname="Credentials" expr="&quot;KMD Nexus - produktion&quot;" />
    </inputs>
    <onsuccess>0a8c9543-921a-4297-98f0-59d421af2016</onsuccess>
    <resource object="Nexus - Core" action="Start" />
  </stage>
  <stage stageid="0a8c9543-921a-4297-98f0-59d421af2016" name="Debug - ????" type="Calculation">
    <subsheetid>9a14cc87-1eb9-4345-bf39-4e8fdbe6b633</subsheetid>
    <loginhibit />
    <display x="120" y="-165" />
    <onsuccess>ae08aa8a-36a2-4954-821e-027e0205c019</onsuccess>
    <calculation expression="&quot;xxxxxxxxxx&quot;" stage="Cpr" />
  </stage>
  <stage stageid="ae08aa8a-36a2-4954-821e-027e0205c019" name="Anchor2" type="Anchor">
    <subsheetid>9a14cc87-1eb9-4345-bf39-4e8fdbe6b633</subsheetid>
    <loginhibit />
    <display x="120" y="-105" w="10" h="10" />
    <onsuccess>bd1e19ea-4cc7-4b26-adcb-4c7999663430</onsuccess>
  </stage>
  <stage stageid="db6e71cf-4be3-4a7e-aa47-a96ebd823067" name="Debug" type="Block">
    <subsheetid>9a14cc87-1eb9-4345-bf39-4e8fdbe6b633</subsheetid>
    <loginhibit />
    <display x="75" y="-240" w="90" h="105" />
    <font family="Segoe UI" size="10" style="Regular" color="FFFF99" />
  </stage>
  <stage stageid="bd1e19ea-4cc7-4b26-adcb-4c7999663430" name="Anchor2" type="Anchor">
    <subsheetid>9a14cc87-1eb9-4345-bf39-4e8fdbe6b633</subsheetid>
    <loginhibit />
    <display x="15" y="-105" w="10" h="10" />
    <onsuccess>25dfaf4c-75f0-4ea9-a7e5-04b12972cf98</onsuccess>
  </stage>
  <stage stageid="08df75f5-0174-4ac0-8f7f-bd8489cfba14" name="Hent patients url" type="Action">
    <subsheetid>9a14cc87-1eb9-4345-bf39-4e8fdbe6b633</subsheetid>
    <loginhibit onsuccess="true" />
    <display x="15" y="60" />
    <inputs>
      <input type="text" name="Navn" friendlyname="Navn" narrative="navn på det globale rod api" expr="&quot;patients&quot;" />
    </inputs>
    <outputs>
      <output type="text" name="Url" friendlyname="Url" stage="Url" />
    </outputs>
    <onsuccess>9fefb749-2428-4395-a974-a0557087fd24</onsuccess>
    <resource object="Nexus - Core" action="Api url" />
  </stage>
  <stage stageid="aca9f86b-370d-4c55-94b9-35c9e179db5c" name="Hent prototype" type="Block">
    <subsheetid>9a14cc87-1eb9-4345-bf39-4e8fdbe6b633</subsheetid>
    <loginhibit />
    <display x="-90" y="30" w="225" h="150" />
    <font family="Segoe UI" size="10" style="Regular" color="7FB2E5" />
  </stage>
  <stage stageid="03a923de-2292-4049-9d6f-b135687ae7a5" name="Url" type="Data">
    <subsheetid>9a14cc87-1eb9-4345-bf39-4e8fdbe6b633</subsheetid>
    <display x="-195" y="120" w="120" h="30" />
    <datatype>text</datatype>
    <initialvalue />
    <private />
    <alwaysinit />
  </stage>
  <stage stageid="c218a966-29c9-4073-92ff-63d53347f0d1" name="Prototype (json)" type="Data">
    <subsheetid>9a14cc87-1eb9-4345-bf39-4e8fdbe6b633</subsheetid>
    <display x="-195" y="165" w="120" h="30" />
    <datatype>text</datatype>
    <initialvalue />
    <private />
    <alwaysinit />
  </stage>
  <stage stageid="251393b5-add2-4702-8266-ff6dc7bc3961" name="Statuskode" type="Data">
    <subsheetid>9a14cc87-1eb9-4345-bf39-4e8fdbe6b633</subsheetid>
    <display x="-195" y="210" w="120" h="30" />
    <datatype>number</datatype>
    <initialvalue />
    <private />
    <alwaysinit />
  </stage>
  <stage stageid="bcf68027-dbd5-410f-a688-dfafd358325c" name="Sæt succes" type="Calculation">
    <subsheetid>9a14cc87-1eb9-4345-bf39-4e8fdbe6b633</subsheetid>
    <loginhibit />
    <display x="15" y="285" />
    <onsuccess>b1fc6db6-7ecb-422d-bc65-eec70dfcb4ab</onsuccess>
    <calculation expression="[Statuskode] = 200" stage="Succes" />
  </stage>
  <stage stageid="83e181c3-50df-4ae5-a744-095031f258bd" name="Har vi prototype?" type="Decision">
    <subsheetid>9a14cc87-1eb9-4345-bf39-4e8fdbe6b633</subsheetid>
    <loginhibit />
    <display x="15" y="150" />
    <decision expression="[Statuskode] = 200" />
    <ontrue>22f9f6ed-a19c-4d02-846c-50ff9ffa8dc9</ontrue>
    <onfalse>c8661dfc-bbb8-4409-9284-92086c188ce5</onfalse>
  </stage>
  <stage stageid="22f9f6ed-a19c-4d02-846c-50ff9ffa8dc9" name="Post - opret borger" type="Action">
    <subsheetid>9a14cc87-1eb9-4345-bf39-4e8fdbe6b633</subsheetid>
    <loginhibit onsuccess="true" />
    <display x="15" y="225" />
    <inputs>
      <input type="text" name="Url" friendlyname="Url" expr="[Url]" />
      <input type="text" name="Body" friendlyname="Body" expr="[Prototype (json)]" />
    </inputs>
    <outputs>
      <output type="collection" name="Data" friendlyname="Data" stage="Borger" />
      <output type="number" name="Antal" friendlyname="Antal" stage="" />
      <output type="text" name="Json" friendlyname="Json" narrative="Det rå json output" stage="" />
      <output type="number" name="Statuskode" friendlyname="Statuskode" narrative="Http statuskoden for kaldet" stage="Statuskode" />
    </outputs>
    <onsuccess>bcf68027-dbd5-410f-a688-dfafd358325c</onsuccess>
    <resource object="Nexus - Core" action="Post" />
  </stage>
  <stage stageid="c8661dfc-bbb8-4409-9284-92086c188ce5" name="End3" type="End">
    <subsheetid>9a14cc87-1eb9-4345-bf39-4e8fdbe6b633</subsheetid>
    <loginhibit />
    <display x="180" y="150" />
    <outputs>
      <output type="flag" name="Succes" stage="Succes" />
      <output type="collection" name="Borger" stage="Borger" />
    </outputs>
  </stage>
  <stage stageid="855ca266-6f95-482e-9c78-e76e56264520" name="Opret borger" type="Block">
    <subsheetid>9a14cc87-1eb9-4345-bf39-4e8fdbe6b633</subsheetid>
    <loginhibit />
    <display x="-90" y="195" w="225" h="60" />
    <font family="Segoe UI" size="10" style="Regular" color="7FB2E5" />
  </stage>
  <stage stageid="fbb2c8a7-cb50-4ccc-82bf-814c7d53cad5" name="Opret dokument" type="SubSheetInfo">
    <subsheetid>2603825d-13ba-4624-8fe1-c2da14ae1e7e</subsheetid>
    <narrative>Virker kun på aktive forløb og absolute path til filer</narrative>
    <display x="-195" y="-105" w="150" h="90" />
  </stage>
  <stage stageid="3d942bcb-8abc-4c82-a592-392a78f34eda" name="Variabler" type="Block">
    <subsheetid>2603825d-13ba-4624-8fe1-c2da14ae1e7e</subsheetid>
    <display x="-270" y="420" w="150" h="195" />
    <font family="Segoe UI" size="10" style="Regular" color="666699" />
  </stage>
  <stage stageid="55596cad-1575-4b60-bda7-fbfeb25a097e" name="Konstanter" type="Block">
    <subsheetid>2603825d-13ba-4624-8fe1-c2da14ae1e7e</subsheetid>
    <display x="-270" y="345" w="150" h="60" />
    <font family="Segoe UI" size="10" style="Regular" color="008080" />
  </stage>
  <stage stageid="ce7e963d-ba59-48a6-b70a-59d61e6278d5" name="Output" type="Block">
    <subsheetid>2603825d-13ba-4624-8fe1-c2da14ae1e7e</subsheetid>
    <display x="-270" y="630" w="150" h="195" />
    <font family="Segoe UI" size="10" style="Regular" color="800080" />
  </stage>
  <stage stageid="c626f7d9-c0c7-4d0e-a995-c47d0701ab9b" name="Input" type="Block">
    <subsheetid>2603825d-13ba-4624-8fe1-c2da14ae1e7e</subsheetid>
    <display x="-270" y="-45" w="150" h="375" />
    <font family="Segoe UI" size="10" style="Regular" color="339966" />
  </stage>
  <stage stageid="8201627e-a67d-459e-83f3-1c723b812501" name="Navn" type="Data">
    <subsheetid>2603825d-13ba-4624-8fe1-c2da14ae1e7e</subsheetid>
    <display x="-195" y="210" w="120" h="30" />
    <datatype>text</datatype>
    <initialvalue />
    <private />
    <alwaysinit />
  </stage>
  <stage stageid="6d997334-cc5e-4fc2-9f00-d53b75431984" name="Noter" type="Data">
    <subsheetid>2603825d-13ba-4624-8fe1-c2da14ae1e7e</subsheetid>
    <display x="-195" y="255" w="120" h="30" />
    <datatype>text</datatype>
    <initialvalue />
    <private />
    <alwaysinit />
  </stage>
  <stage stageid="4b15314f-aec0-4fff-ac46-cd75a665546a" name="Modtaget" type="Data">
    <subsheetid>2603825d-13ba-4624-8fe1-c2da14ae1e7e</subsheetid>
    <display x="-195" y="300" w="120" h="30" />
    <datatype>date</datatype>
    <initialvalue />
    <private />
    <alwaysinit />
  </stage>
  <stage stageid="9fd1e03e-29ce-455f-95f7-6d4301e25bd5" name="Originalt filnavn" type="Data">
    <subsheetid>2603825d-13ba-4624-8fe1-c2da14ae1e7e</subsheetid>
    <display x="-195" y="165" w="120" h="30" />
    <datatype>text</datatype>
    <initialvalue />
    <private />
    <alwaysinit />
  </stage>
  <stage stageid="701c751d-75ba-49fc-9bbd-e1d91b9f3b7f" name="Start" type="Start">
    <subsheetid>2603825d-13ba-4624-8fe1-c2da14ae1e7e</subsheetid>
    <loginhibit />
    <display x="0" y="-135" />
    <inputs>
      <input type="collection" name="Borger" stage="Borger" />
      <input type="collection" name="Forløb" stage="Forløb" />
      <input type="binary" name="Fil" stage="Fil" />
      <input type="text" name="Indholdstype" stage="Indholdstype" />
      <input type="text" name="Filnavn" stage="Originalt filnavn" />
      <input type="text" name="Navn" narrative="Dette er navnet der fremgår af Nexus" stage="Navn" />
      <input type="text" name="Noter" stage="Noter" />
      <input type="date" name="Modtaget" stage="Modtaget" />
    </inputs>
    <onsuccess>b1774523-78ca-4ae8-9ce2-573da2bfc20d</onsuccess>
  </stage>
  <stage stageid="bb03bb14-d0c8-4361-abfd-5b839a9d3246" name="Opret dokument" type="Block">
    <subsheetid>2603825d-13ba-4624-8fe1-c2da14ae1e7e</subsheetid>
    <loginhibit />
    <display x="-75" y="-105" w="150" h="195" />
    <font family="Segoe UI" size="10" style="Regular" color="7FB2E5" />
  </stage>
  <stage stageid="dd25addd-e868-47dd-8f88-31a37be8eabf" name="Upload fil" type="Block">
    <subsheetid>2603825d-13ba-4624-8fe1-c2da14ae1e7e</subsheetid>
    <loginhibit />
    <display x="-75" y="105" w="150" h="105" />
    <font family="Segoe UI" size="10" style="Regular" color="7FB2E5" />
  </stage>
  <stage stageid="d2a2602e-d55b-4432-85b4-66c9a73d46f0" name="End4" type="End">
    <subsheetid>2603825d-13ba-4624-8fe1-c2da14ae1e7e</subsheetid>
    <loginhibit />
    <display x="0" y="240" />
    <outputs>
      <output type="number" name="Antal" stage="Antal" />
      <output type="text" name="Json" stage="Dokument (json)" />
      <output type="collection" name="Uploaded dokument" stage="Dokument" />
      <output type="flag" name="Succes" stage="Succes" />
    </outputs>
  </stage>
  <stage stageid="c1f440b3-9469-4d8a-97c6-2f7ff5dee58a" name="Forløb" type="Collection">
    <subsheetid>2603825d-13ba-4624-8fe1-c2da14ae1e7e</subsheetid>
    <loginhibit />
    <display x="-195" y="30" w="120" h="30" />
    <datatype>collection</datatype>
    <private />
    <alwaysinit />
  </stage>
  <stage stageid="6121ef5b-d9ff-4528-afa6-6be6e529d627" name="Filtrer referencer" type="SubSheetInfo">
    <subsheetid>1d658246-3945-476b-836d-924fa5946298</subsheetid>
    <display x="-195" y="-105" w="150" h="90" />
  </stage>
  <stage stageid="82d87516-a5f0-49e8-aee8-ff956409f106" name="Start" type="Start">
    <subsheetid>1d658246-3945-476b-836d-924fa5946298</subsheetid>
    <loginhibit />
    <display x="0" y="-135" />
    <inputs>
      <input type="text" name="Referencer (json)" narrative="Referencerne som json" stage="Referencer (json)" />
      <input type="text" name="Filter" narrative="/x/y/*/z" stage="Filter" />
      <input type="flag" name="Kun aktive forløb" stage="Kun aktive forløb" />
    </inputs>
    <onsuccess>002149b9-68b6-4550-b71b-2b51156cba86</onsuccess>
  </stage>
  <stage stageid="30327b87-8d2c-4ff4-bcc8-24e95e9997ad" name="End" type="End">
    <subsheetid>1d658246-3945-476b-836d-924fa5946298</subsheetid>
    <loginhibit />
    <display x="0" y="90" />
    <outputs>
      <output type="collection" name="Referencer" stage="Referencer" />
      <output type="number" name="Antal" stage="Antal" />
      <output type="text" name="Referencer (json)" stage="Json" />
    </outputs>
  </stage>
  <stage stageid="da74935b-817e-4bef-b4f4-2be65dcd1e85" name="Filtrer referencer" type="Code">
    <subsheetid>1d658246-3945-476b-836d-924fa5946298</subsheetid>
    <loginhibit onsuccess="true" />
    <display x="0" y="-60" />
    <inputs>
      <input type="text" name="filter" expr="[Filter]" />
      <input type="text" name="references" expr="[Referencer (json)]" />
      <input type="flag" name="active_pathways_only" expr="[Kun aktive forløb]" />
    </inputs>
    <outputs>
      <output type="text" name="json" stage="Json" />
    </outputs>
    <onsuccess>7e9f30aa-b033-4ee1-b3be-de7f97dabed8</onsuccess>
    <code><![CDATA[json = FilterReferences(references, filter, active_pathways_only).ToString();]]></code>
  </stage>
  <stage stageid="c2f152bf-91e2-4350-86d3-7b7c484dcc27" name="Input" type="Block">
    <subsheetid>1d658246-3945-476b-836d-924fa5946298</subsheetid>
    <display x="-270" y="-45" w="150" h="150" />
    <font family="Segoe UI" size="10" style="Regular" color="339966" />
  </stage>
  <stage stageid="8bf5e270-9868-4369-9b39-8b6f5695e4c8" name="Variabler" type="Block">
    <subsheetid>1d658246-3945-476b-836d-924fa5946298</subsheetid>
    <display x="-270" y="180" w="150" h="45" />
    <font family="Segoe UI" size="10" style="Regular" color="666699" />
  </stage>
  <stage stageid="65d65dba-85fb-4a20-9f64-c7c396927f6b" name="Konstanter" type="Block">
    <subsheetid>1d658246-3945-476b-836d-924fa5946298</subsheetid>
    <display x="-270" y="120" w="150" h="45" />
    <font family="Segoe UI" size="10" style="Regular" color="008080" />
  </stage>
  <stage stageid="e90e4ca1-c712-45c4-9584-62316b3930fe" name="Output" type="Block">
    <subsheetid>1d658246-3945-476b-836d-924fa5946298</subsheetid>
    <display x="-270" y="240" w="150" h="150" />
    <font family="Segoe UI" size="10" style="Regular" color="800080" />
  </stage>
  <stage stageid="60040db6-cef0-4a6d-b3fb-f40a9a3bacc9" name="Referencer (json)" type="Data">
    <subsheetid>1d658246-3945-476b-836d-924fa5946298</subsheetid>
    <display x="-195" y="-15" w="120" h="30" />
    <datatype>text</datatype>
    <initialvalue />
    <private />
    <alwaysinit />
  </stage>
  <stage stageid="b976ed5f-7a2c-4325-a8de-6150d5b6aaee" name="Filter" type="Data">
    <subsheetid>1d658246-3945-476b-836d-924fa5946298</subsheetid>
    <display x="-195" y="30" w="120" h="30" />
    <datatype>text</datatype>
    <initialvalue />
    <private />
    <alwaysinit />
  </stage>
  <stage stageid="093b53cc-6515-425d-8f77-a13c05c06e0c" name="Filtrer (se global code)" type="Block">
    <subsheetid>1d658246-3945-476b-836d-924fa5946298</subsheetid>
    <loginhibit />
    <display x="-75" y="-90" w="150" h="150" />
    <font family="Segoe UI" size="10" style="Regular" color="7FB2E5" />
  </stage>
  <stage stageid="f55c0408-5b2c-41d1-b87f-342894e13662" name="Nexus - Core::Start" type="Action">
    <subsheetid>1d658246-3945-476b-836d-924fa5946298</subsheetid>
    <loginhibit onsuccess="true" />
    <display x="120" y="-285" />
    <inputs>
      <input type="text" name="Credentials" friendlyname="Credentials" expr="&quot;KMD Nexus - produktion&quot;" />
    </inputs>
    <onsuccess>5fcab355-7fd0-41c1-9146-6777e91f8b2b</onsuccess>
    <resource object="Nexus - Core" action="Start" />
  </stage>
  <stage stageid="6c6d10e9-8e3a-47e8-aa91-135197bc53ae" name="Debug" type="Block">
    <subsheetid>1d658246-3945-476b-836d-924fa5946298</subsheetid>
    <loginhibit />
    <display x="75" y="-315" w="165" h="195" />
    <font family="Segoe UI" size="10" style="Regular" color="FFFF99" />
  </stage>
  <stage stageid="5fcab355-7fd0-41c1-9146-6777e91f8b2b" name="Hent borger" type="SubSheet">
    <subsheetid>1d658246-3945-476b-836d-924fa5946298</subsheetid>
    <loginhibit />
    <display x="120" y="-240" />
    <inputs>
      <input type="text" name="Cpr" friendlyname="Cpr" expr="&quot;xxxxxxxxxx&quot;" />
    </inputs>
    <outputs>
      <output type="collection" name="Borger" friendlyname="Borger" stage="Borger" />
    </outputs>
    <onsuccess>2752bd5e-2489-43a7-822a-78d38a218375</onsuccess>
    <processid>d5cc0f3c-1d67-4f5b-a83a-08a4b9574114</processid>
  </stage>
  <stage stageid="2752bd5e-2489-43a7-822a-78d38a218375" name="Hent referencer" type="SubSheet">
    <subsheetid>1d658246-3945-476b-836d-924fa5946298</subsheetid>
    <loginhibit />
    <display x="120" y="-195" />
    <inputs>
      <input type="collection" name="Borger" friendlyname="Borger" expr="[Borger]" />
      <input type="text" name="Pathway" friendlyname="Pathway" narrative="Default &quot;-Alt&quot;" expr="&quot;-Alt&quot;" />
    </inputs>
    <outputs>
      <output type="collection" name="Pathway" friendlyname="Pathway" stage="" />
      <output type="collection" name="Referencer" friendlyname="Referencer" stage="Referencer" />
      <output type="text" name="Referencer (json)" friendlyname="Referencer (json)" narrative="Referencer som rå json" stage="Referencer (json)" />
      <output type="number" name="Antal referencer" friendlyname="Antal referencer" stage="" />
      <output type="collection" name="Aktiviteter" friendlyname="Aktiviteter" stage="" />
      <output type="number" name="Antal aktiviteter" friendlyname="Antal aktiviteter" stage="" />
    </outputs>
    <onsuccess>e8012788-dfb1-4f08-b3e0-eccc08b06540</onsuccess>
    <processid>ee9739d7-5eaa-493a-9ce1-f18ffd4b92fa</processid>
  </stage>
  <stage stageid="002149b9-68b6-4550-b71b-2b51156cba86" name="Anchor15" type="Anchor">
    <subsheetid>1d658246-3945-476b-836d-924fa5946298</subsheetid>
    <loginhibit />
    <display x="0" y="-105" w="10" h="10" />
    <onsuccess>da74935b-817e-4bef-b4f4-2be65dcd1e85</onsuccess>
  </stage>
  <stage stageid="fdba8486-9057-4b4e-b986-df2048983c00" name="Anchor16" type="Anchor">
    <subsheetid>1d658246-3945-476b-836d-924fa5946298</subsheetid>
    <loginhibit />
    <display x="120" y="-105" w="10" h="10" />
    <onsuccess>002149b9-68b6-4550-b71b-2b51156cba86</onsuccess>
  </stage>
  <stage stageid="bbef69d4-7187-4306-9f4b-23d27778dccf" name="Borger" type="Collection">
    <subsheetid>1d658246-3945-476b-836d-924fa5946298</subsheetid>
    <display x="195" y="-285" />
    <datatype>collection</datatype>
    <private />
    <alwaysinit />
  </stage>
  <stage stageid="e8012788-dfb1-4f08-b3e0-eccc08b06540" name="Sæt filter" type="Calculation">
    <subsheetid>1d658246-3945-476b-836d-924fa5946298</subsheetid>
    <loginhibit />
    <display x="120" y="-150" />
    <onsuccess>fdba8486-9057-4b4e-b986-df2048983c00</onsuccess>
    <calculation expression="&quot;/Sundhedsfagligt grundforløb/*/Indsatser/*&quot;" stage="Filter" />
  </stage>
  <stage stageid="d62bc92d-2e35-44d5-a193-c2a0306051e0" name="Json" type="Data">
    <subsheetid>1d658246-3945-476b-836d-924fa5946298</subsheetid>
    <display x="-195" y="360" w="120" h="30" />
    <datatype>text</datatype>
    <initialvalue />
    <private />
    <alwaysinit />
  </stage>
  <stage stageid="43300b97-fe26-42a1-a38f-af63e112542e" name="Referencer" type="Collection">
    <subsheetid>1d658246-3945-476b-836d-924fa5946298</subsheetid>
    <loginhibit />
    <display x="-195" y="270" w="120" h="30" />
    <datatype>collection</datatype>
    <private />
    <alwaysinit />
  </stage>
  <stage stageid="7e9f30aa-b033-4ee1-b3be-de7f97dabed8" name="Konverter til collection" type="Action">
    <subsheetid>1d658246-3945-476b-836d-924fa5946298</subsheetid>
    <loginhibit onsuccess="true" />
    <display x="0" y="-15" />
    <inputs>
      <input type="text" name="Json" friendlyname="Json" expr="[Json]" />
    </inputs>
    <outputs>
      <output type="collection" name="Data" friendlyname="Data" stage="Referencer" />
    </outputs>
    <onsuccess>fbe54c4f-91a5-4298-8463-86a9326d768e</onsuccess>
    <resource object="Nexus - Core" action="Json to collection" />
  </stage>
  <stage stageid="fbe54c4f-91a5-4298-8463-86a9326d768e" name="Find antal" type="Action">
    <subsheetid>1d658246-3945-476b-836d-924fa5946298</subsheetid>
    <loginhibit onsuccess="true" />
    <display x="0" y="30" />
    <inputs>
      <input type="text" name="Collection Name" friendlyname="Collection Name" narrative="The name of the collection to act upon" expr="&quot;Referencer&quot;" />
    </inputs>
    <outputs>
      <output type="number" name="Count" friendlyname="Count" narrative="The number of rows counted in the collection" stage="Antal" />
    </outputs>
    <onsuccess>30327b87-8d2c-4ff4-bcc8-24e95e9997ad</onsuccess>
    <resource object="Blueprism.AutomateProcessCore.clsCollectionActions" action="Count Rows" />
  </stage>
  <stage stageid="7f2e02f7-d76b-4989-8d66-148862c1ae67" name="Antal" type="Data">
    <subsheetid>1d658246-3945-476b-836d-924fa5946298</subsheetid>
    <display x="-195" y="315" w="120" h="30" />
    <datatype>number</datatype>
    <initialvalue />
    <private />
    <alwaysinit />
  </stage>
  <stage stageid="f04cee54-014a-4c02-9617-55742b3a9107" name="Afslut forløb" type="SubSheetInfo">
    <subsheetid>250f85d6-ad56-4a54-b1a2-bb70b39329a3</subsheetid>
    <display x="-195" y="-105" w="150" h="90" />
  </stage>
  <stage stageid="0d7a7b1f-ffa5-49ef-b4a7-518fb1bc33af" name="Start" type="Start">
    <subsheetid>250f85d6-ad56-4a54-b1a2-bb70b39329a3</subsheetid>
    <loginhibit />
    <display x="15" y="-135" />
    <inputs>
      <input type="collection" name="Forløbsreference" stage="Forløbsreference" />
    </inputs>
    <onsuccess>4f76b5d3-d388-4ced-99c5-c5c9a238e4c1</onsuccess>
  </stage>
  <stage stageid="df601011-70fb-4c53-889e-9e89707ab0b8" name="End" type="End">
    <subsheetid>250f85d6-ad56-4a54-b1a2-bb70b39329a3</subsheetid>
    <loginhibit />
    <display x="15" y="240" />
    <outputs>
      <output type="flag" name="Succes" stage="Succes" />
    </outputs>
  </stage>
  <stage stageid="8387d6da-1bcc-46a1-aeb8-4f978beb856e" name="Input" type="Block">
    <subsheetid>250f85d6-ad56-4a54-b1a2-bb70b39329a3</subsheetid>
    <display x="-270" y="-45" w="150" h="60" />
    <font family="Segoe UI" size="10" style="Regular" color="339966" />
  </stage>
  <stage stageid="f18d7d29-5d37-449a-9c3f-2e1fe6f913ed" name="Variabler" type="Block">
    <subsheetid>250f85d6-ad56-4a54-b1a2-bb70b39329a3</subsheetid>
    <display x="-270" y="90" w="150" h="105" />
    <font family="Segoe UI" size="10" style="Regular" color="666699" />
  </stage>
  <stage stageid="c3d2a8ed-ffb7-4418-ba62-f50c49fcee42" name="Konstanter" type="Block">
    <subsheetid>250f85d6-ad56-4a54-b1a2-bb70b39329a3</subsheetid>
    <display x="-270" y="30" w="150" h="45" />
    <font family="Segoe UI" size="10" style="Regular" color="008080" />
  </stage>
  <stage stageid="ed526313-7236-4ae7-89c3-6c79ad4ec6a3" name="Output" type="Block">
    <subsheetid>250f85d6-ad56-4a54-b1a2-bb70b39329a3</subsheetid>
    <display x="-270" y="210" w="150" h="60" />
    <font family="Segoe UI" size="10" style="Regular" color="800080" />
  </stage>
  <stage stageid="0133589a-264c-4d71-a57d-b358ef945728" name="Forløbsreference" type="Collection">
    <subsheetid>250f85d6-ad56-4a54-b1a2-bb70b39329a3</subsheetid>
    <display x="-195" y="-15" w="120" h="30" />
    <datatype>collection</datatype>
    <private />
    <alwaysinit />
  </stage>
  <stage stageid="09924352-d320-4c18-b389-6fd0bb2945b9" name="Nexus - Core::Start" type="Action">
    <subsheetid>250f85d6-ad56-4a54-b1a2-bb70b39329a3</subsheetid>
    <loginhibit onsuccess="true" />
    <display x="180" y="-300" />
    <inputs>
      <input type="text" name="Credentials" friendlyname="Credentials" expr="&quot;KMD Nexus - produktion&quot;" />
    </inputs>
    <onsuccess>d00b2bd5-9c69-46e9-a085-ff27d4f68698</onsuccess>
    <resource object="Nexus - Core" action="Start" />
  </stage>
  <stage stageid="683452f4-a12d-4ef4-9bf4-1452b7270f55" name="Debug" type="Block">
    <subsheetid>250f85d6-ad56-4a54-b1a2-bb70b39329a3</subsheetid>
    <loginhibit />
    <display x="135" y="-330" w="180" h="195" />
    <font family="Segoe UI" size="10" style="Regular" color="FFFF99" />
  </stage>
  <stage stageid="d00b2bd5-9c69-46e9-a085-ff27d4f68698" name="Hent borger" type="SubSheet">
    <subsheetid>250f85d6-ad56-4a54-b1a2-bb70b39329a3</subsheetid>
    <loginhibit />
    <display x="180" y="-255" />
    <inputs>
      <input type="text" name="Cpr" friendlyname="Cpr" expr="&quot;xxxxxxxxxx&quot;" />
    </inputs>
    <outputs>
      <output type="collection" name="Borger" friendlyname="Borger" stage="Borger" />
    </outputs>
    <onsuccess>962dce40-1dbb-4b55-878b-443b2a6b2b0b</onsuccess>
    <processid>d5cc0f3c-1d67-4f5b-a83a-08a4b9574114</processid>
  </stage>
  <stage stageid="4f76b5d3-d388-4ced-99c5-c5c9a238e4c1" name="Anchor4" type="Anchor">
    <subsheetid>250f85d6-ad56-4a54-b1a2-bb70b39329a3</subsheetid>
    <loginhibit />
    <display x="15" y="-105" w="10" h="10" />
    <onsuccess>05f908cd-8eb3-46c1-9686-67f227aa8f29</onsuccess>
  </stage>
  <stage stageid="61f67785-ce44-435c-a195-afefc986b4ae" name="Borger" type="Collection">
    <subsheetid>250f85d6-ad56-4a54-b1a2-bb70b39329a3</subsheetid>
    <display x="255" y="-300" />
    <datatype>collection</datatype>
    <private />
    <alwaysinit />
  </stage>
  <stage stageid="1239250c-d153-465b-a3f7-5b230558bfc7" name="Referencer" type="Collection">
    <subsheetid>250f85d6-ad56-4a54-b1a2-bb70b39329a3</subsheetid>
    <loginhibit />
    <display x="255" y="-255" />
    <datatype>collection</datatype>
    <private />
    <alwaysinit />
  </stage>
  <stage stageid="962dce40-1dbb-4b55-878b-443b2a6b2b0b" name="Hent pathway" type="SubSheet">
    <subsheetid>250f85d6-ad56-4a54-b1a2-bb70b39329a3</subsheetid>
    <loginhibit />
    <display x="180" y="-210" />
    <inputs>
      <input type="collection" name="Borger" friendlyname="Borger" expr="[Borger]" />
      <input type="text" name="Pathway" friendlyname="Pathway" narrative="Default &quot;-Alt&quot;" expr="&quot;-Alt&quot;" />
    </inputs>
    <outputs>
      <output type="collection" name="Pathway" friendlyname="Pathway" stage="" />
      <output type="collection" name="Referencer" friendlyname="Referencer" stage="Referencer" />
      <output type="text" name="Referencer (json)" friendlyname="Referencer (json)" narrative="Referencer som rå json" stage="Referencer (json)" />
      <output type="number" name="Antal referencer" friendlyname="Antal referencer" stage="" />
      <output type="collection" name="Aktiviteter" friendlyname="Aktiviteter" stage="" />
      <output type="number" name="Antal aktiviteter" friendlyname="Antal aktiviteter" stage="" />
    </outputs>
    <onsuccess>b8b3874a-646a-4d91-b1bf-2280b0b4d93a</onsuccess>
    <processid>ee9739d7-5eaa-493a-9ce1-f18ffd4b92fa</processid>
  </stage>
  <stage stageid="59c802b2-d747-48b0-a3bc-472cd38618d4" name="Referencer (json)" type="Data">
    <subsheetid>250f85d6-ad56-4a54-b1a2-bb70b39329a3</subsheetid>
    <display x="255" y="-210" />
    <datatype>text</datatype>
    <initialvalue />
    <private />
    <alwaysinit />
  </stage>
  <stage stageid="b8b3874a-646a-4d91-b1bf-2280b0b4d93a" name="Filtrer referencer" type="SubSheet">
    <subsheetid>250f85d6-ad56-4a54-b1a2-bb70b39329a3</subsheetid>
    <loginhibit />
    <display x="180" y="-165" />
    <inputs>
      <input type="text" name="Referencer (json)" friendlyname="Referencer (json)" narrative="Referencerne som json" expr="[Referencer (json)]" />
      <input type="text" name="Filter" friendlyname="Filter" narrative="/x/y/*/z" expr="&quot;/Børn og Unge Grundforløb/Sag: Hjemmetræning SEL § 32 a&quot;" />
      <input type="flag" name="Kun aktive forløb" friendlyname="Kun aktive forløb" expr="True" />
    </inputs>
    <outputs>
      <output type="collection" name="Referencer" friendlyname="Referencer" stage="Forløbsreference" />
      <output type="number" name="Antal" friendlyname="Antal" stage="" />
      <output type="text" name="Referencer (json)" friendlyname="Referencer (json)" stage="" />
    </outputs>
    <onsuccess>2d91daba-b9cf-4ea6-821d-72cb71419555</onsuccess>
    <processid>1d658246-3945-476b-836d-924fa5946298</processid>
  </stage>
  <stage stageid="05f908cd-8eb3-46c1-9686-67f227aa8f29" name="Hent self" type="Action">
    <subsheetid>250f85d6-ad56-4a54-b1a2-bb70b39329a3</subsheetid>
    <loginhibit onsuccess="true" />
    <display x="15" y="-60" />
    <inputs>
      <input type="text" name="Url" friendlyname="Url" expr="[Forløbsreference._links.self]" />
    </inputs>
    <outputs>
      <output type="collection" name="Data" friendlyname="Data" stage="Forløbsreference" />
      <output type="number" name="Antal" friendlyname="Antal" stage="" />
      <output type="text" name="Json" friendlyname="Json" narrative="Det rå json output" stage="" />
      <output type="number" name="Statuskode" friendlyname="Statuskode" narrative="Http statuskoden for kaldet" stage="" />
    </outputs>
    <onsuccess>6763aca3-27af-4fad-81ce-cfffe8d40409</onsuccess>
    <resource object="Nexus - Core" action="Get" />
  </stage>
  <stage stageid="650a79e8-bc53-49ae-8978-c0ffd9695b7e" name="Data" type="Collection">
    <subsheetid>250f85d6-ad56-4a54-b1a2-bb70b39329a3</subsheetid>
    <display x="255" y="-165" />
    <datatype>collection</datatype>
    <private />
    <alwaysinit />
  </stage>
  <stage stageid="eac643c9-725b-4f83-a95e-6d687553895e" name="Succes" type="Data">
    <subsheetid>250f85d6-ad56-4a54-b1a2-bb70b39329a3</subsheetid>
    <loginhibit />
    <display x="-195" y="240" w="120" h="30" />
    <datatype>flag</datatype>
    <initialvalue>False</initialvalue>
    <private />
    <alwaysinit />
  </stage>
  <stage stageid="f40c5aa3-d328-4f80-830f-cc72887a176c" name="Self" type="Block">
    <subsheetid>250f85d6-ad56-4a54-b1a2-bb70b39329a3</subsheetid>
    <loginhibit />
    <display x="-90" y="-90" w="255" h="60" />
    <font family="Segoe UI" size="10" style="Regular" color="7FB2E5" />
  </stage>
  <stage stageid="2d91daba-b9cf-4ea6-821d-72cb71419555" name="Anchor17" type="Anchor">
    <subsheetid>250f85d6-ad56-4a54-b1a2-bb70b39329a3</subsheetid>
    <loginhibit />
    <display x="180" y="-105" w="10" h="10" />
    <onsuccess>4f76b5d3-d388-4ced-99c5-c5c9a238e4c1</onsuccess>
  </stage>
  <stage stageid="6763aca3-27af-4fad-81ce-cfffe8d40409" name="Hent uncloseable" type="Action">
    <subsheetid>250f85d6-ad56-4a54-b1a2-bb70b39329a3</subsheetid>
    <loginhibit onsuccess="true" />
    <display x="15" y="15" />
    <inputs>
      <input type="text" name="Url" friendlyname="Url" expr="[Forløbsreference._links.unclosableReferences]" />
    </inputs>
    <outputs>
      <output type="collection" name="Data" friendlyname="Data" stage="" />
      <output type="number" name="Antal" friendlyname="Antal" stage="Antal" />
      <output type="text" name="Json" friendlyname="Json" narrative="Det rå json output" stage="" />
      <output type="number" name="Statuskode" friendlyname="Statuskode" narrative="Http statuskoden for kaldet" stage="" />
    </outputs>
    <onsuccess>fcda3de0-94f4-4a0e-9bac-32829c7ba0b4</onsuccess>
    <resource object="Nexus - Core" action="Get" />
  </stage>
  <stage stageid="86ae80ce-3db4-4a66-ab97-01b1115eefcb" name="Antal" type="Data">
    <subsheetid>250f85d6-ad56-4a54-b1a2-bb70b39329a3</subsheetid>
    <display x="-195" y="120" w="120" h="30" />
    <datatype>number</datatype>
    <initialvalue />
    <private />
    <alwaysinit />
  </stage>
  <stage stageid="fcda3de0-94f4-4a0e-9bac-32829c7ba0b4" name="Har vi ulukbare ting?" type="Decision">
    <subsheetid>250f85d6-ad56-4a54-b1a2-bb70b39329a3</subsheetid>
    <loginhibit />
    <display x="15" y="60" />
    <decision expression="[Antal] &gt; 0" />
    <ontrue>51b67b34-a134-49ef-a99e-f661161c8ff4</ontrue>
    <onfalse>80275d2f-bf30-4dea-a5b3-67d8a20dabb8</onfalse>
  </stage>
  <stage stageid="51b67b34-a134-49ef-a99e-f661161c8ff4" name="End5" type="End">
    <subsheetid>250f85d6-ad56-4a54-b1a2-bb70b39329a3</subsheetid>
    <loginhibit />
    <display x="210" y="60" />
    <outputs>
      <output type="flag" name="Succes" stage="Succes" />
    </outputs>
  </stage>
  <stage stageid="b1aae1bb-acda-47c4-937f-89aab09d0967" name="Check om vi kan lukke" type="Block">
    <subsheetid>250f85d6-ad56-4a54-b1a2-bb70b39329a3</subsheetid>
    <loginhibit />
    <display x="-90" y="-15" w="255" h="105" />
    <font family="Segoe UI" size="10" style="Regular" color="7FB2E5" />
  </stage>
  <stage stageid="80275d2f-bf30-4dea-a5b3-67d8a20dabb8" name="Luk forløbet" type="Action">
    <subsheetid>250f85d6-ad56-4a54-b1a2-bb70b39329a3</subsheetid>
    <loginhibit onsuccess="true" />
    <display x="15" y="135" />
    <inputs>
      <input type="text" name="Url" friendlyname="Url" expr="[Forløbsreference._links.close]" />
      <input type="text" name="Body" friendlyname="Body" expr="&quot;{}&quot;" />
    </inputs>
    <outputs>
      <output type="collection" name="Data" friendlyname="Data" stage="" />
      <output type="number" name="Antal" friendlyname="Antal" stage="" />
      <output type="text" name="Json" friendlyname="Json" narrative="Det rå json output" stage="" />
      <output type="number" name="Statuskode" friendlyname="Statuskode" narrative="Http statuskoden for kaldet" stage="Statuskode" />
    </outputs>
    <onsuccess>3496f202-ffc3-4ccf-90d8-f505ef9f00b9</onsuccess>
    <resource object="Nexus - Core" action="Put" />
  </stage>
  <stage stageid="3a794ede-c702-43ef-ad53-9c734f1619ae" name="Statuskode" type="Data">
    <subsheetid>250f85d6-ad56-4a54-b1a2-bb70b39329a3</subsheetid>
    <display x="-195" y="165" w="120" h="30" />
    <datatype>number</datatype>
    <initialvalue />
    <private />
    <alwaysinit />
  </stage>
  <stage stageid="3496f202-ffc3-4ccf-90d8-f505ef9f00b9" name="Sæt succes" type="Calculation">
    <subsheetid>250f85d6-ad56-4a54-b1a2-bb70b39329a3</subsheetid>
    <loginhibit />
    <display x="15" y="180" />
    <onsuccess>df601011-70fb-4c53-889e-9e89707ab0b8</onsuccess>
    <calculation expression="[Statuskode] = 200" stage="Succes" />
  </stage>
  <stage stageid="28f740bd-f352-4a8d-b784-3c96c81092c3" name="Kald luk forløb" type="Block">
    <subsheetid>250f85d6-ad56-4a54-b1a2-bb70b39329a3</subsheetid>
    <loginhibit />
    <display x="-90" y="105" w="255" h="105" />
    <font family="Segoe UI" size="10" style="Regular" color="7FB2E5" />
  </stage>
  <stage stageid="b73000e5-e87c-466e-8030-e63cf06d4ba1" name="Kun aktive forløb" type="Data">
    <subsheetid>1d658246-3945-476b-836d-924fa5946298</subsheetid>
    <display x="-195" y="75" w="120" h="30" />
    <datatype>flag</datatype>
    <initialvalue>True</initialvalue>
    <private />
    <alwaysinit />
  </stage>
  <stage stageid="95f3fa07-65ac-4340-a3f9-cc29668f4edb" name="Tilknyt mail til borger" type="SubSheetInfo">
    <subsheetid>3183f218-9f38-4ce1-b2a2-56516a37c620</subsheetid>
    <display x="-195" y="-105" w="150" h="90" />
  </stage>
  <stage stageid="dae8e7c7-5cc1-4413-a7b5-af0e066f5d6d" name="Start" type="Start">
    <subsheetid>3183f218-9f38-4ce1-b2a2-56516a37c620</subsheetid>
    <loginhibit />
    <narrative>Hvis forløbet findes i forvejen så returneres det bare</narrative>
    <display x="15" y="-135" />
    <inputs>
      <input type="collection" name="Borger" stage="Borger" />
      <input type="text" name="Url" stage="Url" />
      <input type="text" name="Grundforløb" narrative="Eks, Sundhedsfagligt grundforløb" stage="Grundforløb" />
      <input type="text" name="Korrespondance forløb" stage="Korrespondance forløb" />
    </inputs>
    <onsuccess>34245c19-0949-45af-88b8-bb39043532bc</onsuccess>
  </stage>
  <stage stageid="414ba9fd-06dd-4f2b-bedd-af4f25bbc32d" name="Input" type="Block">
    <subsheetid>3183f218-9f38-4ce1-b2a2-56516a37c620</subsheetid>
    <display x="-270" y="-45" w="150" h="195" />
    <font family="Segoe UI" size="10" style="Regular" color="339966" />
  </stage>
  <stage stageid="7042b96c-5a7d-4ea9-a83a-7a38817d2818" name="Variabler" type="Block">
    <subsheetid>3183f218-9f38-4ce1-b2a2-56516a37c620</subsheetid>
    <display x="-270" y="225" w="150" h="420" />
    <font family="Segoe UI" size="10" style="Regular" color="666699" />
  </stage>
  <stage stageid="031fe1dd-56f0-4303-9be2-dd4a70c9a97b" name="Konstanter" type="Block">
    <subsheetid>3183f218-9f38-4ce1-b2a2-56516a37c620</subsheetid>
    <display x="-270" y="165" w="150" h="45" />
    <font family="Segoe UI" size="10" style="Regular" color="008080" />
  </stage>
  <stage stageid="a0039f43-7c98-4e41-81a0-558c76ee0edf" name="Output" type="Block">
    <subsheetid>3183f218-9f38-4ce1-b2a2-56516a37c620</subsheetid>
    <display x="-270" y="660" w="150" h="105" />
    <font family="Segoe UI" size="10" style="Regular" color="800080" />
  </stage>
  <stage stageid="db5ed7bb-5501-45aa-97b5-2d2a9dc5a2ec" name="Borger" type="Collection">
    <subsheetid>3183f218-9f38-4ce1-b2a2-56516a37c620</subsheetid>
    <display x="-195" y="-15" w="120" h="30" />
    <datatype>collection</datatype>
    <private />
    <alwaysinit />
  </stage>
  <stage stageid="b43f4982-9bea-4ca4-a410-255af09feb32" name="Nexus - Core::Start" type="Action">
    <subsheetid>3183f218-9f38-4ce1-b2a2-56516a37c620</subsheetid>
    <loginhibit onsuccess="true" />
    <display x="135" y="-240" />
    <inputs>
      <input type="text" name="Credentials" friendlyname="Credentials" expr="&quot;KMD Nexus - produktion&quot;" />
    </inputs>
    <onsuccess>58db7cbd-1de5-4411-ab7e-fc6c49db5703</onsuccess>
    <resource object="Nexus - Core" action="Start" />
  </stage>
  <stage stageid="a02f6122-51fb-4b25-b867-50e11d1a33c8" name="Debug" type="Block">
    <subsheetid>3183f218-9f38-4ce1-b2a2-56516a37c620</subsheetid>
    <loginhibit />
    <display x="90" y="-270" w="90" h="105" />
    <font family="Segoe UI" size="10" style="Regular" color="FFFF99" />
  </stage>
  <stage stageid="58db7cbd-1de5-4411-ab7e-fc6c49db5703" name="Hent borger" type="SubSheet">
    <subsheetid>3183f218-9f38-4ce1-b2a2-56516a37c620</subsheetid>
    <loginhibit />
    <display x="135" y="-195" />
    <inputs>
      <input type="text" name="Cpr" friendlyname="Cpr" expr="&quot;xxxxxxxxxx&quot;" />
    </inputs>
    <outputs>
      <output type="collection" name="Borger" friendlyname="Borger" stage="Borger" />
    </outputs>
    <onsuccess>e5610123-8d9d-4874-b58e-c3a156141b16</onsuccess>
    <processid>d5cc0f3c-1d67-4f5b-a83a-08a4b9574114</processid>
  </stage>
  <stage stageid="34245c19-0949-45af-88b8-bb39043532bc" name="Anchor3" type="Anchor">
    <subsheetid>3183f218-9f38-4ce1-b2a2-56516a37c620</subsheetid>
    <loginhibit />
    <display x="15" y="-90" w="10" h="10" />
    <onsuccess>cc59e307-dfe9-46ab-84ee-d34cbb20efd6</onsuccess>
  </stage>
  <stage stageid="e5610123-8d9d-4874-b58e-c3a156141b16" name="Anchor4" type="Anchor">
    <subsheetid>3183f218-9f38-4ce1-b2a2-56516a37c620</subsheetid>
    <loginhibit />
    <display x="135" y="-90" w="10" h="10" />
    <onsuccess>34245c19-0949-45af-88b8-bb39043532bc</onsuccess>
  </stage>
  <stage stageid="2ae981bd-eb9c-4c15-8571-85359099b594" name="Url" type="Data">
    <subsheetid>3183f218-9f38-4ce1-b2a2-56516a37c620</subsheetid>
    <display x="-195" y="30" w="120" h="30" />
    <datatype>text</datatype>
    <initialvalue xml:space="preserve">https://odensekommune.nexus.kmd.dk/api/core/mobile/odensekommune/v2/activities/pages?filterId=6481&amp;pageSize=50</initialvalue>
    <private />
    <alwaysinit />
  </stage>
  <stage stageid="11593a47-7e59-460e-8dac-39350811f77e" name="Hent Nexus mails" type="Action">
    <subsheetid>3183f218-9f38-4ce1-b2a2-56516a37c620</subsheetid>
    <loginhibit onsuccess="true" />
    <display x="15" y="-15" />
    <inputs>
      <input type="text" name="Url" friendlyname="Url" expr="[Url]" />
    </inputs>
    <outputs>
      <output type="collection" name="Data" friendlyname="Data" stage="Nexus mails" />
      <output type="number" name="Antal" friendlyname="Antal" stage="" />
      <output type="text" name="Json" friendlyname="Json" narrative="Det rå json output" stage="" />
      <output type="number" name="Statuskode" friendlyname="Statuskode" narrative="Http statuskoden for kaldet" stage="" />
    </outputs>
    <onsuccess>195038fb-d5c5-418e-90cd-322688d36993</onsuccess>
    <resource object="Nexus - Core" action="Get" />
  </stage>
  <stage stageid="461b0fad-e308-45ce-ba88-ebc650e187fc" name="Nexus mails" type="Collection">
    <subsheetid>3183f218-9f38-4ce1-b2a2-56516a37c620</subsheetid>
    <display x="-195" y="300" w="120" h="30" />
    <datatype>collection</datatype>
    <private />
    <alwaysinit />
  </stage>
  <stage stageid="195038fb-d5c5-418e-90cd-322688d36993" name="Hent Nexus mails" type="Action">
    <subsheetid>3183f218-9f38-4ce1-b2a2-56516a37c620</subsheetid>
    <loginhibit onsuccess="true" />
    <display x="15" y="30" />
    <inputs>
      <input type="text" name="Url" friendlyname="Url" expr="[Nexus mails.pages._links.content]" />
    </inputs>
    <outputs>
      <output type="collection" name="Data" friendlyname="Data" stage="Nexus mails" />
      <output type="number" name="Antal" friendlyname="Antal" stage="" />
      <output type="text" name="Json" friendlyname="Json" narrative="Det rå json output" stage="" />
      <output type="number" name="Statuskode" friendlyname="Statuskode" narrative="Http statuskoden for kaldet" stage="" />
    </outputs>
    <onsuccess>8205b9a2-feba-4b76-9ddf-9f1bdfc76a77</onsuccess>
    <resource object="Nexus - Core" action="Get" />
  </stage>
  <stage stageid="571a4ae3-6556-405c-baf4-f87b75a61c84" name="Nexus mail" type="Collection">
    <subsheetid>3183f218-9f38-4ce1-b2a2-56516a37c620</subsheetid>
    <display x="-195" y="345" w="120" h="30" />
    <datatype>collection</datatype>
    <private />
    <alwaysinit />
  </stage>
  <stage stageid="1da468ad-f969-433c-8b4a-fe3c26df98c0" name="Cpr" type="Data">
    <subsheetid>3183f218-9f38-4ce1-b2a2-56516a37c620</subsheetid>
    <display x="-195" y="390" w="120" h="30" />
    <datatype>text</datatype>
    <initialvalue />
    <private />
    <alwaysinit />
  </stage>
  <stage stageid="8205b9a2-feba-4b76-9ddf-9f1bdfc76a77" name="Loop Nexus mails" type="LoopStart">
    <subsheetid>3183f218-9f38-4ce1-b2a2-56516a37c620</subsheetid>
    <loginhibit onsuccess="true" />
    <display x="15" y="75" />
    <onsuccess>3d895184-dcbf-49d3-b209-96acbad4ea40</onsuccess>
    <groupid>aeb3bfa7-7ba4-434c-a75f-79b4e4ec40c5</groupid>
    <looptype>ForEach</looptype>
    <loopdata>Nexus mails</loopdata>
  </stage>
  <stage stageid="3805bfaf-8dbf-4ecd-b2d9-eeeb8c3f1ef1" name="Loop Nexus mails" type="LoopEnd">
    <subsheetid>3183f218-9f38-4ce1-b2a2-56516a37c620</subsheetid>
    <loginhibit onsuccess="true" />
    <display x="15" y="255" />
    <onsuccess>6d4ffdcb-d3d5-47d9-bd0b-fea9a663d1dd</onsuccess>
    <groupid>aeb3bfa7-7ba4-434c-a75f-79b4e4ec40c5</groupid>
  </stage>
  <stage stageid="3d895184-dcbf-49d3-b209-96acbad4ea40" name="Hent self" type="Action">
    <subsheetid>3183f218-9f38-4ce1-b2a2-56516a37c620</subsheetid>
    <loginhibit onsuccess="true" />
    <display x="15" y="120" />
    <inputs>
      <input type="text" name="Url" friendlyname="Url" expr="[Nexus mails._links.referencedObject]" />
    </inputs>
    <outputs>
      <output type="collection" name="Data" friendlyname="Data" stage="Nexus mail" />
      <output type="number" name="Antal" friendlyname="Antal" stage="" />
      <output type="text" name="Json" friendlyname="Json" narrative="Det rå json output" stage="" />
      <output type="number" name="Statuskode" friendlyname="Statuskode" narrative="Http statuskoden for kaldet" stage="" />
    </outputs>
    <onsuccess>204b4c33-9a8e-452e-952d-081b35d5c13a</onsuccess>
    <resource object="Nexus - Core" action="Get" />
  </stage>
  <stage stageid="204b4c33-9a8e-452e-952d-081b35d5c13a" name="Find cpr" type="Action">
    <subsheetid>3183f218-9f38-4ce1-b2a2-56516a37c620</subsheetid>
    <loginhibit onsuccess="true" />
    <display x="15" y="165" />
    <inputs>
      <input type="text" name="Target" friendlyname="Target" narrative="the string to search for a cpr number" expr="[Nexus mail.body]" />
    </inputs>
    <outputs>
      <output type="text" name="Cpr" friendlyname="Cpr" narrative="The cpr number found by the search" stage="Cpr" />
    </outputs>
    <onsuccess>7426ed23-42cf-431b-a41b-6d85c681781c</onsuccess>
    <resource object="Utility - Odk" action="String: Extract cpr" />
  </stage>
  <stage stageid="7426ed23-42cf-431b-a41b-6d85c681781c" name="Rigtig borger?" type="Decision">
    <subsheetid>3183f218-9f38-4ce1-b2a2-56516a37c620</subsheetid>
    <display x="15" y="210" />
    <decision expression="[Borger Cpr] = [Cpr]" />
    <ontrue>93ed2376-1a19-4623-9295-ff10c70a259a</ontrue>
    <onfalse>3805bfaf-8dbf-4ecd-b2d9-eeeb8c3f1ef1</onfalse>
  </stage>
  <stage stageid="93ed2376-1a19-4623-9295-ff10c70a259a" name="Anchor4" type="Anchor">
    <subsheetid>3183f218-9f38-4ce1-b2a2-56516a37c620</subsheetid>
    <loginhibit onsuccess="true" />
    <display x="-45" y="210" w="10" h="10" />
    <onsuccess>d11cd24d-fe37-4c84-a1c1-211b3d439bc0</onsuccess>
  </stage>
  <stage stageid="d11cd24d-fe37-4c84-a1c1-211b3d439bc0" name="Anchor4" type="Anchor">
    <subsheetid>3183f218-9f38-4ce1-b2a2-56516a37c620</subsheetid>
    <loginhibit onsuccess="true" />
    <display x="-45" y="330" w="10" h="10" />
    <onsuccess>a41032ee-c0a3-4180-9f14-831b4bf46369</onsuccess>
  </stage>
  <stage stageid="6d4ffdcb-d3d5-47d9-bd0b-fea9a663d1dd" name="Kunne ikke finde cpr" type="Exception">
    <subsheetid>3183f218-9f38-4ce1-b2a2-56516a37c620</subsheetid>
    <display x="225" y="255" />
    <exception localized="yes" type="Business Exception" detail="&quot;Kunne ikke finde matchende cpr&quot;" />
  </stage>
  <stage stageid="a41032ee-c0a3-4180-9f14-831b4bf46369" name="Hent Prototype" type="Action">
    <subsheetid>3183f218-9f38-4ce1-b2a2-56516a37c620</subsheetid>
    <loginhibit onsuccess="true" />
    <display x="15" y="330" />
    <inputs>
      <input type="text" name="Url" friendlyname="Url" expr="[Nexus mail._links.self]" />
    </inputs>
    <outputs>
      <output type="collection" name="Data" friendlyname="Data" stage="Prototype" />
      <output type="number" name="Antal" friendlyname="Antal" stage="" />
      <output type="text" name="Json" friendlyname="Json" narrative="Det rå json output" stage="JSON" />
      <output type="number" name="Statuskode" friendlyname="Statuskode" narrative="Http statuskoden for kaldet" stage="" />
    </outputs>
    <onsuccess>6f4f6a46-2405-4c7b-a9b0-dc6c715e6b9c</onsuccess>
    <resource object="Nexus - Core" action="Get" />
  </stage>
  <stage stageid="cc59e307-dfe9-46ab-84ee-d34cbb20efd6" name="Find cpr i borger" type="Action">
    <subsheetid>3183f218-9f38-4ce1-b2a2-56516a37c620</subsheetid>
    <loginhibit onsuccess="true" />
    <display x="15" y="-60" />
    <inputs>
      <input type="text" name="Target" friendlyname="Target" narrative="the string to search for a cpr number" expr="[Borger.patientIdentifier.identifier]" />
    </inputs>
    <outputs>
      <output type="text" name="Cpr" friendlyname="Cpr" narrative="The cpr number found by the search" stage="Borger Cpr" />
    </outputs>
    <onsuccess>11593a47-7e59-460e-8dac-39350811f77e</onsuccess>
    <resource object="Utility - Odk" action="String: Extract cpr" />
  </stage>
  <stage stageid="35f7c072-d6b1-44a5-98db-e13c3845cd98" name="Borger Cpr" type="Data">
    <subsheetid>3183f218-9f38-4ce1-b2a2-56516a37c620</subsheetid>
    <display x="-195" y="255" w="120" h="30" />
    <datatype>text</datatype>
    <initialvalue />
    <private />
    <alwaysinit />
  </stage>
  <stage stageid="b54e84a3-d8c5-410a-ab69-ec2485c6aff8" name="JSON" type="Data">
    <subsheetid>3183f218-9f38-4ce1-b2a2-56516a37c620</subsheetid>
    <display x="-195" y="690" w="120" h="30" />
    <datatype>text</datatype>
    <initialvalue />
    <private />
    <alwaysinit />
  </stage>
  <stage stageid="443366e0-f324-4b05-a41d-d76c2f52a993" name="Prototype" type="Collection">
    <subsheetid>3183f218-9f38-4ce1-b2a2-56516a37c620</subsheetid>
    <display x="-195" y="435" w="120" h="30" />
    <datatype>collection</datatype>
    <private />
    <alwaysinit />
  </stage>
  <stage stageid="6f4f6a46-2405-4c7b-a9b0-dc6c715e6b9c" name="Hent self udvidet" type="Action">
    <subsheetid>3183f218-9f38-4ce1-b2a2-56516a37c620</subsheetid>
    <loginhibit onsuccess="true" />
    <display x="15" y="375" />
    <inputs>
      <input type="text" name="Url" friendlyname="Url" expr="[Nexus mail._links.self] &amp; &quot;?patientId=&quot; &amp; [Borger.id]" />
    </inputs>
    <outputs>
      <output type="collection" name="Data" friendlyname="Data" stage="Nexus mail" />
      <output type="number" name="Antal" friendlyname="Antal" stage="" />
      <output type="text" name="Json" friendlyname="Json" narrative="Det rå json output" stage="" />
      <output type="number" name="Statuskode" friendlyname="Statuskode" narrative="Http statuskoden for kaldet" stage="" />
    </outputs>
    <onsuccess>a4ef3940-ca3d-4e41-8f97-b71d0f15ed5f</onsuccess>
    <resource object="Nexus - Core" action="Get" />
  </stage>
  <stage stageid="a4ef3940-ca3d-4e41-8f97-b71d0f15ed5f" name="Hent pathwayAssoc" type="Action">
    <subsheetid>3183f218-9f38-4ce1-b2a2-56516a37c620</subsheetid>
    <loginhibit onsuccess="true" />
    <display x="15" y="450" />
    <inputs>
      <input type="text" name="Url" friendlyname="Url" expr="[Nexus mail.pathwayAssociation._links.availablePathwayAssociation] &amp; &quot;?subjectId=00000000-0000-0000-0000-000000000000&quot;" />
    </inputs>
    <outputs>
      <output type="collection" name="Data" friendlyname="Data" stage="PathwayAssociation" />
      <output type="number" name="Antal" friendlyname="Antal" stage="" />
      <output type="text" name="Json" friendlyname="Json" narrative="Det rå json output" stage="JSON - pathway" />
      <output type="number" name="Statuskode" friendlyname="Statuskode" narrative="Http statuskoden for kaldet" stage="" />
    </outputs>
    <onsuccess>2051edcc-5722-4502-a493-0cf1d66c10ab</onsuccess>
    <breakpoint type="0">
      <condition></condition>
    </breakpoint>
    <resource object="Nexus - Core" action="Get" />
  </stage>
  <stage stageid="f8bb9867-e15b-4a71-b7a1-6e6b51f81cfc" name="Find pathway" type="Block">
    <subsheetid>3183f218-9f38-4ce1-b2a2-56516a37c620</subsheetid>
    <loginhibit onsuccess="true" />
    <display x="-60" y="420" w="240" h="105" />
    <font family="Segoe UI" size="10" style="Regular" color="7FB2E5" />
  </stage>
  <stage stageid="bc7cc9ba-3479-4f14-8ec1-7f8364f96654" name="PathwayAssociation" type="Collection">
    <subsheetid>3183f218-9f38-4ce1-b2a2-56516a37c620</subsheetid>
    <display x="-195" y="480" w="120" h="30" />
    <datatype>collection</datatype>
    <private />
    <alwaysinit />
  </stage>
  <stage stageid="7ae63cf7-48dd-4685-b5c5-40f1c621bd49" name="JSON - pathway" type="Data">
    <subsheetid>3183f218-9f38-4ce1-b2a2-56516a37c620</subsheetid>
    <display x="-195" y="525" w="120" h="30" />
    <datatype>text</datatype>
    <initialvalue xml:space="preserve">{"type":"patientPathwayReference","id":null,"version":0,"name":"Korrespondance - Genbrugshjælpemidler og forbrugsgoder","date":"2024-03-18T11:53:12.000+0000","children":[],"activityIdentifier":{"identifier":"PATIENT_PATHWAY:609142","type":"PATIENT_PATHWAY","activityId":609142,"_links":{}},"additionalInfo":null,"patientPathwayId":609142,"programPathwayId":58,"pathwayTypeId":22,"parentPathwayId":null,"pathwayStatus":"ACTIVE","_links":{"availableNestedProgramPathways":{"href":"https://odensekommune.nexus.kmd.dk:443/api/core/mobile/odensekommune/v2/patientPathways/609142/availableNestedProgramPathways"},"close":{"href":"https://odensekommune.nexus.kmd.dk:443/api/core/mobile/odensekommune/v2/patientPathways/609142/closure"},"unclosableReferences":{"href":"https://odensekommune.nexus.kmd.dk:443/api/core/mobile/odensekommune/v2/patientPathways/609142/unclosableReferences"},"withdrawPatient":{"href":"https://odensekommune.nexus.kmd.dk:443/api/core/mobile/odensekommune/v2/patientPathways/609142"},"availableProfessionals":{"href":"https://odensekommune.nexus.kmd.dk:443/api/core/mobile/odensekommune/v2/patientPathways/609142/availableProfessionals"},"availableOrganisations":{"href":"https://odensekommune.nexus.kmd.dk:443/api/core/mobile/odensekommune/v2/patientPathways/609142/availableOrganisations"},"availableFormDefinitions":{"href":"https://odensekommune.nexus.kmd.dk:443/api/core/mobile/odensekommune/v2/pathways/609142/formDefinitions"},"availableLetterTemplates":{"href":"https://odensekommune.nexus.kmd.dk:443/api/core/mobile/odensekommune/v2/patientPathways/609142/availableLetterTemplates"},"dynamicTemplate":{"href":"https://odensekommune.nexus.kmd.dk:443/api/core/mobile/odensekommune/v2/dynamictemplate/84981?pathwayId=609142"},"availablePathwayDistributions":{"href":"https://odensekommune.nexus.kmd.dk:443/api/core/mobile/odensekommune/v2/pathways/609142/pathwayDistributions"},"citizenAccountPrototype":{"href":"https://odensekommune.nexus.kmd.dk:443/api/core/mobile/odensekommune/v2/patientPathways/609142/citizenAccounts/prototype"},"patientNetworkContactPrototype":{"href":"https://odensekommune.nexus.kmd.dk:443/api/core/mobile/odensekommune/v2/patientPathways/84981/contact/network/prototype?pathwayId=609142&amp;placement=PATHWAY"},"availableAssociationGroupDefinitions":{"href":"https://odensekommune.nexus.kmd.dk:443/api/core/mobile/odensekommune/v2/patientPathways/609142/associationGroupDefinitions"},"activePrograms":{"href":"https://odensekommune.nexus.kmd.dk:443/api/core/mobile/odensekommune/v2/patients/84981/programs/active"},"availableEvents":{"href":"https://odensekommune.nexus.kmd.dk:443/api/core/mobile/odensekommune/v2/events/609142/availableEvents"},"availableEventTypes":{"href":"https://odensekommune.nexus.kmd.dk:443/api/core/mobile/odensekommune/v2/eventTypes/active"},"addEventsToPathway":{"href":"https://odensekommune.nexus.kmd.dk:443/api/core/mobile/odensekommune/v2/events/609142/events"},"eventPrototype":{"href":"https://odensekommune.nexus.kmd.dk:443/api/core/mobile/odensekommune/v2/events/609142/prototype"},"documentPrototype":{"href":"https://odensekommune.nexus.kmd.dk:443/api/document-microservice/odensekommune/documents/prototype/609142?patientId=84981&amp;placement=PATHWAY"},"eopVumProblemPrototypes":{"href":"https://odensekommune.nexus.kmd.dk:443/api/core/mobile/odensekommune/v2/eop/patients/84981/problems/prototypes?type=VUM"},"eopVumVisitationPrototype":{"href":"https://odensekommune.nexus.kmd.dk:443/api/core/mobile/odensekommune/v2/eop/patients/84981/visitations/prototypes?type=VUM"},"eopVumFollowUpPrototype":{"href":"https://odensekommune.nexus.kmd.dk:443/api/core/mobile/odensekommune/v2/eop/patients/84981/followup/prototypes?type=VUM&amp;pathwayId=609142"},"eopVumActivities":{"href":"https://odensekommune.nexus.kmd.dk:443/api/core/mobile/odensekommune/v2/eop/patients/84981/activities/VUM?pathwayId=609142&amp;activityTypes=EOP_FOLLOW_UP"},"eopIcsProblemPrototypes":{"href":"https://odensekommune.nexus.kmd.dk:443/api/core/mobile/odensekommune/v2/eop/patients/84981/problems/prototypes?type=ICS"},"eopIcsVisitationPrototype":{"href":"https://odensekommune.nexus.kmd.dk:443/api/core/mobile/odensekommune/v2/eop/patients/84981/visitations/prototypes?type=ICS"},"eopIcsFollowUpPrototype":{"href":"https://odensekommune.nexus.kmd.dk:443/api/core/mobile/odensekommune/v2/eop/patients/84981/followup/prototypes?type=ICS&amp;pathwayId=609142"},"eopIcsActivities":{"href":"https://odensekommune.nexus.kmd.dk:443/api/core/mobile/odensekommune/v2/eop/patients/84981/activities/ICS?pathwayId=609142&amp;activityTypes=EOP_FOLLOW_UP"},"eopFfbProblemPrototypes":{"href":"https://odensekommune.nexus.kmd.dk:443/api/core/mobile/odensekommune/v2/eop/patients/84981/problems/prototypes?type=FFB"},"eopFfbVisitationPrototype":{"href":"https://odensekommune.nexus.kmd.dk:443/api/core/mobile/odensekommune/v2/eop/patients/84981/visitations/prototypes?type=FFB"},"eopFfbFollowUpPrototype":{"href":"https://odensekommune.nexus.kmd.dk:443/api/core/mobile/odensekommune/v2/eop/patients/84981/followup/prototypes?type=FFB&amp;pathwayId=609142"},"eopFfbActivities":{"href":"https://odensekommune.nexus.kmd.dk:443/api/core/mobile/odensekommune/v2/eop/patients/84981/activities/FFB?pathwayId=609142&amp;activityTypes=EOP_FOLLOW_UP"},"eopOphProblemPrototypes":{"href":"https://odensekommune.nexus.kmd.dk:443/api/core/mobile/odensekommune/v2/eop/patients/84981/problems/prototypes?type=OPH"},"eopOphVisitationPrototype":{"href":"https://odensekommune.nexus.kmd.dk:443/api/core/mobile/odensekommune/v2/eop/patients/84981/visitations/prototypes?type=OPH"},"eopOphFollowUpPrototype":{"href":"https://odensekommune.nexus.kmd.dk:443/api/core/mobile/odensekommune/v2/eop/patients/84981/followup/prototypes?type=OPH&amp;pathwayId=609142"},"eopOphActivities":{"href":"https://odensekommune.nexus.kmd.dk:443/api/core/mobile/odensekommune/v2/eop/patients/84981/activities/OPH?pathwayId=609142&amp;activityTypes=EOP_FOLLOW_UP"},"eopBnlProblemPrototypes":{"href":"https://odensekommune.nexus.kmd.dk:443/api/core/mobile/odensekommune/v2/eop/patients/84981/problems/prototypes?type=BNL"},"eopBnlVisitationPrototype":{"href":"https://odensekommune.nexus.kmd.dk:443/api/core/mobile/odensekommune/v2/eop/patients/84981/visitations/prototypes?type=BNL"},"eopBnlFollowUpPrototype":{"href":"https://odensekommune.nexus.kmd.dk:443/api/core/mobile/odensekommune/v2/eop/patients/84981/followup/prototypes?type=BNL&amp;pathwayId=609142"},"eopBnlActivities":{"href":"https://odensekommune.nexus.kmd.dk:443/api/core/mobile/odensekommune/v2/eop/patients/84981/activities/BNL?pathwayId=609142&amp;activityTypes=EOP_FOLLOW_UP"},"self":{"href":"https://odensekommune.nexus.kmd.dk:443/api/core/mobile/odensekommune/v2/patientPathways/609142/selfReference"},"patientPathway":{"href":"https://odensekommune.nexus.kmd.dk:443/api/core/mobile/odensekommune/v2/patientPathways/609142"},"copyPrototype":{"href":"https://odensekommune.nexus.kmd.dk:443/api/core/mobile/odensekommune/v2/patientPathways/609142/copies/prototype"}}}</initialvalue>
    <private />
    <alwaysinit />
  </stage>
  <stage stageid="b931b3c2-e0a9-4f36-81a1-cd1f6e85d73e" name="Korrespondance forløb" type="Data">
    <subsheetid>3183f218-9f38-4ce1-b2a2-56516a37c620</subsheetid>
    <display x="-195" y="120" w="120" h="30" />
    <datatype>text</datatype>
    <initialvalue xml:space="preserve">Korrespondance - Genbrugshjælpemidler og forbrugsgoder</initialvalue>
    <private />
    <alwaysinit />
  </stage>
  <stage stageid="05754179-78e4-4ff3-9f68-78776c7f6d77" name="Grundforløb" type="Data">
    <subsheetid>3183f218-9f38-4ce1-b2a2-56516a37c620</subsheetid>
    <display x="-195" y="75" w="120" h="30" />
    <datatype>text</datatype>
    <initialvalue xml:space="preserve">Sundhedsfagligt grundforløb</initialvalue>
    <private />
    <alwaysinit />
  </stage>
  <stage stageid="5741fb4b-d47f-4e58-b9cf-494577e492ed" name="Hent prototype og udvidet self" type="Block">
    <subsheetid>3183f218-9f38-4ce1-b2a2-56516a37c620</subsheetid>
    <loginhibit onsuccess="true" />
    <display x="-60" y="300" w="240" h="105" />
    <font family="Segoe UI" size="10" style="Regular" color="7FB2E5" />
  </stage>
  <stage stageid="646db3d3-d75d-4d7c-9120-e78027e17602" name="Find korrekt email" type="Block">
    <subsheetid>3183f218-9f38-4ce1-b2a2-56516a37c620</subsheetid>
    <loginhibit onsuccess="true" />
    <display x="-60" y="-105" w="240" h="390" />
    <font family="Segoe UI" size="10" style="Regular" color="7FB2E5" />
  </stage>
  <stage stageid="8491d7d4-0415-46ad-8415-fc0fdd11cb33" name="Tilføj placering til prototype" type="Block">
    <subsheetid>3183f218-9f38-4ce1-b2a2-56516a37c620</subsheetid>
    <loginhibit />
    <display x="-60" y="540" w="240" h="60" />
    <font family="Segoe UI" size="10" style="Regular" color="7FB2E5" />
  </stage>
  <stage stageid="b71fe13c-7634-4104-b945-78fdafd357dc" name="pathway_out" type="Data">
    <subsheetid>3183f218-9f38-4ce1-b2a2-56516a37c620</subsheetid>
    <display x="-195" y="570" w="120" h="30" />
    <datatype>text</datatype>
    <initialvalue />
    <private />
    <alwaysinit />
  </stage>
  <stage stageid="2051edcc-5722-4502-a493-0cf1d66c10ab" name="Find patientPathwayPlacement" type="Code">
    <subsheetid>3183f218-9f38-4ce1-b2a2-56516a37c620</subsheetid>
    <loginhibit />
    <display x="15" y="495" />
    <inputs>
      <input type="text" name="JSON_pathway" expr="[JSON - pathway]" />
      <input type="text" name="Forløb" expr="[Korrespondance forløb]" />
    </inputs>
    <outputs>
      <output type="text" name="pathway_out" stage="pathway_out" />
    </outputs>
    <onsuccess>36eeb081-de85-4c84-bda9-374c722ed1fc</onsuccess>
    <code><![CDATA[var arr = JArray.Parse(JSON_pathway);

pathway_out = "";

foreach(var node in arr) 
{
	var element = All(node,a => a["patientPathwayPlacement"]["name"].ToString() == Forløb, "children").FirstOrDefault();
	
	if(element != null) 
	{
		pathway_out = element["patientPathwayPlacement"].ToString();
		return;
	}
}]]></code>
  </stage>
  <stage stageid="36eeb081-de85-4c84-bda9-374c722ed1fc" name="Tilføj placement til prototype_out" type="Code">
    <subsheetid>3183f218-9f38-4ce1-b2a2-56516a37c620</subsheetid>
    <loginhibit />
    <display x="15" y="570" />
    <inputs>
      <input type="text" name="JSON" expr="[JSON]" />
      <input type="text" name="patientPathwayPlacement" expr="[pathway_out]" />
    </inputs>
    <outputs>
      <output type="text" name="prototype_out" stage="prototype_out" />
    </outputs>
    <onsuccess>ee1ea5e2-ec50-4688-9242-b8186fb9265c</onsuccess>
    <code><![CDATA[var root = JToken.Parse(JSON);
var placement = JToken.Parse(patientPathwayPlacement);

if (root["pathwayAssociation"].Type == JTokenType.Null)
{
	root["pathwayAssociation"] = new JObject();
	var hasPlacement = root["pathwayAssociation"].Contains("placement");

	if (!hasPlacement)
	{
		JObject pathwayAssociation = (JObject)root["pathwayAssociation"];
		pathwayAssociation.Add("placement", null);
		root["pathwayAssociation"]["placement"] = placement;
	}
}
else 
{ 
	// Der er i forvejen en pathwayAssociation - throw måske?
}





prototype_out = root.ToString();
]]></code>
  </stage>
  <stage stageid="b9b30095-3af3-4aa6-8bdb-f8412657d8ec" name="prototype_out" type="Data">
    <subsheetid>3183f218-9f38-4ce1-b2a2-56516a37c620</subsheetid>
    <display x="-195" y="615" w="120" h="30" />
    <datatype>text</datatype>
    <initialvalue />
    <private />
    <alwaysinit />
  </stage>
  <stage stageid="ee1ea5e2-ec50-4688-9242-b8186fb9265c" name="Tilknyt besked til borger" type="Action">
    <subsheetid>3183f218-9f38-4ce1-b2a2-56516a37c620</subsheetid>
    <loginhibit onsuccess="true" />
    <display x="15" y="645" />
    <inputs>
      <input type="text" name="Url" friendlyname="Url" expr="[Nexus mail._links.accept]" />
      <input type="text" name="Body" friendlyname="Body" expr="[prototype_out]" />
    </inputs>
    <outputs>
      <output type="collection" name="Data" friendlyname="Data" stage="" />
      <output type="number" name="Antal" friendlyname="Antal" stage="" />
      <output type="text" name="Json" friendlyname="Json" narrative="Det rå json output" stage="JSON" />
      <output type="number" name="Statuskode" friendlyname="Statuskode" narrative="Http statuskoden for kaldet" stage="Statuskode" />
    </outputs>
    <onsuccess>1e255fa0-096d-4b90-921a-d9c916fe0059</onsuccess>
    <resource object="Nexus - Core" action="Post" />
  </stage>
  <stage stageid="9dc40684-04b5-46bc-aa98-6c82a6d2995e" name="Statuskode" type="Data">
    <subsheetid>3183f218-9f38-4ce1-b2a2-56516a37c620</subsheetid>
    <display x="-195" y="735" w="120" h="30" />
    <datatype>number</datatype>
    <initialvalue />
    <private />
    <alwaysinit />
  </stage>
  <stage stageid="56aec731-5a01-41d6-b56d-ab99a2023831" name="Post besked" type="Block">
    <subsheetid>3183f218-9f38-4ce1-b2a2-56516a37c620</subsheetid>
    <loginhibit />
    <display x="-60" y="615" w="240" h="60" />
    <font family="Segoe UI" size="10" style="Regular" color="7FB2E5" />
  </stage>
  <stage stageid="1e255fa0-096d-4b90-921a-d9c916fe0059" name="End6" type="End">
    <subsheetid>3183f218-9f38-4ce1-b2a2-56516a37c620</subsheetid>
    <loginhibit />
    <display x="15" y="705" />
    <outputs>
      <output type="text" name="JSON" stage="JSON" />
      <output type="number" name="Statuskode" stage="Statuskode" />
    </outputs>
  </stage>
  <stage stageid="d7dc1281-da59-4b85-8f9a-58d772f92195" name="Note5" type="Note">
    <subsheetid>3183f218-9f38-4ce1-b2a2-56516a37c620</subsheetid>
    <loginhibit />
    <narrative>subjectid = 0000 osv. bliver tilføjet her, da det returnerede json ellers ikke er pænt. Why? dunno</narrative>
    <display x="240" y="450" w="90" h="60" />
    <onsuccess>a4ef3940-ca3d-4e41-8f97-b71d0f15ed5f</onsuccess>
  </stage>
  <stage stageid="effe1971-97f6-4b62-b481-1b64afae6752" name="Opdater borger" type="SubSheetInfo">
    <subsheetid>e28959da-df95-4cbb-9a74-c06d173fe283</subsheetid>
    <display x="-195" y="-105" w="150" h="90" />
  </stage>
  <stage stageid="c27c0747-5a23-4c6d-81fa-f25bc8f9d0e6" name="Input" type="Block">
    <subsheetid>e28959da-df95-4cbb-9a74-c06d173fe283</subsheetid>
    <display x="-270" y="-45" w="150" h="105" />
    <font family="Segoe UI" size="10" style="Regular" color="339966" />
  </stage>
  <stage stageid="a7f6533c-47c4-4f05-b997-d4eff26decea" name="Variabler" type="Block">
    <subsheetid>e28959da-df95-4cbb-9a74-c06d173fe283</subsheetid>
    <display x="-270" y="135" w="150" h="150" />
    <font family="Segoe UI" size="10" style="Regular" color="666699" />
  </stage>
  <stage stageid="ebccee30-9177-4875-b979-718ef64e7835" name="Konstanter" type="Block">
    <subsheetid>e28959da-df95-4cbb-9a74-c06d173fe283</subsheetid>
    <display x="-270" y="75" w="150" h="45" />
    <font family="Segoe UI" size="10" style="Regular" color="008080" />
  </stage>
  <stage stageid="e13e1009-1bc7-4c61-bdf1-ec4a67a8bbe3" name="Output" type="Block">
    <subsheetid>e28959da-df95-4cbb-9a74-c06d173fe283</subsheetid>
    <display x="-270" y="300" w="150" h="105" />
    <font family="Segoe UI" size="10" style="Regular" color="800080" />
  </stage>
  <stage stageid="1a9b9bde-d2ef-45a7-bc74-78f9c58dfa5a" name="Succes" type="Data">
    <subsheetid>e28959da-df95-4cbb-9a74-c06d173fe283</subsheetid>
    <display x="-195" y="330" w="120" h="30" />
    <datatype>flag</datatype>
    <initialvalue>False</initialvalue>
    <private />
    <alwaysinit />
  </stage>
  <stage stageid="35940845-2231-4f46-aa7f-47715ec7f8b0" name="Borger" type="Collection">
    <subsheetid>e28959da-df95-4cbb-9a74-c06d173fe283</subsheetid>
    <display x="-195" y="-15" w="120" h="30" />
    <datatype>collection</datatype>
    <private />
    <alwaysinit />
  </stage>
  <stage stageid="acdb9c35-72b7-44e3-aaf2-140d16ecb5e0" name="Start" type="Start">
    <subsheetid>e28959da-df95-4cbb-9a74-c06d173fe283</subsheetid>
    <loginhibit />
    <display x="15" y="-135" />
    <inputs>
      <input type="collection" name="Borger" stage="Borger" />
      <input type="collection" name="Opdateringsfelter" stage="Opdateringsfelter" />
    </inputs>
    <onsuccess>6adb2627-c096-4fd9-aa52-1b0cde75cca2</onsuccess>
  </stage>
  <stage stageid="6088e0df-5be9-4dd6-8e6e-fbda0b14571e" name="Nexus - Core::Start" type="Action">
    <subsheetid>e28959da-df95-4cbb-9a74-c06d173fe283</subsheetid>
    <loginhibit onsuccess="true" />
    <display x="120" y="-345" />
    <inputs>
      <input type="text" name="Credentials" friendlyname="Credentials" expr="&quot;KMD Nexus - produktion&quot;" />
    </inputs>
    <onsuccess>22f41a0c-070c-41ce-9d94-22fabce5afb6</onsuccess>
    <resource object="Nexus - Core" action="Start" />
  </stage>
  <stage stageid="ae30afb7-a30a-4c0c-a19a-94f9862e16dd" name="Anchor2" type="Anchor">
    <subsheetid>e28959da-df95-4cbb-9a74-c06d173fe283</subsheetid>
    <loginhibit />
    <display x="120" y="-105" w="10" h="10" />
    <onsuccess>6adb2627-c096-4fd9-aa52-1b0cde75cca2</onsuccess>
  </stage>
  <stage stageid="60b52be7-8dc6-40bc-87b2-5afc8ce9b1c2" name="Debug" type="Block">
    <subsheetid>e28959da-df95-4cbb-9a74-c06d173fe283</subsheetid>
    <loginhibit />
    <display x="75" y="-375" w="90" h="240" />
    <font family="Segoe UI" size="10" style="Regular" color="FFFF99" />
  </stage>
  <stage stageid="6adb2627-c096-4fd9-aa52-1b0cde75cca2" name="Anchor2" type="Anchor">
    <subsheetid>e28959da-df95-4cbb-9a74-c06d173fe283</subsheetid>
    <loginhibit />
    <display x="15" y="-105" w="10" h="10" />
    <onsuccess>103b6a5c-39ac-4e0f-8557-2b7cfbe1f314</onsuccess>
  </stage>
  <stage stageid="fd991aed-fa7b-4521-8899-eb15c401e2fe" name="Url" type="Data">
    <subsheetid>e28959da-df95-4cbb-9a74-c06d173fe283</subsheetid>
    <display x="-195" y="165" w="120" h="30" />
    <datatype>text</datatype>
    <initialvalue />
    <private />
    <alwaysinit />
  </stage>
  <stage stageid="5895d3c0-b5fa-4cf4-b353-d1546393a1be" name="Prototype (json)" type="Data">
    <subsheetid>e28959da-df95-4cbb-9a74-c06d173fe283</subsheetid>
    <display x="-195" y="210" w="120" h="30" />
    <datatype>text</datatype>
    <initialvalue />
    <private />
    <alwaysinit />
  </stage>
  <stage stageid="7b9a6982-5f17-405e-8922-02c3e5fee8ba" name="Statuskode" type="Data">
    <subsheetid>e28959da-df95-4cbb-9a74-c06d173fe283</subsheetid>
    <display x="-195" y="255" w="120" h="30" />
    <datatype>number</datatype>
    <initialvalue />
    <private />
    <alwaysinit />
  </stage>
  <stage stageid="103b6a5c-39ac-4e0f-8557-2b7cfbe1f314" name="Get borger prototype" type="Action">
    <subsheetid>e28959da-df95-4cbb-9a74-c06d173fe283</subsheetid>
    <loginhibit onsuccess="true" />
    <display x="15" y="-60" />
    <inputs>
      <input type="text" name="Url" friendlyname="Url" expr="[Borger._links.self]" />
    </inputs>
    <outputs>
      <output type="collection" name="Data" friendlyname="Data" stage="Borger" />
      <output type="number" name="Antal" friendlyname="Antal" stage="" />
      <output type="text" name="Json" friendlyname="Json" narrative="Det rå json output" stage="Prototype (json)" />
      <output type="number" name="Statuskode" friendlyname="Statuskode" narrative="Http statuskoden for kaldet" stage="" />
    </outputs>
    <onsuccess>958f58cf-5f4e-4da4-97dc-a9443b5d8a27</onsuccess>
    <resource object="Nexus - Core" action="Get" />
  </stage>
  <stage stageid="f37cae3a-ae22-4ea7-aa63-3d48385c9ba4" name="Hent prototype" type="Block">
    <subsheetid>e28959da-df95-4cbb-9a74-c06d173fe283</subsheetid>
    <loginhibit />
    <display x="-90" y="-90" w="225" h="60" />
    <font family="Segoe UI" size="10" style="Regular" color="7FB2E5" />
  </stage>
  <stage stageid="958f58cf-5f4e-4da4-97dc-a9443b5d8a27" name="Opdater prototype med inputs" type="Code">
    <subsheetid>e28959da-df95-4cbb-9a74-c06d173fe283</subsheetid>
    <loginhibit />
    <display x="15" y="15" />
    <inputs>
      <input type="text" name="prototype" expr="[Prototype (json)]" />
      <input type="collection" name="opdateringer" expr="[Opdateringsfelter]" />
    </inputs>
    <outputs>
      <output type="text" name="prototype_out" stage="Prototype (json)" />
    </outputs>
    <onsuccess>28140d37-189e-4a8a-b3c3-9668f4bcf0bd</onsuccess>
    <code><![CDATA[var root = JToken.Parse(prototype);

foreach(DataColumn column in opdateringer.Columns)
{
	if(!string.IsNullOrEmpty(opdateringer.Rows[0][column.ColumnName].ToString()))
		root[column.ColumnName] = opdateringer.Rows[0][column.ColumnName].ToString();
}

prototype_out = root.ToString();]]></code>
  </stage>
  <stage stageid="42668fb7-7419-46c3-acbc-f3d6c2c68e54" name="Opdater prototype" type="Block">
    <subsheetid>e28959da-df95-4cbb-9a74-c06d173fe283</subsheetid>
    <loginhibit />
    <display x="-90" y="-15" w="225" h="60" />
    <font family="Segoe UI" size="10" style="Regular" color="7FB2E5" />
  </stage>
  <stage stageid="19e16bcc-6083-4133-84e9-45dab2454371" name="End" type="End">
    <subsheetid>e28959da-df95-4cbb-9a74-c06d173fe283</subsheetid>
    <loginhibit />
    <display x="15" y="195" />
    <outputs>
      <output type="flag" name="Succes" stage="Succes" />
      <output type="collection" name="Borger" stage="Borger" />
    </outputs>
  </stage>
  <stage stageid="c1c69336-a666-4262-834d-e7f37a466ae4" name="Sæt succes" type="Calculation">
    <subsheetid>e28959da-df95-4cbb-9a74-c06d173fe283</subsheetid>
    <loginhibit />
    <display x="15" y="150" />
    <onsuccess>19e16bcc-6083-4133-84e9-45dab2454371</onsuccess>
    <calculation expression="[Statuskode] = 200" stage="Succes" />
  </stage>
  <stage stageid="28140d37-189e-4a8a-b3c3-9668f4bcf0bd" name="Put - opdater borger" type="Action">
    <subsheetid>e28959da-df95-4cbb-9a74-c06d173fe283</subsheetid>
    <loginhibit onsuccess="true" />
    <display x="15" y="90" />
    <inputs>
      <input type="text" name="Url" friendlyname="Url" expr="[Borger._links.update]" />
      <input type="text" name="Body" friendlyname="Body" expr="[Prototype (json)]" />
    </inputs>
    <outputs>
      <output type="collection" name="Data" friendlyname="Data" stage="Borger" />
      <output type="number" name="Antal" friendlyname="Antal" stage="" />
      <output type="text" name="Json" friendlyname="Json" narrative="Det rå json output" stage="" />
      <output type="number" name="Statuskode" friendlyname="Statuskode" narrative="Http statuskoden for kaldet" stage="Statuskode" />
    </outputs>
    <onsuccess>c1c69336-a666-4262-834d-e7f37a466ae4</onsuccess>
    <resource object="Nexus - Core" action="Put" />
  </stage>
  <stage stageid="2c8294a4-a994-441c-8242-3b1dd53ea4d4" name="Opdater borger" type="Block">
    <subsheetid>e28959da-df95-4cbb-9a74-c06d173fe283</subsheetid>
    <loginhibit />
    <display x="-90" y="60" w="225" h="60" />
    <font family="Segoe UI" size="10" style="Regular" color="7FB2E5" />
  </stage>
  <stage stageid="f29d3674-8864-4b1c-bc7d-3c60c1d95e73" name="Sæt debug opdateringsfelter" type="MultipleCalculation">
    <subsheetid>e28959da-df95-4cbb-9a74-c06d173fe283</subsheetid>
    <loginhibit />
    <display x="120" y="-165" />
    <onsuccess>ae30afb7-a30a-4c0c-a19a-94f9862e16dd</onsuccess>
    <steps>
      <calculation expression="&quot;12312312&quot;" stage="Opdateringsfelter.homeTelephone" />
    </steps>
  </stage>
  <stage stageid="9e2c2c90-75a4-463e-b36f-2081bebd8301" name="Opdateringsfelter" type="Collection">
    <subsheetid>e28959da-df95-4cbb-9a74-c06d173fe283</subsheetid>
    <loginhibit />
    <display x="-195" y="30" w="120" h="30" />
    <datatype>collection</datatype>
    <private />
    <alwaysinit />
  </stage>
  <stage stageid="c619bc9b-56fe-4fa8-a29f-f31f6e4a7fa8" name="Note6" type="Note">
    <subsheetid>e28959da-df95-4cbb-9a74-c06d173fe283</subsheetid>
    <loginhibit />
    <narrative>!!! For at bruge 'opdater borger' skal processen kende navnene på de fields, den ønsker opdateret. Det er fx 'workTelephone', 'homeTelephone', 'primaryEmailAddress' et al. 
Den komplette liste kan findes i borgerens prototype, som hentes i "Get borger prototype". !!!</narrative>
    <display x="-165" y="-210" w="240" h="120" />
    <font family="Segoe UI" size="12" style="Regular" color="FF0000" />
  </stage>
  <stage stageid="cfdec49a-d336-48fd-b6bd-a334458f016f" name="Borger" type="Collection">
    <subsheetid>2603825d-13ba-4624-8fe1-c2da14ae1e7e</subsheetid>
    <display x="-195" y="-15" w="120" h="30" />
    <datatype>collection</datatype>
    <private />
    <alwaysinit />
  </stage>
  <stage stageid="cb8cb880-72b8-4bfb-9f90-8eee1d19df29" name="Debug Schwendlund" type="MultipleCalculation">
    <subsheetid>2603825d-13ba-4624-8fe1-c2da14ae1e7e</subsheetid>
    <loginhibit />
    <display x="135" y="-150" />
    <onsuccess>ca5cf30b-0db4-4a23-9f87-87995466e3d4</onsuccess>
    <steps>
      <calculation expression="[Borger.fullName]" stage="Navn" />
      <calculation expression="&quot;Dette er notefeltet&quot;" stage="Noter" />
      <calculation expression="Today()" stage="Modtaget" />
      <calculation expression="&quot;Test.pdf&quot;" stage="Originalt filnavn" />
      <calculation expression="LoadBinaryFile(&quot;&quot;)" stage="Fil" />
    </steps>
  </stage>
  <stage stageid="20014b76-f724-4e1b-9853-2d32a6eae5b0" name="Referencer (json)" type="Data">
    <subsheetid>2603825d-13ba-4624-8fe1-c2da14ae1e7e</subsheetid>
    <display x="-195" y="450" w="120" h="30" />
    <datatype>text</datatype>
    <initialvalue />
    <private />
    <alwaysinit />
  </stage>
  <stage stageid="24873b3c-c8a3-4985-bee3-ee6ba5c39142" name="Debug" type="Block">
    <subsheetid>2603825d-13ba-4624-8fe1-c2da14ae1e7e</subsheetid>
    <loginhibit onsuccess="true" />
    <display x="90" y="-405" w="90" h="285" />
    <font family="Segoe UI" size="10" style="Regular" color="FFFF99" />
  </stage>
  <stage stageid="92787af6-cbfa-4115-afc9-12b4c73f0a06" name="Hent borger" type="Action">
    <subsheetid>2603825d-13ba-4624-8fe1-c2da14ae1e7e</subsheetid>
    <loginhibit onsuccess="true" />
    <display x="135" y="-330" />
    <inputs>
      <input type="text" name="Cpr" friendlyname="Cpr" expr="&quot;xxxxxxxxxx&quot;" />
    </inputs>
    <outputs>
      <output type="collection" name="Borger" friendlyname="Borger" stage="Borger" />
    </outputs>
    <onsuccess>2450b297-0252-4c8f-90a5-c352e44c6497</onsuccess>
    <resource object="Nexus - Borgere og forløb" action="Hent borger" />
  </stage>
  <stage stageid="2450b297-0252-4c8f-90a5-c352e44c6497" name="Hent forløb" type="Action">
    <subsheetid>2603825d-13ba-4624-8fe1-c2da14ae1e7e</subsheetid>
    <loginhibit onsuccess="true" />
    <display x="135" y="-285" />
    <inputs>
      <input type="collection" name="Borger" friendlyname="Borger" expr="[Borger]" />
    </inputs>
    <outputs>
      <output type="collection" name="Forløb" friendlyname="Forløb" stage="Forløb" />
      <output type="number" name="Antal" friendlyname="Antal" stage="" />
    </outputs>
    <onsuccess>cf3903ed-9ac7-4a8a-9c84-d58576a97105</onsuccess>
    <resource object="Nexus - Borgere og forløb" action="Hent borgers forløb" />
  </stage>
  <stage stageid="cf3903ed-9ac7-4a8a-9c84-d58576a97105" name="Filtrer forløb" type="Action">
    <subsheetid>2603825d-13ba-4624-8fe1-c2da14ae1e7e</subsheetid>
    <loginhibit onsuccess="true" />
    <display x="135" y="-240" />
    <inputs>
      <input type="collection" name="Collection In" friendlyname="Collection In" narrative="Input collection" expr="[Forløb]" />
      <input type="text" name="Filter" friendlyname="Filter" narrative="The filter to apply" expr="&quot;[name] = 'Korrespondance - Sygepleje og medicin'&quot;" />
    </inputs>
    <outputs>
      <output type="number" name="Count" friendlyname="Count" narrative="The amount of rows in the filtered collection" stage="" />
      <output type="collection" name="Collection Out" friendlyname="Collection Out" narrative="The filtered collection" stage="Forløb" />
    </outputs>
    <onsuccess>de6874ae-1287-4c7c-8e60-5fe519ad6f38</onsuccess>
    <resource object="Utility - Odk Linq" action="Filter" />
  </stage>
  <stage stageid="ca5cf30b-0db4-4a23-9f87-87995466e3d4" name="Anchor18" type="Anchor">
    <subsheetid>2603825d-13ba-4624-8fe1-c2da14ae1e7e</subsheetid>
    <loginhibit />
    <display x="135" y="-75" w="10" h="10" />
    <onsuccess>b1774523-78ca-4ae8-9ce2-573da2bfc20d</onsuccess>
  </stage>
  <stage stageid="b1774523-78ca-4ae8-9ce2-573da2bfc20d" name="Hent dokument prototype" type="Action">
    <subsheetid>2603825d-13ba-4624-8fe1-c2da14ae1e7e</subsheetid>
    <loginhibit onsuccess="true" />
    <display x="0" y="-75" />
    <inputs>
      <input type="text" name="Url" friendlyname="Url" expr="[Forløb._links.documentPrototype]" />
    </inputs>
    <outputs>
      <output type="collection" name="Data" friendlyname="Data" stage="Dokumentprototype" />
      <output type="number" name="Antal" friendlyname="Antal" stage="" />
      <output type="text" name="Json" friendlyname="Json" narrative="Det rå json output" stage="Dokumentprototype (json)" />
      <output type="number" name="Statuskode" friendlyname="Statuskode" narrative="Http statuskoden for kaldet" stage="" />
    </outputs>
    <onsuccess>ecf0f0f1-0aa4-4382-a2f9-b5b50aad45ed</onsuccess>
    <resource object="Nexus - Core" action="Get" />
  </stage>
  <stage stageid="a36915c9-cf8d-48ec-b5bb-36bade30827e" name="Antal" type="Data">
    <subsheetid>2603825d-13ba-4624-8fe1-c2da14ae1e7e</subsheetid>
    <display x="-195" y="660" w="120" h="30" />
    <datatype>number</datatype>
    <initialvalue />
    <private />
    <alwaysinit />
  </stage>
  <stage stageid="ecf0f0f1-0aa4-4382-a2f9-b5b50aad45ed" name="Udfyld dokumentskabelon" type="Code">
    <subsheetid>2603825d-13ba-4624-8fe1-c2da14ae1e7e</subsheetid>
    <loginhibit />
    <display x="0" y="-30" />
    <inputs>
      <input type="text" name="json" expr="[Dokumentprototype (json)]" />
      <input type="text" name="name" expr="[Navn]" />
      <input type="text" name="notes" expr="[Noter]" />
      <input type="date" name="relevanceDate" expr="[Modtaget]" />
      <input type="text" name="originalFileName" expr="[Originalt filnavn]" />
    </inputs>
    <outputs>
      <output type="text" name="result" stage="Dokumentprototype (json)" />
    </outputs>
    <onsuccess>67698e31-0d74-4ec3-9a1d-18e613f46076</onsuccess>
    <code><![CDATA[var obj = JToken.Parse(json);

obj["name"] = name;
obj["notes"] = notes;
obj["relevanceDate"] = relevanceDate.ToUniversalTime();
obj["originalFileName"] = originalFileName;

result = obj.ToString();]]></code>
  </stage>
  <stage stageid="67698e31-0d74-4ec3-9a1d-18e613f46076" name="Opret dokument" type="Action">
    <subsheetid>2603825d-13ba-4624-8fe1-c2da14ae1e7e</subsheetid>
    <loginhibit onsuccess="true" />
    <display x="0" y="15" />
    <inputs>
      <input type="text" name="Url" friendlyname="Url" expr="[Dokumentprototype._links.create]" />
      <input type="text" name="Body" friendlyname="Body" expr="[Dokumentprototype (json)]" />
    </inputs>
    <outputs>
      <output type="collection" name="Data" friendlyname="Data" stage="Dokument" />
      <output type="number" name="Antal" friendlyname="Antal" stage="" />
      <output type="text" name="Json" friendlyname="Json" narrative="Det rå json output" stage="" />
      <output type="number" name="Statuskode" friendlyname="Statuskode" narrative="Http statuskoden for kaldet" stage="Statuskode" />
    </outputs>
    <onsuccess>cfdd261e-bdb7-4ea4-a0e6-a5a755f47228</onsuccess>
    <resource object="Nexus - Core" action="Post" />
  </stage>
  <stage stageid="7eb7bacb-0e6f-4f94-b1d2-c24b4d144763" name="Dokumentprototype" type="Collection">
    <subsheetid>2603825d-13ba-4624-8fe1-c2da14ae1e7e</subsheetid>
    <display x="-195" y="495" w="120" h="30" />
    <datatype>collection</datatype>
    <private />
    <alwaysinit />
  </stage>
  <stage stageid="e94bd334-3ecd-4503-8bbf-4931ba56aad9" name="Dokumentprototype (json)" type="Data">
    <subsheetid>2603825d-13ba-4624-8fe1-c2da14ae1e7e</subsheetid>
    <display x="-195" y="540" w="120" h="30" />
    <datatype>text</datatype>
    <initialvalue />
    <private />
    <alwaysinit />
  </stage>
  <stage stageid="75a994bc-bc9f-46f1-bd07-9bb6dd9b1a47" name="Nexus - Core::Start" type="Action">
    <subsheetid>2603825d-13ba-4624-8fe1-c2da14ae1e7e</subsheetid>
    <loginhibit onsuccess="true" />
    <display x="135" y="-375" />
    <inputs>
      <input type="text" name="Credentials" friendlyname="Credentials" expr="&quot;KMD Nexus - produktion&quot;" />
    </inputs>
    <onsuccess>92787af6-cbfa-4115-afc9-12b4c73f0a06</onsuccess>
    <resource object="Nexus - Core" action="Start" />
  </stage>
  <stage stageid="e560e255-500d-4e33-8f3b-f4ab2241668a" name="Statuskode" type="Data">
    <subsheetid>2603825d-13ba-4624-8fe1-c2da14ae1e7e</subsheetid>
    <display x="-195" y="585" w="120" h="30" />
    <datatype>number</datatype>
    <initialvalue />
    <private />
    <alwaysinit />
  </stage>
  <stage stageid="ee2bdfa4-d65d-4d00-83d2-ea4afd817c5d" name="Dokument" type="Collection">
    <subsheetid>2603825d-13ba-4624-8fe1-c2da14ae1e7e</subsheetid>
    <display x="-195" y="750" w="120" h="30" />
    <datatype>collection</datatype>
    <private />
    <alwaysinit />
  </stage>
  <stage stageid="cfdd261e-bdb7-4ea4-a0e6-a5a755f47228" name="Gik det godt?" type="Decision">
    <subsheetid>2603825d-13ba-4624-8fe1-c2da14ae1e7e</subsheetid>
    <loginhibit />
    <display x="0" y="60" />
    <decision expression="[Statuskode] = 200" />
    <ontrue>7ac0259d-59e2-4952-b9c2-5bfa4743065b</ontrue>
    <onfalse>20a536f2-13f2-4ea6-a7f0-e486b5175b7c</onfalse>
  </stage>
  <stage stageid="20a536f2-13f2-4ea6-a7f0-e486b5175b7c" name="Kan ikke oprette dokument på forløb" type="Exception">
    <subsheetid>2603825d-13ba-4624-8fe1-c2da14ae1e7e</subsheetid>
    <display x="120" y="60" />
    <exception localized="yes" type="Business Exception" detail="&quot;Kan ikke oprette dokument på forløb.&quot;" />
  </stage>
  <stage stageid="7ac0259d-59e2-4952-b9c2-5bfa4743065b" name="Upload dokument" type="Action">
    <subsheetid>2603825d-13ba-4624-8fe1-c2da14ae1e7e</subsheetid>
    <loginhibit onsuccess="true" />
    <display x="0" y="135" />
    <inputs>
      <input type="text" name="Url" friendlyname="Url" expr="[Dokument._links.upload]" />
      <input type="text" name="Filnavn" friendlyname="Filnavn" expr="[Originalt filnavn]" />
      <input type="text" name="Indholdstype" friendlyname="Indholdstype" expr="[Indholdstype]" />
      <input type="binary" name="Fil" friendlyname="Fil" expr="[Fil]" />
    </inputs>
    <outputs>
      <output type="number" name="Antal" friendlyname="Antal" stage="Antal" />
      <output type="text" name="Json" friendlyname="Json" narrative="Det rå json output" stage="Dokument (json)" />
      <output type="collection" name="Uploadet dokument" friendlyname="Uploadet dokument" stage="Dokument" />
      <output type="flag" name="Succes" friendlyname="Succes" narrative="Http statuskoden for kaldet" stage="Succes" />
    </outputs>
    <onsuccess>aa053398-0dbd-4c89-9cdd-981ca256cee0</onsuccess>
    <resource object="Nexus - Core" action="Upload fil" />
  </stage>
  <stage stageid="aa053398-0dbd-4c89-9cdd-981ca256cee0" name="Gik det godt" type="Decision">
    <subsheetid>2603825d-13ba-4624-8fe1-c2da14ae1e7e</subsheetid>
    <loginhibit />
    <display x="0" y="180" />
    <decision expression="[Statuskode] = 200" />
    <ontrue>d2a2602e-d55b-4432-85b4-66c9a73d46f0</ontrue>
    <onfalse>da7bf268-fb48-4617-bca4-fe315d2a87c7</onfalse>
  </stage>
  <stage stageid="da7bf268-fb48-4617-bca4-fe315d2a87c7" name="Kan ikke uploade fil" type="Exception">
    <subsheetid>2603825d-13ba-4624-8fe1-c2da14ae1e7e</subsheetid>
    <display x="120" y="180" />
    <exception localized="yes" type="Business Exception" detail="&quot;Kan ikke uploade fil på dokument reference.&quot;" />
  </stage>
  <stage stageid="efe83af8-7c31-47ef-b1ca-66775d6931b8" name="Fil" type="Data">
    <subsheetid>2603825d-13ba-4624-8fe1-c2da14ae1e7e</subsheetid>
    <loginhibit />
    <display x="-195" y="75" w="120" h="30" />
    <datatype>binary</datatype>
    <initialvalue />
    <private />
    <alwaysinit />
  </stage>
  <stage stageid="a6fd17fc-5c00-4eb0-b0bb-e9d33e09ab1a" name="Succes" type="Data">
    <subsheetid>2603825d-13ba-4624-8fe1-c2da14ae1e7e</subsheetid>
    <display x="-195" y="795" w="120" h="30" />
    <datatype>flag</datatype>
    <initialvalue />
    <private />
    <alwaysinit />
  </stage>
  <stage stageid="21cac7cf-afae-435e-8849-45bc49887e35" name="Indholdstype" type="Data">
    <subsheetid>2603825d-13ba-4624-8fe1-c2da14ae1e7e</subsheetid>
    <loginhibit />
    <display x="-195" y="120" w="120" h="30" />
    <datatype>text</datatype>
    <initialvalue xml:space="preserve">application/pdf</initialvalue>
    <private />
    <alwaysinit />
  </stage>
  <stage stageid="74570b83-3d61-4dd3-a600-938ab464441a" name="Dokument (json)" type="Data">
    <subsheetid>2603825d-13ba-4624-8fe1-c2da14ae1e7e</subsheetid>
    <display x="-195" y="705" w="120" h="30" />
    <datatype>text</datatype>
    <initialvalue />
    <private />
    <alwaysinit />
  </stage>
  <stage stageid="22f41a0c-070c-41ce-9d94-22fabce5afb6" name="Hent Schwendlund" type="SubSheet">
    <subsheetid>e28959da-df95-4cbb-9a74-c06d173fe283</subsheetid>
    <loginhibit />
    <display x="120" y="-300" />
    <inputs>
      <input type="text" name="Cpr" friendlyname="Cpr" expr="&quot;xxxxxxxxxx&quot;" />
    </inputs>
    <outputs>
      <output type="collection" name="Borger" friendlyname="Borger" stage="Borger" />
    </outputs>
    <onsuccess>084c66b7-68a7-43d0-9bd4-f6e2f36d6fea</onsuccess>
    <processid>d5cc0f3c-1d67-4f5b-a83a-08a4b9574114</processid>
  </stage>
  <stage stageid="084c66b7-68a7-43d0-9bd4-f6e2f36d6fea" name="Tilføj homeTelephone til Opdateringsfelter" type="Action">
    <subsheetid>e28959da-df95-4cbb-9a74-c06d173fe283</subsheetid>
    <loginhibit onsuccess="true" />
    <display x="120" y="-255" />
    <inputs>
      <input type="collection" name="Collection" friendlyname="Collection" narrative="The collection to append a field to." expr="[Opdateringsfelter]" />
      <input type="text" name="Field Name" friendlyname="Field Name" narrative="The name of the new field." expr="&quot;homeTelephone&quot;" />
      <input type="number" name="Value" friendlyname="Value" narrative="The value to be put in the new field." expr="" />
    </inputs>
    <outputs>
      <output type="collection" name="Appended Collection" friendlyname="Appended Collection" narrative="The collection with field appended." stage="Opdateringsfelter" />
    </outputs>
    <onsuccess>a4658caa-1fe8-47c5-880c-a5a279b2c2a5</onsuccess>
    <resource object="Utility - Collection Manipulation" action="Append Field (Number)" />
  </stage>
  <stage stageid="a4658caa-1fe8-47c5-880c-a5a279b2c2a5" name="Tilføj række til Opdateringsfelter" type="Action">
    <subsheetid>e28959da-df95-4cbb-9a74-c06d173fe283</subsheetid>
    <loginhibit onsuccess="true" />
    <display x="120" y="-210" />
    <inputs>
      <input type="text" name="Collection Name" friendlyname="Collection Name" narrative="The name of the collection to act upon" expr="&quot;Opdateringsfelter&quot;" />
    </inputs>
    <onsuccess>f29d3674-8864-4b1c-bc7d-3c60c1d95e73</onsuccess>
    <resource object="Blueprism.AutomateProcessCore.clsCollectionActions" action="Add Row" />
  </stage>
  <stage stageid="d37ce1de-702a-404d-bcce-cb3530bac2d3" name="Hent aktuelle udlån" type="SubSheetInfo">
    <subsheetid>603b3371-7a7d-4ba7-a03c-abc5e4cb0e03</subsheetid>
    <display x="-195" y="-105" w="150" h="90" />
  </stage>
  <stage stageid="330ffb20-de3d-4f6e-9161-7397b147db79" name="Cpr" type="Data">
    <subsheetid>603b3371-7a7d-4ba7-a03c-abc5e4cb0e03</subsheetid>
    <display x="225" y="-195" w="120" h="30" />
    <datatype>text</datatype>
    <initialvalue />
    <private />
    <alwaysinit />
  </stage>
  <stage stageid="97892dc5-92bb-4891-8109-40ad4884ef92" name="Input" type="Block">
    <subsheetid>603b3371-7a7d-4ba7-a03c-abc5e4cb0e03</subsheetid>
    <display x="-270" y="-45" w="150" h="60" />
    <font family="Segoe UI" size="10" style="Regular" color="339966" />
  </stage>
  <stage stageid="a0525967-9359-4f15-9d27-2e3427d6a2c9" name="Variabler" type="Block">
    <subsheetid>603b3371-7a7d-4ba7-a03c-abc5e4cb0e03</subsheetid>
    <display x="-270" y="105" w="150" h="105" />
    <font family="Segoe UI" size="10" style="Regular" color="666699" />
  </stage>
  <stage stageid="b3cce35c-f642-4610-a487-1a93fa1d619b" name="Konstanter" type="Block">
    <subsheetid>603b3371-7a7d-4ba7-a03c-abc5e4cb0e03</subsheetid>
    <display x="-270" y="30" w="150" h="60" />
    <font family="Segoe UI" size="10" style="Regular" color="008080" />
  </stage>
  <stage stageid="29715d1d-6617-475e-9d6e-de4f4e2a057e" name="Output" type="Block">
    <subsheetid>603b3371-7a7d-4ba7-a03c-abc5e4cb0e03</subsheetid>
    <display x="-270" y="225" w="150" h="195" />
    <font family="Segoe UI" size="10" style="Regular" color="800080" />
  </stage>
  <stage stageid="be8d2f0b-a220-44ed-a1ac-8b5f21b88078" name="Udlån" type="Collection">
    <subsheetid>603b3371-7a7d-4ba7-a03c-abc5e4cb0e03</subsheetid>
    <loginhibit />
    <display x="-195" y="345" w="120" h="30" />
    <datatype>collection</datatype>
    <private />
    <alwaysinit />
  </stage>
  <stage stageid="c6119b42-055b-4dad-9b94-af9bf33cd60e" name="Start" type="Start">
    <subsheetid>603b3371-7a7d-4ba7-a03c-abc5e4cb0e03</subsheetid>
    <loginhibit />
    <display x="0" y="-135" />
    <inputs>
      <input type="collection" name="Borger" stage="Borger" />
    </inputs>
    <onsuccess>d2947e37-d2da-461d-8cf2-8ae15c3c1567</onsuccess>
  </stage>
  <stage stageid="cf8654f2-8f89-4c9b-821b-37dc7275b4fb" name="End" type="End">
    <subsheetid>603b3371-7a7d-4ba7-a03c-abc5e4cb0e03</subsheetid>
    <loginhibit />
    <display x="0" y="135" />
    <outputs>
      <output type="flag" name="Succes" stage="Succes" />
      <output type="number" name="Antal" stage="Antal" />
      <output type="collection" name="Udlån" stage="Udlån" />
      <output type="collection" name="Indsatser" stage="Indsatser" />
    </outputs>
  </stage>
  <stage stageid="2163065b-d7a3-4d65-8b66-f067bbe2df7d" name="Hent udlån" type="Block">
    <subsheetid>603b3371-7a7d-4ba7-a03c-abc5e4cb0e03</subsheetid>
    <loginhibit />
    <display x="-75" y="-90" w="210" h="195" />
    <font family="Segoe UI" size="10" style="Regular" color="7FB2E5" />
  </stage>
  <stage stageid="360755c3-9136-4e31-adf6-237149f5efbf" name="Nexus - Core::Start" type="Action">
    <subsheetid>603b3371-7a7d-4ba7-a03c-abc5e4cb0e03</subsheetid>
    <loginhibit onsuccess="true" />
    <display x="120" y="-240" />
    <inputs>
      <input type="text" name="Credentials" friendlyname="Credentials" expr="&quot;KMD Nexus - produktion&quot;" />
    </inputs>
    <onsuccess>514cde31-01bd-4abe-a266-d9bdef153188</onsuccess>
    <resource object="Nexus - Core" action="Start" />
  </stage>
  <stage stageid="514cde31-01bd-4abe-a266-d9bdef153188" name="Debug" type="Calculation">
    <subsheetid>603b3371-7a7d-4ba7-a03c-abc5e4cb0e03</subsheetid>
    <loginhibit />
    <display x="120" y="-195" />
    <onsuccess>063573d2-a6a2-4069-b07c-4eff5074e531</onsuccess>
    <calculation expression="&quot;xxxxxxxxxx&quot;" stage="Cpr" />
  </stage>
  <stage stageid="d2947e37-d2da-461d-8cf2-8ae15c3c1567" name="Anchor1" type="Anchor">
    <subsheetid>603b3371-7a7d-4ba7-a03c-abc5e4cb0e03</subsheetid>
    <loginhibit />
    <display x="0" y="-105" w="10" h="10" />
    <onsuccess>8a402beb-c160-41d7-9a9e-a1f1b85d8cce</onsuccess>
  </stage>
  <stage stageid="3d42bcd4-f4ad-4d7d-a80c-be84b8d6b12d" name="Anchor2" type="Anchor">
    <subsheetid>603b3371-7a7d-4ba7-a03c-abc5e4cb0e03</subsheetid>
    <loginhibit />
    <display x="120" y="-105" w="10" h="10" />
    <onsuccess>d2947e37-d2da-461d-8cf2-8ae15c3c1567</onsuccess>
  </stage>
  <stage stageid="2c66f064-6f3a-4678-8810-3b764bedd6d1" name="Debug" type="Block">
    <subsheetid>603b3371-7a7d-4ba7-a03c-abc5e4cb0e03</subsheetid>
    <loginhibit />
    <display x="75" y="-285" w="225" h="165" />
    <font family="Segoe UI" size="10" style="Regular" color="FFFF99" />
  </stage>
  <stage stageid="781f05b6-329e-4662-ab16-11456f28de55" name="Borger" type="Collection">
    <subsheetid>603b3371-7a7d-4ba7-a03c-abc5e4cb0e03</subsheetid>
    <display x="-195" y="-15" w="120" h="30" />
    <datatype>collection</datatype>
    <private />
    <alwaysinit />
  </stage>
  <stage stageid="8a402beb-c160-41d7-9a9e-a1f1b85d8cce" name="Hent udlån" type="Action">
    <subsheetid>603b3371-7a7d-4ba7-a03c-abc5e4cb0e03</subsheetid>
    <loginhibit onsuccess="true" />
    <display x="0" y="-60" />
    <inputs>
      <input type="text" name="Url" friendlyname="Url" expr="[Borger._links.lendings] &amp; &quot;&amp;active=true&quot;" />
    </inputs>
    <outputs>
      <output type="collection" name="Data" friendlyname="Data" stage="Udlån" />
      <output type="number" name="Antal" friendlyname="Antal" stage="Antal" />
      <output type="text" name="Json" friendlyname="Json" narrative="Det rå json output" stage="" />
      <output type="number" name="Statuskode" friendlyname="Statuskode" narrative="Http statuskoden for kaldet" stage="Statuskode" />
    </outputs>
    <onsuccess>e2da14d4-aa20-46bb-8914-2c93c5b9748f</onsuccess>
    <resource object="Nexus - Core" action="Get" />
  </stage>
  <stage stageid="05a29062-656c-4a03-9f6a-2fd7f822a4c1" name="Antal" type="Data">
    <subsheetid>603b3371-7a7d-4ba7-a03c-abc5e4cb0e03</subsheetid>
    <display x="-195" y="300" w="120" h="30" />
    <datatype>number</datatype>
    <initialvalue />
    <private />
    <alwaysinit />
  </stage>
  <stage stageid="6d57f653-d925-428f-b6f9-15da6ba35383" name="Statuskode" type="Data">
    <subsheetid>603b3371-7a7d-4ba7-a03c-abc5e4cb0e03</subsheetid>
    <display x="-195" y="135" w="120" h="30" />
    <datatype>number</datatype>
    <initialvalue />
    <private />
    <alwaysinit />
  </stage>
  <stage stageid="7a792752-8d12-4de1-89a8-2aa8079db213" name="Succes" type="Data">
    <subsheetid>603b3371-7a7d-4ba7-a03c-abc5e4cb0e03</subsheetid>
    <display x="-195" y="255" w="120" h="30" />
    <datatype>flag</datatype>
    <initialvalue>False</initialvalue>
    <private />
    <alwaysinit />
  </stage>
  <stage stageid="063573d2-a6a2-4069-b07c-4eff5074e531" name="Hent borger" type="Action">
    <subsheetid>603b3371-7a7d-4ba7-a03c-abc5e4cb0e03</subsheetid>
    <loginhibit onsuccess="true" />
    <display x="120" y="-150" />
    <inputs>
      <input type="text" name="Cpr" friendlyname="Cpr" expr="[Cpr]" />
    </inputs>
    <outputs>
      <output type="collection" name="Borger" friendlyname="Borger" stage="Borger" />
    </outputs>
    <onsuccess>3d42bcd4-f4ad-4d7d-a80c-be84b8d6b12d</onsuccess>
    <resource object="Nexus - Borgere og forløb" action="Hent borger" />
  </stage>
  <stage stageid="e2da14d4-aa20-46bb-8914-2c93c5b9748f" name="Succes?" type="Decision">
    <subsheetid>603b3371-7a7d-4ba7-a03c-abc5e4cb0e03</subsheetid>
    <loginhibit />
    <display x="0" y="-15" />
    <decision expression="[Statuskode] = 200" />
    <ontrue>679784c7-373e-4655-b701-b18eb5cd330d</ontrue>
    <onfalse>fce73eab-1c6a-4979-a2d6-91cb2df38829</onfalse>
  </stage>
  <stage stageid="679784c7-373e-4655-b701-b18eb5cd330d" name="Hent indsatser" type="Action">
    <subsheetid>603b3371-7a7d-4ba7-a03c-abc5e4cb0e03</subsheetid>
    <loginhibit onsuccess="true" />
    <display x="0" y="30" />
    <inputs>
      <input type="text" name="Url" friendlyname="Url" expr="[Borger._links.hclGrants] &amp; &quot;&amp;status=active&quot;" />
    </inputs>
    <outputs>
      <output type="collection" name="Data" friendlyname="Data" stage="Indsatser" />
      <output type="number" name="Antal" friendlyname="Antal" stage="Antal" />
      <output type="text" name="Json" friendlyname="Json" narrative="Det rå json output" stage="" />
      <output type="number" name="Statuskode" friendlyname="Statuskode" narrative="Http statuskoden for kaldet" stage="Statuskode" />
    </outputs>
    <onsuccess>7f716611-c219-4242-878c-95d4bd1ddf21</onsuccess>
    <resource object="Nexus - Core" action="Get" />
  </stage>
  <stage stageid="fce73eab-1c6a-4979-a2d6-91cb2df38829" name="End7" type="End">
    <subsheetid>603b3371-7a7d-4ba7-a03c-abc5e4cb0e03</subsheetid>
    <loginhibit />
    <display x="180" y="-15" />
    <outputs>
      <output type="flag" name="Succes" stage="Succes" />
      <output type="number" name="Antal" stage="Antal" />
      <output type="collection" name="Udlån" stage="Udlån" />
      <output type="collection" name="Indsatser" stage="Indsatser" />
    </outputs>
  </stage>
  <stage stageid="7f716611-c219-4242-878c-95d4bd1ddf21" name="Sæt succes" type="Calculation">
    <subsheetid>603b3371-7a7d-4ba7-a03c-abc5e4cb0e03</subsheetid>
    <loginhibit />
    <display x="0" y="75" />
    <onsuccess>cf8654f2-8f89-4c9b-821b-37dc7275b4fb</onsuccess>
    <calculation expression="[Statuskode] = 200" stage="Succes" />
  </stage>
  <stage stageid="db7c0613-c927-4237-838d-4051204a9cba" name="Indsatser" type="Collection">
    <subsheetid>603b3371-7a7d-4ba7-a03c-abc5e4cb0e03</subsheetid>
    <display x="-195" y="390" w="120" h="30" />
    <datatype>collection</datatype>
    <private />
    <alwaysinit />
  </stage>
  <stage stageid="de6874ae-1287-4c7c-8e60-5fe519ad6f38" name="Hent detaljer" type="Action">
    <subsheetid>2603825d-13ba-4624-8fe1-c2da14ae1e7e</subsheetid>
    <loginhibit onsuccess="true" />
    <display x="135" y="-195" />
    <inputs>
      <input type="text" name="Url" friendlyname="Url" expr="[Forløb._links.self]" />
    </inputs>
    <outputs>
      <output type="collection" name="Data" friendlyname="Data" stage="Forløb" />
      <output type="number" name="Antal" friendlyname="Antal" stage="" />
      <output type="text" name="Json" friendlyname="Json" narrative="Det rå json output" stage="" />
      <output type="number" name="Statuskode" friendlyname="Statuskode" narrative="Http statuskoden for kaldet" stage="" />
    </outputs>
    <onsuccess>cb8cb880-72b8-4bfb-9f90-8eee1d19df29</onsuccess>
    <resource object="Nexus - Core" action="Get" />
  </stage>
  <stage stageid="592372a7-e296-405e-8d14-a35afdf3ca4f" name="Hent medicinkort" type="SubSheetInfo">
    <subsheetid>ed9423f9-dab8-4634-afa0-b7f117e8da58</subsheetid>
    <display x="-195" y="-105" w="150" h="90" />
  </stage>
  <stage stageid="0dbfc851-5199-4ca4-9eec-9dec32b2f66e" name="Start" type="Start">
    <subsheetid>ed9423f9-dab8-4634-afa0-b7f117e8da58</subsheetid>
    <loginhibit />
    <display x="15" y="-135" />
    <inputs>
      <input type="collection" name="Borger" stage="Borger" />
    </inputs>
    <onsuccess>10d017cb-5ed0-43cc-bac4-75d008f3ac3e</onsuccess>
  </stage>
  <stage stageid="91112505-5b23-4c76-9253-79ed9bf3d5e2" name="End" type="End">
    <subsheetid>ed9423f9-dab8-4634-afa0-b7f117e8da58</subsheetid>
    <loginhibit />
    <display x="15" y="105" />
    <outputs>
      <output type="collection" name="Medicinkort" stage="Data" />
      <output type="text" name="Json" stage="Json" />
    </outputs>
  </stage>
  <stage stageid="2696e531-e2f8-4245-bbad-7c49d517d881" name="Input" type="Block">
    <subsheetid>ed9423f9-dab8-4634-afa0-b7f117e8da58</subsheetid>
    <display x="-270" y="-45" w="150" h="150" />
    <font family="Segoe UI" size="10" style="Regular" color="339966" />
  </stage>
  <stage stageid="881c1a28-82ff-4bad-a0f7-3369a6b42cc1" name="Variabler" type="Block">
    <subsheetid>ed9423f9-dab8-4634-afa0-b7f117e8da58</subsheetid>
    <display x="-270" y="180" w="150" h="60" />
    <font family="Segoe UI" size="10" style="Regular" color="666699" />
  </stage>
  <stage stageid="fc03d023-5f33-4a5c-94f5-87ba728214fc" name="Konstanter" type="Block">
    <subsheetid>ed9423f9-dab8-4634-afa0-b7f117e8da58</subsheetid>
    <display x="-270" y="120" w="150" h="45" />
    <font family="Segoe UI" size="10" style="Regular" color="008080" />
  </stage>
  <stage stageid="c990e040-529d-44c4-9584-9baefcc53bd1" name="Output" type="Block">
    <subsheetid>ed9423f9-dab8-4634-afa0-b7f117e8da58</subsheetid>
    <display x="-270" y="255" w="150" h="150" />
    <font family="Segoe UI" size="10" style="Regular" color="800080" />
  </stage>
  <stage stageid="05e12c45-b8ed-4bd5-93bb-671db407f968" name="Nexus - Core::Start" type="Action">
    <subsheetid>ed9423f9-dab8-4634-afa0-b7f117e8da58</subsheetid>
    <loginhibit onsuccess="true" />
    <display x="135" y="-195" />
    <inputs>
      <input type="text" name="Credentials" friendlyname="Credentials" expr="&quot;KMD Nexus - produktion&quot;" />
    </inputs>
    <onsuccess>1f48fd22-891c-4f67-828e-c34aa8424e4f</onsuccess>
    <resource object="Nexus - Core" action="Start" />
  </stage>
  <stage stageid="a6d87cca-fd13-433c-a9cf-da921e158508" name="Debug" type="Block">
    <subsheetid>ed9423f9-dab8-4634-afa0-b7f117e8da58</subsheetid>
    <loginhibit />
    <display x="90" y="-225" w="165" h="105" />
    <font family="Segoe UI" size="10" style="Regular" color="FFFF99" />
  </stage>
  <stage stageid="1f48fd22-891c-4f67-828e-c34aa8424e4f" name="Hent borger" type="SubSheet">
    <subsheetid>ed9423f9-dab8-4634-afa0-b7f117e8da58</subsheetid>
    <loginhibit />
    <display x="135" y="-150" />
    <inputs>
      <input type="text" name="Cpr" friendlyname="Cpr" expr="&quot;xxxxxxxxxx&quot;" />
    </inputs>
    <outputs>
      <output type="collection" name="Borger" friendlyname="Borger" stage="Borger" />
    </outputs>
    <onsuccess>8beefbe2-4b55-4d71-bf66-622526c5918f</onsuccess>
    <processid>d5cc0f3c-1d67-4f5b-a83a-08a4b9574114</processid>
  </stage>
  <stage stageid="10d017cb-5ed0-43cc-bac4-75d008f3ac3e" name="Anchor15" type="Anchor">
    <subsheetid>ed9423f9-dab8-4634-afa0-b7f117e8da58</subsheetid>
    <loginhibit />
    <display x="15" y="-105" w="10" h="10" />
    <onsuccess>b2329299-a784-4716-84b5-4307ffde7306</onsuccess>
  </stage>
  <stage stageid="8beefbe2-4b55-4d71-bf66-622526c5918f" name="Anchor16" type="Anchor">
    <subsheetid>ed9423f9-dab8-4634-afa0-b7f117e8da58</subsheetid>
    <loginhibit />
    <display x="135" y="-105" w="10" h="10" />
    <onsuccess>10d017cb-5ed0-43cc-bac4-75d008f3ac3e</onsuccess>
  </stage>
  <stage stageid="8a5179c3-3198-4c88-9c8f-886520c75855" name="Borger" type="Collection">
    <subsheetid>ed9423f9-dab8-4634-afa0-b7f117e8da58</subsheetid>
    <display x="-195" y="-15" w="120" h="30" />
    <datatype>collection</datatype>
    <private />
    <alwaysinit />
  </stage>
  <stage stageid="b2329299-a784-4716-84b5-4307ffde7306" name="Hent medicinkort" type="Action">
    <subsheetid>ed9423f9-dab8-4634-afa0-b7f117e8da58</subsheetid>
    <loginhibit onsuccess="true" />
    <display x="15" y="0" />
    <inputs>
      <input type="text" name="Url" friendlyname="Url" expr="[Borger._links.medicationCard]" />
    </inputs>
    <outputs>
      <output type="collection" name="Data" friendlyname="Data" stage="Data" />
      <output type="number" name="Antal" friendlyname="Antal" stage="" />
      <output type="text" name="Json" friendlyname="Json" narrative="Det rå json output" stage="Json" />
      <output type="number" name="Statuskode" friendlyname="Statuskode" narrative="Http statuskoden for kaldet" stage="Statuskode" />
    </outputs>
    <onsuccess>4bedc6fb-97b8-436d-aea6-5f9b94f5cdc7</onsuccess>
    <resource object="Nexus - Core" action="Get" />
  </stage>
  <stage stageid="f88019f1-3102-4ca1-b22e-fd90da79832f" name="Data" type="Collection">
    <subsheetid>ed9423f9-dab8-4634-afa0-b7f117e8da58</subsheetid>
    <display x="-195" y="285" w="120" h="30" />
    <datatype>collection</datatype>
    <private />
    <alwaysinit />
  </stage>
  <stage stageid="c17ac2e4-6eb8-45b1-b249-8e3f9ce72fda" name="Json" type="Data">
    <subsheetid>ed9423f9-dab8-4634-afa0-b7f117e8da58</subsheetid>
    <display x="-195" y="375" w="120" h="30" />
    <datatype>text</datatype>
    <initialvalue />
    <private />
    <alwaysinit />
  </stage>
  <stage stageid="896f4dad-f1f4-4871-a1e7-577369b9f929" name="Statuskode" type="Data">
    <subsheetid>ed9423f9-dab8-4634-afa0-b7f117e8da58</subsheetid>
    <display x="-195" y="210" w="120" h="30" />
    <datatype>number</datatype>
    <initialvalue />
    <private />
    <alwaysinit />
  </stage>
  <stage stageid="a811f996-abbb-4432-a11a-96fb47e1d821" name="Hent medicinkort" type="Block">
    <subsheetid>ed9423f9-dab8-4634-afa0-b7f117e8da58</subsheetid>
    <loginhibit />
    <display x="-105" y="-45" w="225" h="75" />
    <font family="Segoe UI" size="10" style="Regular" color="7FB2E5" />
  </stage>
  <stage stageid="3db79289-1e1a-48b0-9237-97384b89fc5b" name="Succes" type="Data">
    <subsheetid>ed9423f9-dab8-4634-afa0-b7f117e8da58</subsheetid>
    <loginhibit />
    <display x="-195" y="330" w="120" h="30" />
    <datatype>flag</datatype>
    <initialvalue />
    <private />
    <alwaysinit />
  </stage>
  <stage stageid="4bedc6fb-97b8-436d-aea6-5f9b94f5cdc7" name="Sæt succes" type="Calculation">
    <subsheetid>ed9423f9-dab8-4634-afa0-b7f117e8da58</subsheetid>
    <loginhibit />
    <display x="15" y="60" />
    <onsuccess>91112505-5b23-4c76-9253-79ed9bf3d5e2</onsuccess>
    <calculation expression="[Statuskode] = 200" stage="Succes" />
  </stage>
  <stage stageid="1b81e573-a7ad-4993-81db-3496c4a0b641" name="Start dev" type="Action">
    <subsheetid>ed9423f9-dab8-4634-afa0-b7f117e8da58</subsheetid>
    <loginhibit onsuccess="true" />
    <display x="210" y="-150" />
    <inputs>
      <input type="text" name="Credentials" friendlyname="Credentials" expr="&quot;KMD Nexus - odensedev&quot;" />
    </inputs>
    <onsuccess>1f48fd22-891c-4f67-828e-c34aa8424e4f</onsuccess>
    <resource object="Nexus - Core" action="Start" />
  </stage>
  <stage stageid="4c0879fd-88e9-47cf-8040-8231c22cad6d" name="Opdater medicin" type="SubSheetInfo">
    <subsheetid>ceea0079-36a7-4682-904d-7c5f6e2058f8</subsheetid>
    <display x="-195" y="-105" w="150" h="90" />
  </stage>
  <stage stageid="ec4b002b-d7a8-4e1e-bd4d-a04622ff1f03" name="Start" type="Start">
    <subsheetid>ceea0079-36a7-4682-904d-7c5f6e2058f8</subsheetid>
    <loginhibit />
    <display x="0" y="15" />
    <inputs>
      <input type="collection" name="Medicin" stage="Medicin" />
      <input type="text" name="Bemærkning" stage="Bemærkning" />
    </inputs>
    <onsuccess>1a5dfc7c-cec7-4189-aa55-f3d7b60c5330</onsuccess>
  </stage>
  <stage stageid="52e35edf-3a86-4c8e-a9e6-08f43f325be9" name="End" type="End">
    <subsheetid>ceea0079-36a7-4682-904d-7c5f6e2058f8</subsheetid>
    <loginhibit />
    <display x="0" y="270" />
    <outputs>
      <output type="collection" name="Medicinkort" stage="Data" />
      <output type="text" name="Json" stage="Json" />
    </outputs>
  </stage>
  <stage stageid="471c7b3e-8d84-4fef-b19d-37d31a5d0288" name="Input" type="Block">
    <subsheetid>ceea0079-36a7-4682-904d-7c5f6e2058f8</subsheetid>
    <display x="-270" y="-45" w="150" h="150" />
    <font family="Segoe UI" size="10" style="Regular" color="339966" />
  </stage>
  <stage stageid="d9e1291c-862a-4f71-b9a2-088f67ad0006" name="Variabler" type="Block">
    <subsheetid>ceea0079-36a7-4682-904d-7c5f6e2058f8</subsheetid>
    <display x="-270" y="180" w="150" h="105" />
    <font family="Segoe UI" size="10" style="Regular" color="666699" />
  </stage>
  <stage stageid="4ae56e84-b9ad-4420-afa7-88114b5aa7bf" name="Konstanter" type="Block">
    <subsheetid>ceea0079-36a7-4682-904d-7c5f6e2058f8</subsheetid>
    <display x="-270" y="120" w="150" h="45" />
    <font family="Segoe UI" size="10" style="Regular" color="008080" />
  </stage>
  <stage stageid="96960b52-a7e2-4dcf-9cec-dae7ec875bcf" name="Output" type="Block">
    <subsheetid>ceea0079-36a7-4682-904d-7c5f6e2058f8</subsheetid>
    <display x="-270" y="300" w="150" h="150" />
    <font family="Segoe UI" size="10" style="Regular" color="800080" />
  </stage>
  <stage stageid="1009c9a5-6d32-4b6d-9ee8-296d1eb4951b" name="Nexus - Core::Start" type="Action">
    <subsheetid>ceea0079-36a7-4682-904d-7c5f6e2058f8</subsheetid>
    <loginhibit onsuccess="true" />
    <display x="135" y="-195" />
    <inputs>
      <input type="text" name="Credentials" friendlyname="Credentials" expr="&quot;KMD Nexus - produktion&quot;" />
    </inputs>
    <onsuccess>a3c0a5e8-5ad0-4a45-b1f3-3424e93b7ed5</onsuccess>
    <resource object="Nexus - Core" action="Start" />
  </stage>
  <stage stageid="81099c86-91b5-41be-b5ab-3632119028eb" name="Debug" type="Block">
    <subsheetid>ceea0079-36a7-4682-904d-7c5f6e2058f8</subsheetid>
    <loginhibit />
    <display x="90" y="-225" w="165" h="240" />
    <font family="Segoe UI" size="10" style="Regular" color="FFFF99" />
  </stage>
  <stage stageid="a3c0a5e8-5ad0-4a45-b1f3-3424e93b7ed5" name="Hent borger" type="SubSheet">
    <subsheetid>ceea0079-36a7-4682-904d-7c5f6e2058f8</subsheetid>
    <loginhibit />
    <display x="135" y="-150" />
    <inputs>
      <input type="text" name="Cpr" friendlyname="Cpr" expr="&quot;xxxxxxxxxx&quot;" />
    </inputs>
    <outputs>
      <output type="collection" name="Borger" friendlyname="Borger" stage="Borger" />
    </outputs>
    <onsuccess>ddc3b741-9499-4da4-ba4c-5bfd2fcf6981</onsuccess>
    <processid>d5cc0f3c-1d67-4f5b-a83a-08a4b9574114</processid>
  </stage>
  <stage stageid="7be4b297-a838-4e3a-9d9f-876e9792a2c5" name="Borger" type="Collection">
    <subsheetid>ceea0079-36a7-4682-904d-7c5f6e2058f8</subsheetid>
    <display x="210" y="-150" />
    <datatype>collection</datatype>
    <private />
    <alwaysinit />
  </stage>
  <stage stageid="ea3da65f-52e9-45a7-b824-2653171f82fe" name="Opdater medicin i Nexus" type="Action">
    <subsheetid>ceea0079-36a7-4682-904d-7c5f6e2058f8</subsheetid>
    <loginhibit onsuccess="true" />
    <display x="0" y="165" />
    <inputs>
      <input type="text" name="Url" friendlyname="Url" expr="[Medicin._links.self]" />
      <input type="text" name="Body" friendlyname="Body" expr="[MedicinJson]" />
    </inputs>
    <outputs>
      <output type="collection" name="Data" friendlyname="Data" stage="Data" />
      <output type="number" name="Antal" friendlyname="Antal" stage="" />
      <output type="text" name="Json" friendlyname="Json" narrative="Det rå json output" stage="Json" />
      <output type="number" name="Statuskode" friendlyname="Statuskode" narrative="Http statuskoden for kaldet" stage="Statuskode" />
    </outputs>
    <onsuccess>42f6ba26-bebc-47d1-aafc-f21145e25afb</onsuccess>
    <breakpoint type="0">
      <condition></condition>
    </breakpoint>
    <resource object="Nexus - Core" action="Put" />
  </stage>
  <stage stageid="e6054ee0-1a9f-4bcd-886d-563c14c6b52b" name="Data" type="Collection">
    <subsheetid>ceea0079-36a7-4682-904d-7c5f6e2058f8</subsheetid>
    <display x="-195" y="330" w="120" h="30" />
    <datatype>collection</datatype>
    <private />
    <alwaysinit />
  </stage>
  <stage stageid="0dab683d-8f38-422c-aaaf-06c02b0492e6" name="Json" type="Data">
    <subsheetid>ceea0079-36a7-4682-904d-7c5f6e2058f8</subsheetid>
    <display x="-195" y="420" w="120" h="30" />
    <datatype>text</datatype>
    <initialvalue />
    <private />
    <alwaysinit />
  </stage>
  <stage stageid="47c98808-187d-453a-b790-0000a0fd9e2e" name="Statuskode" type="Data">
    <subsheetid>ceea0079-36a7-4682-904d-7c5f6e2058f8</subsheetid>
    <display x="-195" y="255" w="120" h="30" />
    <datatype>number</datatype>
    <initialvalue />
    <private />
    <alwaysinit />
  </stage>
  <stage stageid="12dc6f58-4e2f-4bfa-8dd0-bbcbb6a6006e" name="Opdater medicin" type="Block">
    <subsheetid>ceea0079-36a7-4682-904d-7c5f6e2058f8</subsheetid>
    <loginhibit />
    <display x="-105" y="45" w="225" h="150" />
    <font family="Segoe UI" size="10" style="Regular" color="7FB2E5" />
  </stage>
  <stage stageid="8ea96041-a378-4462-aafc-381d8bfdeb49" name="Succes" type="Data">
    <subsheetid>ceea0079-36a7-4682-904d-7c5f6e2058f8</subsheetid>
    <loginhibit />
    <display x="-195" y="375" w="120" h="30" />
    <datatype>flag</datatype>
    <initialvalue />
    <private />
    <alwaysinit />
  </stage>
  <stage stageid="42f6ba26-bebc-47d1-aafc-f21145e25afb" name="Sæt succes" type="Calculation">
    <subsheetid>ceea0079-36a7-4682-904d-7c5f6e2058f8</subsheetid>
    <loginhibit />
    <display x="0" y="225" />
    <onsuccess>52e35edf-3a86-4c8e-a9e6-08f43f325be9</onsuccess>
    <calculation expression="[Statuskode] = 200" stage="Succes" />
  </stage>
  <stage stageid="ddc3b741-9499-4da4-ba4c-5bfd2fcf6981" name="Hent medicinkort" type="SubSheet">
    <subsheetid>ceea0079-36a7-4682-904d-7c5f6e2058f8</subsheetid>
    <loginhibit />
    <display x="135" y="-105" />
    <inputs>
      <input type="collection" name="Borger" friendlyname="Borger" expr="[Borger]" />
    </inputs>
    <outputs>
      <output type="collection" name="Medicinkort" friendlyname="Medicinkort" stage="Medicinkort" />
      <output type="text" name="Json" friendlyname="Json" stage="Json" />
    </outputs>
    <onsuccess>307f848f-48ce-4def-8fd3-b80cde554848</onsuccess>
    <processid>ed9423f9-dab8-4634-afa0-b7f117e8da58</processid>
  </stage>
  <stage stageid="335544f9-a4cf-46dc-9e08-1185c715e662" name="Medicinkort" type="Collection">
    <subsheetid>ceea0079-36a7-4682-904d-7c5f6e2058f8</subsheetid>
    <display x="210" y="-105" />
    <datatype>collection</datatype>
    <private />
    <alwaysinit />
  </stage>
  <stage stageid="2086055a-859f-4e62-aadb-3eaccd286756" name="Medicin" type="Collection">
    <subsheetid>ceea0079-36a7-4682-904d-7c5f6e2058f8</subsheetid>
    <display x="-195" y="-15" w="120" h="30" />
    <datatype>collection</datatype>
    <private />
    <alwaysinit />
  </stage>
  <stage stageid="34e56e21-b7c9-4297-9fef-eb57cc009979" name="Bemærkning" type="Data">
    <subsheetid>ceea0079-36a7-4682-904d-7c5f6e2058f8</subsheetid>
    <display x="-195" y="30" w="120" h="30" />
    <datatype>text</datatype>
    <initialvalue />
    <private />
    <alwaysinit />
  </stage>
  <stage stageid="307f848f-48ce-4def-8fd3-b80cde554848" name="Utility - Odk Linq::Filter" type="Action">
    <subsheetid>ceea0079-36a7-4682-904d-7c5f6e2058f8</subsheetid>
    <loginhibit onsuccess="true" />
    <display x="135" y="-60" />
    <inputs>
      <input type="collection" name="Collection In" friendlyname="Collection In" narrative="Input collection" expr="[Medicinkort.medicationGroups]" />
      <input type="text" name="Filter" friendlyname="Filter" narrative="The filter to apply" expr="&quot;[displayName] = 'Dosisdispenseret medicin'&quot;" />
    </inputs>
    <outputs>
      <output type="number" name="Count" friendlyname="Count" narrative="The amount of rows in the filtered collection" stage="" />
      <output type="collection" name="Collection Out" friendlyname="Collection Out" narrative="The filtered collection" stage="Medigruppe" />
    </outputs>
    <onsuccess>76c18b75-54f0-4d28-8707-cfcf6ba1c394</onsuccess>
    <resource object="Utility - Odk Linq" action="Filter" />
  </stage>
  <stage stageid="097be2db-1597-4a07-be59-de0173b01d0b" name="Medigruppe" type="Collection">
    <subsheetid>ceea0079-36a7-4682-904d-7c5f6e2058f8</subsheetid>
    <display x="210" y="-60" />
    <datatype>collection</datatype>
    <private />
    <alwaysinit />
  </stage>
  <stage stageid="76c18b75-54f0-4d28-8707-cfcf6ba1c394" name="Utility - Odk Linq::Filter" type="Action">
    <subsheetid>ceea0079-36a7-4682-904d-7c5f6e2058f8</subsheetid>
    <loginhibit onsuccess="true" />
    <display x="135" y="-15" />
    <inputs>
      <input type="collection" name="Collection In" friendlyname="Collection In" narrative="Input collection" expr="[Medigruppe.medications]" />
      <input type="text" name="Filter" friendlyname="Filter" narrative="The filter to apply" expr="&quot;[id] = '156873'&quot;" />
    </inputs>
    <outputs>
      <output type="number" name="Count" friendlyname="Count" narrative="The amount of rows in the filtered collection" stage="" />
      <output type="collection" name="Collection Out" friendlyname="Collection Out" narrative="The filtered collection" stage="Medicin" />
    </outputs>
    <onsuccess>1a5dfc7c-cec7-4189-aa55-f3d7b60c5330</onsuccess>
    <resource object="Utility - Odk Linq" action="Filter" />
  </stage>
  <stage stageid="1a5dfc7c-cec7-4189-aa55-f3d7b60c5330" name="Hent json" type="Action">
    <subsheetid>ceea0079-36a7-4682-904d-7c5f6e2058f8</subsheetid>
    <loginhibit onsuccess="true" />
    <display x="0" y="75" />
    <inputs>
      <input type="text" name="Url" friendlyname="Url" expr="[Medicin._links.self]" />
    </inputs>
    <outputs>
      <output type="collection" name="Data" friendlyname="Data" stage="" />
      <output type="number" name="Antal" friendlyname="Antal" stage="" />
      <output type="text" name="Json" friendlyname="Json" narrative="Det rå json output" stage="MedicinJson" />
      <output type="number" name="Statuskode" friendlyname="Statuskode" narrative="Http statuskoden for kaldet" stage="" />
    </outputs>
    <onsuccess>990656a4-d6ef-4679-8e72-a0c4d7d5d641</onsuccess>
    <resource object="Nexus - Core" action="Get" />
  </stage>
  <stage stageid="016bc2e4-5704-425d-aa59-fa6563c39bde" name="MedicinJson" type="Data">
    <subsheetid>ceea0079-36a7-4682-904d-7c5f6e2058f8</subsheetid>
    <display x="-195" y="210" w="120" h="30" />
    <datatype>text</datatype>
    <initialvalue />
    <private />
    <alwaysinit />
  </stage>
  <stage stageid="990656a4-d6ef-4679-8e72-a0c4d7d5d641" name="Opdater medicion JSON" type="Code">
    <subsheetid>ceea0079-36a7-4682-904d-7c5f6e2058f8</subsheetid>
    <loginhibit />
    <display x="0" y="120" />
    <inputs>
      <input type="text" name="Medicine_Json" expr="[MedicinJson]" />
      <input type="text" name="Remark" expr="[Bemærkning]" />
    </inputs>
    <outputs>
      <output type="text" name="Medicine_Json_Out" stage="MedicinJson" />
    </outputs>
    <onsuccess>ea3da65f-52e9-45a7-b824-2653171f82fe</onsuccess>
    <code><![CDATA[JObject jsonObj = JObject.Parse(Medicine_Json);
 
Medicine_Json_Out = null;

jsonObj["remarks"] = Remark;

Medicine_Json_Out = jsonObj.ToString();]]></code>
  </stage>
</process>